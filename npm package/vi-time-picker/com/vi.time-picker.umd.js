(function(w,t){typeof exports=="object"&&typeof module!="undefined"?t(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],t):(w=typeof globalThis!="undefined"?globalThis:w||self,t((w.vi=w.vi||{},w.vi["time-picker"]={}),w.Vue))})(this,function(w,t){"use strict";const W=(n,o)=>(n.install=function(u){const a=o?`vi-${o}`:"vi-"+n.name.replace(/vi/gi,"").toLowerCase();u.component(a,n)},n),Q=n=>Array.isArray(n);function k(n){const o=`vi-${n}`;return{n:p=>p?p.startsWith("-")?`${o}${p}`:`${o}_${p}`:o,classes:(...p)=>p.map(l=>{if(Q(l)){const[V,h,b=null]=l;return V?h:b}return l})}}const H={clearable:{type:[String,Boolean],default:!1},isRange:{type:[String,Boolean],default:!1},disabledHours:{type:Array,default:[]},disabledMinutes:{type:Array,default:[]},disabledSeconds:{type:Array,default:[]},arrowControl:{type:[String,Boolean],default:""},placeholder:{type:String,default:"Arbitrary time"},startPlaceholder:String,endPlaceholder:String,modelValue:{type:[String,Number,Boolean],default:""},dynamicCss:{type:Object,default:()=>({"base-margin-t":"10","base-margin-r":"10","base-margin-b":"10","base-margin-l":"10","input-box-shadow-x":"0","input-box-shadow-y":"0","input-box-shadow-blur":"0","input-box-shadow-spread":"1","input-box-shadow-color":"#dcdfe6","input-hover-box-shadow-x":"0","input-hover-box-shadow-y":"0","input-hover-box-shadow-blur":"0","input-hover-box-shadow-spread":"1","input-hover-box-shadow-color":"#85a2dd","input-active-box-shadow-x":"0","input-active-box-shadow-y":"0","input-active-box-shadow-blur":"0","input-active-box-shadow-spread":"1","input-active-box-shadow-color":"rgb(0, 94, 255)","input-border-radius":"4","input-line-padding-t":"0","input-line-padding-r":"28","input-line-padding-b":"0","input-line-padding-l":"8","input-bg-color":"rgba(255,255,255)","input-fo-color":"#606266","input-line-height":"30","input-width":"200","input-text-alight":"start","popper-bg-color":"#fff","popper-height":"228","popper-border-radius":"8","popper-z-index":"999","popper-box-shadow-x":"0","popper-box-shadow-y":"0","popper-box-shadow-blur":"12","popper-box-shadow-spread":"0","popper-box-shadow-color":"rgba(0, 0, 0, 0.12)","popper-arrow-height":"10","popper-panel-padding-t":"8","popper-panel-padding-r":"4","popper-panel-padding-b":"0","popper-panel-padding-l":"4","popper-footer-height":"36","popper-footer-fo-size":"12","popper-footer-border-top-width":"1","popper-footer-border-top-style":"solid","popper-footer-border-top-color":"rgb(228, 231, 237)","popper-footer-cancel-fo-color":"#303133","popper-footer-ok-fo-color":"skyblue","popper-footer-ok-fo-weight":"800","popper-footer-ok-margin-t":"0","popper-footer-ok-margin-r":"5","popper-footer-ok-margin-b":"0","popper-footer-ok-margin-l":"5","popper-footer-ok-padding-t":"0","popper-footer-ok-padding-r":"5","popper-footer-ok-padding-b":"0","popper-footer-ok-padding-l":"5","popper-spinner-pitch-box-border-top-width":"1","popper-spinner-pitch-box-border-top-style":"solid","popper-spinner-pitch-box-border-top-color":"#e4e7ed","popper-spinner-pitch-box-border-bottom-width":"1","popper-spinner-pitch-box-border-bottom-style":"solid","popper-spinner-pitch-box-border-bottom-color":"#e4e7ed","popper-spinner-number-height":"32","popper-spinner-number-fo-color":"#606266","popper-spinner-number-fo-size":"12","popper-spinner-number-hover-bg-color":"#e0e0e0","popper-spinner-number-active-fo-color":"#000","popper-spinner-number-active-fo-weight":"700","popper-spinner-number-active-hover-bg-color":"rgba($color: #e0e0e0, $alpha: 0)","popper-spinner-number-disabled-fo-color":"rgb(223, 223, 223)","popper-spinner-number-disabled-hover-bg-color":"rgba($color: #e0e0e0, $alpha: 0)","scroll-bar-thumb-width":"8",scrollBarHeight:"60",scrollBarBgColor:"rgb(218, 218, 218)",scrollBarBgColorHover:"skyblue"})}},D=Symbol("time-picker"),Y=function(n,o){for(let[u,a]of Object.entries(o.value))n.style.setProperty("--"+u,a)},N={mounted(n,o){Y(n,o)},updated(n,o){Y(n,o)},install(n){n.directive("Css",this)}},E={modelValue:{type:[String,Number,Array],default:""},showPassword:{type:[String,Boolean],default:!1},readonly:{type:[String,Boolean],default:!1},clearable:{type:[String,Boolean],default:!1},placeholder:{type:String,default:"\u8BF7\u9009\u62E9\u60A8\u9700\u8981\u7684\u5185\u5BB9o(*\uFFE3\u25BD\uFFE3*)\u30D6"},dynamicCss:{type:Object,default:()=>({"input-box-shadow-x":"0","input-box-shadow-y":"0","input-box-shadow-blur":"0","input-box-shadow-spread":"1","input-box-shadow-color":"#dcdfe6","input-box-hover-shadow-x":"0","input-box-hover-shadow-y":"0","input-box-hover-shadow-blur":"0","input-box-hover-shadow-spread":"1","input-box-hover-shadow-color":"#85a2dd","input-box-active-shadow-x":"0","input-box-active-shadow-y":"0","input-box-active-shadow-blur":"0","input-box-active-shadow-spread":"1","input-box-active-shadow-color":"rgb(0, 94, 255)","input-border-radius":"4","input-line-padding-t":"0","input-line-padding-r":"28","input-line-padding-b":"0","input-line-padding-l":"8","input-bg-color":"rgba(255,255,255)","input-fo-color":"#606266","input-line-height":"30","input-width":"200","input-text-alight":"start"})}},X={path:{type:String,default:`M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 
        764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 
        45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z`},height:{type:[String,Number],default:"12px"},width:{type:[String,Number],default:"12px"},modelValue:{type:[String,Number,Boolean],default:""}},{n:Z,classes:ee}=k("input-svg-icon");var $=t.defineComponent({name:"VIInputSvgIcon",emits:["click"],props:X,setup(n,o){const u=function(a){o.emit("click",a)};return()=>t.createVNode("svg",{class:[ee(Z()),"icon"],height:n.height,width:n.width,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",onClick:u},[t.createVNode("path",{fill:"currentColor",d:n.path},null)])}});const{n:F,classes:te}=k("input");var A=t.defineComponent({name:"VIInput",emits:["focus","blur","click","update:modelValue","close"],directives:{css:N},props:E,components:[$],setup(n,o){const u="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z",a=t.reactive({softFocus:!1,isHover:!1}),p=function(m){v.value||o.emit("click",m)},l=function(m){v.value||(o.emit("update:modelValue",m.target.value),o.emit("close"),m.stopPropagation())},V=function(m){v.value||(o.emit("focus",m),a.softFocus=!0)},h=function(m){v.value||(o.emit("blur",m),a.softFocus=!1)},b=function(m){v.value||(a.isHover=!0)},S=function(m){v.value||(a.isHover=!1)},r=function(m){v.value||o.emit("update:modelValue",m.target.value)},C=function(m){v.value||o.emit("update:modelValue",m.target.value)},c=t.computed(()=>Object.assign(E.dynamicCss.default(),n.dynamicCss)),y=t.computed(()=>typeof n.readonly=="string"?!0:n.readonly),T=t.computed(()=>typeof n.clearable=="string"?!0:n.clearable),_=t.computed(()=>typeof n.showPassword=="string"?!0:n.showPassword),R=t.computed(()=>a.softFocus?"active":""),v=t.computed(()=>y.value?"disabled":"");return()=>t.withDirectives(t.createVNode("div",{class:[te(F()),R.value,v.value],onClick:p,onmouseenter:b,onmouseleave:S},[t.createVNode("input",{class:[F("_inner")],placeholder:n.placeholder,onFocus:V,onBlur:h,readonly:y.value,value:n.modelValue,onChange:r,onInput:C,type:_.value?"password":"text"},null),n.modelValue&&T.value&&a.isHover?t.createVNode($,{class:"icon",path:u,onClick:l},null):""]),[[t.resolveDirective("css"),c.value||{}]])}});const{n:x,classes:j}=k("popper");var O=t.defineComponent({name:"VITimePickerPopper",emits:["focus","blur","click"],props:["active"],setup(n,o){let{timePickerRef:u}=t.inject(D);const a=t.reactive({parentRect:{x:0,y:0},dropdownTop:0}),p=t.ref(null),l=t.ref(null),V=()=>{t.nextTick(()=>{a.parentRect=u.value.getBoundingClientRect(),a.dropdownTop=a.parentRect.height+10+"px"})};return t.onMounted(()=>V()),()=>{var h,b;return t.createVNode("div",{class:[x(""),n.active?"active":""],style:{top:a.dropdownTop}},[t.createVNode("div",{ref:p,class:[x("_arrow")]},[n.active]),t.createVNode("div",{ref:l,class:[j(x("_content"))]},[t.createVNode("div",{class:[j(x("_inner"))]},[(b=(h=o.slots).default)==null?void 0:b.call(h)])])])}}});const{n:M,classes:oe}=k("scroll-bar");var B=t.defineComponent({name:"VIScrollBar",emits:["focus","blur","click","scroll","getRef"],props:["dynamicCss"],directives:{css:N},setup(n,o){const u=t.ref(null),a=t.ref(null),p=t.ref(null),l=t.reactive({realMargin:0,realPadding:0,viewHeight:0,realHeight:"0",maxScrollBoxRange:0,proportion:0,scrollBarHeight:0,maxScrollBarRange:0,scrollBarMovePropor:0,scrollBoxMovePropor:0,translateY:0,startY:"",moveY:"",mouseMoving:!1});t.onMounted(()=>{t.nextTick(()=>{l.scrollBoxRealHeight=window.getComputedStyle(p.value).height.replace("px","")*1,l.scrollBarViewHeight=window.getComputedStyle(u.value).height.replace("px","")*1,l.scrollBoxMaxRange=l.scrollBoxRealHeight-l.scrollBarViewHeight,o.emit&&o.emit("getRef",u)})});const V=t.computed(()=>l.scrollBarHeight<l.realHeight.replace("px","")*1),h=function(c){o.emit("scroll",c)},b=function(c){document.addEventListener("mousedown",S),document.addEventListener("mousemove",r)},S=function(c){l.mouseMoving=!0,l.startY=c.clientY},r=function(c){l.moveY=l.startY-c.clientY,C(l.moveY)};document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mousedown",S),l.startY=0,l.moveY=0,l.mouseMoving&&(l.translateY=l._move),l.mouseMoving=!1});const C=function(){let c=0;l.moveY<0?c=l.translateY+Math.abs(l.moveY):l.moveY>=0&&(c=l.translateY-Math.abs(l.moveY)),c<0&&(c=0),c>l.maxScrollBarRange&&(c=l.maxScrollBarRange),l._move=c,a.value.style.transform=`translateY(${c}px)`,u.value.scrollTop=Math.abs(l.scrollBoxMovePropor*c)};return()=>{var c,y;return t.withDirectives(t.createVNode("div",{class:[oe(M())]},[t.createVNode("div",{class:M("left"),ref:u,onScroll:h},[t.createVNode("div",{ref:p},[(y=(c=o.slots).default)==null?void 0:y.call(c)])]),V.value?t.createVNode("div",{ref:a,class:M("right"),style:{height:l.scrollBarHeight+"px"},onmousedown:b},null):""]),[[t.resolveDirective("css"),Object.assign(n.dynamicCss||{},{})]])}}});const{n:ne,classes:re}=k("time-picker");var ie=t.defineComponent({name:"VITimePicker",emits:["click","inputClick","closeClick","cancelClick","okClick","update:modelValue"],directives:{css:N},props:H,components:[A,O,B],setup(n,o){const u=[null,null,null];let a="";const p=e=>e<10?"0"+e:e+"",l=()=>"xxxxxxxx".replace(/[xy]/g,function(e){var i=0|16*Math.random(),s=e=="x"?i:8|3&i;return s.toString(16)}),V=t.ref();let h=t.ref(),b=t.ref(),S=t.ref();const r=t.reactive({uuid:l(),popperVisible:!1,softFocus:!1,isSubmit:!1,hourList:[],minuteList:[],secondList:[],currentSelect:["","",""]}),C=e=>h=e,c=e=>b=e,y=e=>S=e,T=function(){r.popperVisible=!1,r.softFocus=!1},_=function(e){let i=!1;for(let s=0;s<e.path.length;s++){let d=e.path[s];if(d.classList&&d.classList.value&&d.getAttribute("class").includes("-time-picker")&&d.dataset.id==r.uuid){i=!0;break}}i||(T(),r.isSubmit=!0)};document.addEventListener("mousedown",_);const R=function(e){},v=function(e){},m=function(){o.emit&&o.emit("click")},le=function(e){r.popperVisible=!r.popperVisible,r.isSubmit=!1,n.modelValue||ge(),o.emit&&o.emit("inputClick")},ae=function(){r.popperVisible=!1,o.emit&&o.emit("closeClick")},se=function(e){let{type:i}=e.target.dataset;r.popperVisible=!1,i=="cancel"?(r.isSubmit=!1,o.emit&&o.emit("update:modelValue",a),o.emit&&o.emit("cancelClick"),be()):i=="ok"&&(r.isSubmit=!0,o.emit&&o.emit("okClick",r.currentSelect))},P=function(e,i){const s={index:{hour:"0",minute:"1",second:"2"},ref:{hour:h,minute:b,second:S}};let{num:d,disabled:f}=i.dataset;if(d){if(f=="true")return;r.currentSelect[s.index[e]]=d;let J=r.currentSelect[s.index[e]]*g.value["popper-spinner-number-height"]*1;s.ref[e].value.scrollTop=J}},ce=function(e){P("hour",e.target)},ue=function(e){P("minute",e.target)},pe=function(e){P("second",e.target)},I=function(e,i){const s={timers:{hour:0,minute:1,second:2},ableRange:{hour:"disabledHours",minute:"disabledMinutes",second:"disabledSeconds"}};let d=e.scrollTop,f=Math.round(d/g.value["popper-spinner-number-height"]*1);if(n[s.ableRange[i]].filter(Se=>Se==f).length>0)return;r.currentSelect[s.timers[i]]=p(f);let Ve=f*g.value["popper-spinner-number-height"]*1;u[s.timers[i]]&&(clearTimeout(u[s.timers[i]]),u[s.timers[i]]=null),u[s.timers[i]]=setTimeout(()=>{e.scrollTop=Ve},200)},de=function(e){I(e.target,"hour")},me=function(e){I(e.target,"minute")},fe=function(e){I(e.target,"second")},he=()=>{r.hourList=new Array(24).fill(0).map((e,i)=>i<10?"0"+i:i+""),r.minuteList=new Array(60).fill(0).map((e,i)=>i<10?"0"+i:i+""),r.secondList=new Array(60).fill(0).map((e,i)=>i<10?"0"+i:i+"")},be=function(){a&&(h.value.scrollTop=a.slice(0,2)*g.value["popper-spinner-number-height"]*1,b.value.scrollTop=a.slice(3,5)*g.value["popper-spinner-number-height"]*1,S.value.scrollTop=a.slice(6,8)*g.value["popper-spinner-number-height"]*1)},ge=()=>{let e=new Date,i=e.getHours(),s=e.getMinutes(),d=e.getSeconds();r.currentSelect[0]=p(i),r.currentSelect[1]=p(s),r.currentSelect[2]=p(d),h.value.scrollTop=r.currentSelect[0]*g.value["popper-spinner-number-height"]*1,b.value.scrollTop=r.currentSelect[1]*g.value["popper-spinner-number-height"]*1,S.value.scrollTop=r.currentSelect[2]*g.value["popper-spinner-number-height"]*1,o.emit&&o.emit("update:modelValue",r.currentSelect[0]+":"+r.currentSelect[1]+":"+r.currentSelect[2])};t.onMounted(()=>{he(),a=n.modelValue});const g=t.computed(()=>Object.assign(H.dynamicCss.default(),n.dynamicCss)),ve=t.computed(()=>{let e={};for(let i in g.value)i.includes("input")&&(e[i]=g.value[i]);return e}),G=t.computed({get(){if(n.modelValue){let e=n.modelValue.split(":"),i=n.disabledHours.findIndex(f=>f==e[0])!=-1,s=n.disabledMinutes.findIndex(f=>f==e[1])!=-1,d=n.disabledSeconds.findIndex(f=>f==e[2])!=-1;(i||s||d)&&o.emit&&o.emit("update:modelValue","")}return n.modelValue},set(e){o.emit&&o.emit("update:modelValue",e)}}),we=t.computed(()=>n.clearable),L=function(e,i){const s={hour:"disabledHours",minute:"disabledMinutes",second:"disabledSeconds"};let d=!1;return n[s[e]].forEach(f=>f==i?d=!0:""),d},K=t.computed(()=>function(e){return L("hour",e)}),U=t.computed(()=>function(e){return L("minute",e)}),q=t.computed(()=>function(e){return L("second",e)});return t.watchEffect(()=>{let e=r.currentSelect[0],i=r.currentSelect[1],s=r.currentSelect[2];if(!e&&!i&&!s){o.emit&&o.emit("update:modelValue","");return}let d=e+":"+i+":"+s;o.emit&&o.emit("update:modelValue",d)}),t.watchEffect(()=>{r.isSubmit&&(a=n.modelValue,o.emit&&o.emit("update:modelValue",a))}),t.provide(D,{timePickerRef:V}),()=>t.withDirectives(t.createVNode("div",{ref:V,"data-id":r.uuid,class:[re(ne())],onClick:m},[t.createVNode(A,{placeholder:n.placeholder,modelValue:G.value,"onUpdate:modelValue":e=>G.value=e,onFocus:R,onBlur:v,onClose:ae,dynamicCss:ve.value||{},clearable:we.value,onClick:le},null),t.createVNode(O,{active:r.popperVisible},{default:()=>[t.createVNode("div",{className:"time-panel"},[t.createVNode("div",{className:"time-panel__content"},[t.createVNode(B,{onGetRef:C,className:"time-panel__spinner time-panel__popper-spinner--hour",onScroll:de},{default:()=>[t.createVNode("ul",{onClick:ce},[r.hourList.map(e=>t.createVNode("li",{"data-num":e,"data-disabled":K.value(e),class:[r.currentSelect[0]==e?"active":"",K.value(e)?"disabled":""]},[e]))])]}),t.createVNode(B,{onGetRef:c,className:"time-panel__spinner time-panel__popper-spinner--minutes",onScroll:me},{default:()=>[t.createVNode("ul",{onClick:ue},[r.minuteList.map(e=>t.createVNode("li",{"data-num":e,"data-disabled":U.value(e),class:[r.currentSelect[1]==e?"active":"",U.value(e)?"disabled":""]},[e]))])]}),t.createVNode(B,{onGetRef:y,className:"time-panel__spinner time-panel__popper-spinner--second",onScroll:fe},{default:()=>[t.createVNode("ul",{onClick:pe},[r.secondList.map(e=>t.createVNode("li",{"data-num":e,"data-disabled":q.value(e),class:[r.currentSelect[2]==e?"active":"",q.value(e)?"disabled":""]},[e]))])]})]),t.createVNode("div",{className:"time-panel__footer",onClick:se},[t.createVNode("div",{"data-type":"cancel",className:"time-panel__footer_cancel"},[t.createTextVNode("Cancel")]),t.createVNode("div",{"data-type":"ok",className:"time-panel__footer_ok"},[t.createTextVNode("OK")])])])]})]),[[t.resolveDirective("css"),g.value||{}]])}});const z=W(ie,"time-picker");w.VITimePicker=z,w.default=z,Object.defineProperties(w,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
