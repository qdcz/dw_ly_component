this.dw=this.dw||{};this.dw["uiroll-list"]=function(A,e){"use strict";const W=(t,l)=>(t.install=function(s){if(t){const c=t.name||t.__name;if(c||l){const r=l?`dw-${l}`:"dw-"+c.replace(/dw/gi,"").toLowerCase();s.component(r,t)}else console.error(t,l,!l)}},t),I=t=>Array.isArray(t);function L(t){const l=`vi-${t}`;return{n:r=>r?r.startsWith("-")?`${l}${r}`:`${l}_${r}`:l,classes:(...r)=>r.map(i=>{if(I(i)){const[d,w,p=null]=i;return d?w:p}return i})}}const F={header:{type:Array,default:[]},showHeader:{type:Boolean,default:!0},itemHeight:{type:[String],default:"40px"},showCount:{type:[Number],default:6},rollCount:{type:[Number],default:1},attractShowCount:{type:Array,default:[1,3,4]},loopTime:{type:Number,default:1e3*5e3},scrollTransition:{type:Number,default:1e3*2},tmp_scaleRule:{type:Array,default:[1.3,1]},scaleRule:{type:[Number,Array],default:[1.5,1,.8]},modelValue:{type:Array,default:[]},longTextSpeed:{type:Number,default:1e3/60},dynamicCss:{type:Object,default:()=>({"box-width":"800","th-pad-tb":"10","th-bg-color":"#0f2851","th-fo-color":"#df9418","th-fo-size":"16","th-fo-weight":"900","th-radius-lt":"8","th-radius-rt":"8","th-radius-lb":"0","th-radius-rb":"0","tr-attract-bg-color-style":"single","tr-attract-bg-color-to":"#00DEFF","tr-attract-bg-color-from":"#FFFFFF","tr-attract-bg-color-angle":"135","tr-attract-bg-color-value":"#184677","tr-attract-bg-color":"#184677","tr-un-attract-bg-color":"#04172c","td-pad-lr":"20","td-pad-tb":"0"})}},k=function(t,l){for(let[s,c]of Object.entries(l.value))t.style.setProperty("--"+s,c)},_={mounted(t,l){k(t,l)},updated(t,l){k(t,l)},install(t){t.directive("Css",this)}},{n:M}=L(""),P=(t=M())=>t+"xxxxxxxx".replace(/[xy]/g,function(l){var s=0|16*Math.random(),c=l=="x"?s:8|3&s;return c.toString(16)});class z{constructor(l=[],s=7){this.list=l,this.severalGroups=s,this.windowSliding=new Array(this.severalGroups).fill(0).map((c,r)=>r)}take(l){return this.Sliding(l),this.show()}show(){return this.windowSliding.map(l=>this.list[l])}Sliding(l){this.windowSliding=this.windowSliding.map(s=>{const c=this.list.length,r=s+l;return r<=c-1?r:r-c})}}const R=function(t){const l=t instanceof Array?[]:{};for(let s in t)l[s]=typeof t[s]=="object"?R(t[s]):t[s];return l};function q(t,l="top",s,c,r){const i=l=="top"?t.scrollTop:l=="left"?t.scrollLeft:0,d=s-i,w=performance.now();function p(){const n=performance.now()-w,h=C(n,i,d,c);l=="top"?t.scrollTop=h:l=="left"&&(t.scrollLeft=h),n<c?requestAnimationFrame(p):r&&r()}function C(f,n,h,T){return f/=T/2,f<1?h/2*f*f+n:(f--,-h/2*(f*(f-2)-1)+n)}requestAnimationFrame(p)}const{n:D}=L("scroll-text"),O=e.defineComponent({name:"ScrollText",emits:["update:text"],props:{text:{type:String,default:"这是一个默认文本"},speed:{type:Number,default:1e3/60}},setup(t,l){var h;const c="onUpdate:modelValue"in(((h=e.getCurrentInstance())==null?void 0:h.vnode.props)||{}),r=e.ref(null),i=e.ref(null),d=e.ref(null),w=e.ref(null);let p=null;const C=e.reactive({isScroll:!0}),f=e.computed({get(){return C.isScroll=!0,e.nextTick(()=>{if(r.value&&d.value){const T=r.value.clientWidth,N=d.value.offsetWidth-20;T<N?(p&&(clearInterval(p),p=null),p=setInterval(n,t.speed)):C.isScroll=!1}}),t.text+""},set(T){c&&l.emit("update:text",T)}}),n=()=>{w.value.offsetWidth-i.value.scrollLeft<=0?i.value.scrollLeft-=d.value.offsetWidth:i.value.scrollLeft++};return()=>e.createVNode("div",{class:D(""),ref:r},[e.createVNode("div",{class:D("_scroll"),ref:i},[e.createVNode("span",{ref:d},[f.value,C.isScroll?e.createVNode("span",{class:"seizeASeat"},null):""]),e.createVNode("span",{ref:w},[C.isScroll?f.value:"",C.isScroll?e.createVNode("span",{class:"seizeASeat"},null):""])])])}}),{n:x}=L("roll-list"),E=W(e.defineComponent({name:"RollList",emits:["update:modelValue"],directives:{css:_},props:F,components:{scrollText:O},setup(t,l){var H;const c="onUpdate:modelValue"in(((H=e.getCurrentInstance())==null?void 0:H.vnode.props)||{}),r=e.reactive({uuid:P(x("-")),takeFlag:!1,rotationTimer:null,getInventedListDataBridgeInit:!1}),i=e.ref(null),d=e.ref();let w=0,p=null;const C={longText:"longText"},f=o=>{o.preventDefault()},n=e.computed(()=>Object.assign(F.dynamicCss.default(),t.dynamicCss)),h=e.computed(()=>t.header),T=()=>{var o;for(let a=0;a<((o=d.value)==null?void 0:o.children.length);a++){const g=d.value.children[a],{attractShowCount:S,header:m,tmp_scaleRule:u}=t;S.includes(a)?(n.value["tr-attract-bg-color-style"]=="double"?g.style.background=`linear-gradient(${n.value["tr-attract-bg-color-angle"]}deg,${n.value["tr-attract-bg-color-from"]},${n.value["tr-attract-bg-color-to"]})`:g.style.background=n.value["tr-attract-bg-color-value"],Array.from(g.children).forEach((y,v)=>{y.style.transform=`scale(${u[0]})`,y.style.flexBasis=m[v].basis+"%"})):(g.style.background=n.value["tr-un-attract-bg-color"],Array.from(g.children).forEach((y,v)=>{y.style.transform=`scale(${u[1]})`,y.style.flexBasis=m[v].basis+"%"}))}},N=e.computed({get(){return p=new z(R(t.modelValue),t.showCount*2),e.nextTick(()=>{T()}),t.modelValue},set(o){c&&l.emit("update:modelValue",o)}}),U=e.computed(()=>{if(r.takeFlag=!r.takeFlag,t.modelValue.length>t.showCount){const o=r.getInventedListDataBridgeInit?t.rollCount:(r.getInventedListDataBridgeInit=!0)&&0;return p.take(o)}else return new Array(t.modelValue.length).fill(0).map((o,a)=>N.value[a])}),G=e.computed(()=>{let o=N.value.length;const a=Number(t.itemHeight.replace("px","")),g=o<=t.showCount?o:t.showCount;return a*g+"px"});e.watchEffect(()=>{r.rotationTimer&&(clearInterval(r.rotationTimer),r.rotationTimer=null),r.rotationTimer=N.value.length>t.showCount&&setInterval(()=>{j()},t.loopTime)});const j=()=>{var S;const o=i==null?void 0:i.value,a=t.rollCount<=t.showCount?t.rollCount:t.showCount,g=o.scrollHeight-o.clientHeight;w=w+g/t.showCount*a;for(let m=0;m<((S=d.value)==null?void 0:S.children.length);m++){const u=d.value.children[m],{rollCount:y,attractShowCount:v,scrollTransition:V,header:$}=t;u.style.transition=`${V/1e3}s`,v.map(b=>b+y).includes(m)?(n.value["tr-attract-bg-color-style"]=="double"?u.style.background=`linear-gradient(${n.value["tr-attract-bg-color-angle"]}deg,${n.value["tr-attract-bg-color-from"]},${n.value["tr-attract-bg-color-to"]})`:u.style.background=n.value["tr-attract-bg-color-value"],Array.from(u.children).forEach((b,B)=>{b.style.transition=`${V/1e3}s`,b.style.flexBasis=$[B].basis+"%",b.style.transform=`scale(${t.tmp_scaleRule[0]})`})):(u.style.background=n.value["tr-un-attract-bg-color"],Array.from(u.children).forEach((b,B)=>{b.style.transition=`${V/1e3}s`,b.style.flexBasis=$[B].basis+"%",b.style.transform=`scale(${t.tmp_scaleRule[1]})`}))}q(o,"top",w,t.scrollTransition,()=>{var m;for(let u=0;u<((m=d.value)==null?void 0:m.children.length);u++){const y=d.value.children[u];y.style.transition="0s",Array.from(y.children).forEach(v=>{v.style.transition="0s"})}r.takeFlag=!r.takeFlag,o.scrollTop=0,w=0,T()})};e.nextTick(()=>{});const Q=()=>t.showHeader?e.createVNode("div",{class:x("_th")},[h.value.map(o=>e.createVNode("div",{class:x("_td"),style:{flexBasis:o.basis+"%"}},[o.label]))]):"";return()=>e.withDirectives(e.createVNode("div",{class:x()},[Q(),e.createVNode("div",{ref:i,onWheel:f,class:x("_scroll"),style:{height:G.value}},[e.createVNode("ul",{ref:d,class:x("_wrapper")},[U.value.map(o=>e.createVNode("li",{style:{height:t.itemHeight}},[t.header.map((a,g)=>{var S,m,u,y,v,V,$,b;return e.createVNode("div",{class:[x("_td")]},[e.createVNode("div",{class:[C[(S=h.value[g])==null?void 0:S.type]],style:{color:o[a.prop]?(m=a.fo)==null?void 0:m.color:"none",fontSize:o[a.prop]?((u=a.fo)==null?void 0:u.size)+"px":"auto",fontWeight:o[a.prop]?(y=a.fo)==null?void 0:y.weight:"0",fontFamily:o[a.prop]?(v=a.fo)==null?void 0:v.style:"none"}},[(V=h.value[g])!=null&&V.type&&(($=h.value[g])==null?void 0:$.type)=="longText"?e.createVNode(e.resolveComponent("scrollText"),{text:o[a.prop]||"undefined",speed:o[a.prop]?(b=a.longText)==null?void 0:b.speed:!1},null):o[a.prop]||"undefined"])])})]))])])]),[[e.resolveDirective("css"),n.value||{}]])}}),"roll-list");return A.RollList=E,A.default=E,Object.defineProperties(A,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),A}({},Vue);
