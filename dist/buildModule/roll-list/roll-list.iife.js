this.dw=this.dw||{};this.dw["uiroll-list"]=function(T,r){"use strict";const H=(t,e)=>(t.install=function(l){if(t){const a=t.name||t.__name;if(a||e){const n=e?`dw-${e}`:"dw-"+a.replace(/dw/gi,"").toLowerCase();l.component(n,t)}else console.error(t,e,!e)}},t),W=t=>Array.isArray(t);function N(t){const e=`vi-${t}`;return{n:n=>n?n.startsWith("-")?`${e}${n}`:`${e}_${n}`:e,classes:(...n)=>n.map(d=>{if(W(d)){const[u,f,g=null]=d;return u?f:g}return d})}}const B={header:{type:Array,default:[]},itemHeight:{type:[String],default:"40px"},showCount:{type:[Number],default:6},rollCount:{type:[Number],default:1},attractShowCount:{type:Array,default:[1,3,4]},loopTime:{type:Number,default:1e3*300},scrollTransition:{type:Number,default:1e3*2},tmp_scaleRule:{type:Array,default:[1.3,.8]},scaleRule:{type:[Number,Array],default:[1.5,1,.8]},modelValue:{type:Array,default:[]},dynamicCss:{type:Object,default:()=>({"box-width":"800","box-pad-lr":"10","th-pad-tb":"10","th-bg-color":"#0f2851","th-fo-color":"#df9418","th-fo-size":"16","th-fo-weight":"900","tr-attract-bg-color":"#184677","tr-un-attract-bg-color":"#04172c","td-pad-lr":"0","td-pad-tb":"0"})}},E=function(t,e){for(let[l,a]of Object.entries(e.value))t.style.setProperty("--"+l,a)},M={mounted(t,e){E(t,e)},updated(t,e){E(t,e)},install(t){t.directive("Css",this)}},{n:R}=N(""),q=(t=R())=>t+"xxxxxxxx".replace(/[xy]/g,function(e){var l=0|16*Math.random(),a=e=="x"?l:8|3&l;return a.toString(16)});class P{constructor(e=[],l=7){this.list=e,this.severalGroups=l,this.windowSliding=new Array(this.severalGroups).fill(0).map((a,n)=>n)}take(e){return this.Sliding(e),this.show()}show(){return this.windowSliding.map(e=>this.list[e])}Sliding(e){this.windowSliding=this.windowSliding.map(l=>{const a=this.list.length,n=l+e;return n<=a-1?n:n-a})}}const $=function(t){const e=t instanceof Array?[]:{};for(let l in t)e[l]=typeof t[l]=="object"?$(t[l]):t[l];return e};function _(t,e,l,a){const n=t.scrollTop,d=e-n,u=performance.now();function f(){const C=performance.now()-u,y=g(C,n,d,l);t.scrollTop=y,C<l?requestAnimationFrame(f):a&&a()}function g(m,C,y,S){return m/=S/2,m<1?y/2*m*m+C:(m--,-y/2*(m*(m-2)-1)+C)}requestAnimationFrame(f)}const O=r.defineComponent({name:"ScrollText",props:{text:{type:String,required:!0},speed:{type:Number,default:50}},setup(t){const e=r.ref(null),l=r.ref(null),a=r.ref(null);let n=null,d=!1;const u=()=>{const m=l.value.scrollLeft;d||m+e.value.clientWidth>=l.value.scrollWidth||(l.value.scrollLeft+=1,n=requestAnimationFrame(u))},f=()=>{l.value.scrollWidth<=e.value.clientWidth||(n=requestAnimationFrame(u))},g=()=>{d=!0,n!==null&&(cancelAnimationFrame(n),n=null)};return r.onMounted(()=>{f(),e.value.addEventListener("mouseenter",g),e.value.addEventListener("mouseleave",f)}),r.onUnmounted(()=>{g(),e.value.removeEventListener("mouseenter",g),e.value.removeEventListener("mouseleave",f)}),{container:e,content:l,text:a}},render(){return r.createVNode("div",{class:"scroll-text-container",ref:"container"},[r.createVNode("div",{class:"scroll-text-content",ref:"content"},[r.createVNode("div",{class:"scroll-text",ref:"text",style:{whiteSpace:"nowrap"}},[r.createTextVNode("464654")])])])}}),{n:v}=N("roll-list"),k=H(r.defineComponent({name:"RollList",emits:["update:modelValue"],directives:{css:M},props:B,components:{scrollText:O},setup(t,e){var I;const a="onUpdate:modelValue"in(((I=r.getCurrentInstance())==null?void 0:I.vnode.props)||{}),n=r.reactive({uuid:q(v("-")),takeFlag:!1,rotationTimer:null,getInventedListDataBridgeInit:!1}),d=r.ref(null),u=r.ref();let f=0,g=null;const m={longText:"longText"},C=o=>{o.preventDefault()},y=r.computed(()=>Object.assign(B.dynamicCss.default(),t.dynamicCss)),S=r.computed(()=>t.header),V=r.computed({get(){return g=new P($(t.modelValue),t.showCount*2),t.modelValue},set(o){a&&e.emit("update:modelValue",o)}}),z=r.computed(()=>{if(n.takeFlag=!n.takeFlag,t.modelValue.length>t.showCount){const o=n.getInventedListDataBridgeInit?t.rollCount:(n.getInventedListDataBridgeInit=!0)&&0;return g.take(o)}else return new Array(t.modelValue.length).fill(0).map((o,s)=>V.value[s])});r.watchEffect(()=>{n.rotationTimer&&(clearInterval(n.rotationTimer),n.rotationTimer=null),n.rotationTimer=V.value.length>t.showCount&&setInterval(()=>{G()},t.loopTime)});const U=r.computed(()=>{let o=V.value.length;const s=Number(t.itemHeight.replace("px","")),p=o<=t.showCount?o:t.showCount;return s*p+"px"}),F=()=>{var o;for(let s=0;s<((o=u.value)==null?void 0:o.children.length);s++){const p=u.value.children[s],{attractShowCount:b,header:h,tmp_scaleRule:i}=t;b.includes(s)?(p.style.background=y.value["tr-attract-bg-color"],Array.from(p.children).forEach((c,x)=>{c.style.transform=`scale(${i[0]})`,c.style.flexBasis=h[x].basis+"%",console.log(66666666,c.style.flexBasis)})):(p.style.background=y.value["tr-un-attract-bg-color"],Array.from(p.children).forEach((c,x)=>{c.style.transform=`scale(${i[1]})`,c.style.flexBasis=h[x].basis+"%",console.log(66666666,c.style.flexBasis)}))}},G=()=>{var b;const o=d==null?void 0:d.value,s=t.rollCount<=t.showCount?t.rollCount:t.showCount,p=o.scrollHeight-o.clientHeight;f=f+p/t.showCount*s;for(let h=0;h<((b=u.value)==null?void 0:b.children.length);h++){const i=u.value.children[h],{rollCount:c,attractShowCount:x,scrollTransition:A,header:D}=t;i.style.transition=`${A/1e3}s`,x.map(w=>w+c).includes(h)?(i.style.background=y.value["tr-attract-bg-color"],Array.from(i.children).forEach((w,L)=>{w.style.transition=`${A/1e3}s`,w.style.flexBasis=D[L].basis+"%",w.style.transform=`scale(${t.tmp_scaleRule[0]})`})):(i.style.background=y.value["tr-un-attract-bg-color"],Array.from(i.children).forEach((w,L)=>{w.style.transition=`${A/1e3}s`,w.style.flexBasis=D[L].basis+"%",w.style.transform=`scale(${t.tmp_scaleRule[1]})`}))}_(o,f,t.scrollTransition,()=>{var h;for(let i=0;i<((h=u.value)==null?void 0:h.children.length);i++){const c=u.value.children[i];c.style.transition="0s",Array.from(c.children).forEach(x=>{x.style.transition="0s"})}n.takeFlag=!n.takeFlag,o.scrollTop=0,f=0,F()})};return r.nextTick(()=>{F()}),()=>r.withDirectives(r.createVNode("div",{class:v()},[r.createVNode("div",{class:v("_th")},[S.value.map(o=>r.createVNode("div",{class:v("_td"),style:{flexBasis:o.basis+"%"}},[o.label]))]),r.createVNode("div",{ref:d,onWheel:C,class:v("_scroll"),style:{height:U.value}},[r.createVNode("ul",{ref:u,class:v("_wrapper")},[z.value.map(o=>r.createVNode("li",{style:{height:t.itemHeight}},[t.header.map((s,p)=>{var b,h,i,c;return r.createVNode("div",{class:[v("_td")]},[r.createVNode("div",{class:[m[(b=S.value[p])==null?void 0:b.type]],style:{color:o[s.prop]?(h=s.fo)==null?void 0:h.color:"none",fontSize:o[s.prop]?((i=s.fo)==null?void 0:i.size)+"px":"auto",fontWeight:o[s.prop]?(c=s.fo)==null?void 0:c.weight:"0"}},[o[s.prop]||"undefined"])])})]))])])]),[[r.resolveDirective("css"),y.value||{}]])}}),"roll-list");return T.RollList=k,T.default=k,Object.defineProperties(T,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),T}({},Vue);
