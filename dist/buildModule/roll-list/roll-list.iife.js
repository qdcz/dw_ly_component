this.dw=this.dw||{};this.dw["uiroll-list"]=function(F,t){"use strict";const X=(e,l)=>(e.install=function(i){if(e){const c=e.name||e.__name;if(c||l){const r=l?`dw-${l}`:"dw-"+c.replace(/dw/gi,"").toLowerCase();i.component(r,e)}else console.error(e,l,!l)}},e),Y=e=>Array.isArray(e);function M(e){const l=`vi-${e}`;return{n:r=>r?r.startsWith("-")?`${l}${r}`:`${l}_${r}`:l,classes:(...r)=>r.map(u=>{if(Y(u)){const[d,p,g=null]=u;return d?p:g}return u})}}var B=(e=>(e.AUTHROLL="autoRoll",e.HANDMOVE="handRoll",e))(B||{});const G={header:{type:Array,default:[]},showHeader:{type:Boolean,default:!0},itemHeight:{type:[String],default:"40px"},showCount:{type:[Number],default:8},rollCount:{type:[Number],default:1},attractShowCount:{type:Array,default:[3,4]},rollType:{type:String,default:"autoRoll",validator:function(e){return Object.values(B).includes(e)}},loopTime:{type:Number,default:1e3*2},scrollTransition:{type:Number,default:1e3*.8},tmp_scaleRule:{type:Array,default:[1.3,1]},scaleRule:{type:[Number,Array],default:[1.5,1,.8]},modelValue:{type:Array,default:[]},dynamicCss:{type:Object,default:()=>({"box-wid":"800","pin-hei":"80","pin-radius":"4","pin-dire-b":"120","pin-bg-color-style":"double","pin-bg-color-to":"#00DEFF","pin-bg-color-from":"#FFFFFF","pin-bg-color-angle":"135","pin-bg-color-value":"#49a3cb","th-pad-tb":"10","th-bg-color":"rgb(179, 210, 224)","th-fo-color":"rgb(90, 99, 110)","th-fo-size":"16","th-fo-weight":"900","th-radius-lt":"8","th-radius-rt":"8","th-radius-lb":"0","th-radius-rb":"0","tr-hover-bg-color":"rgb(132 176 212 / 80%)","tr-hover-transition":"0.3","tr-focus-bg-color-style":"single","tr-focus-bg-color-to":"#00DEFF","tr-focus-bg-color-from":"#FFFFFF","tr-focus-bg-color-angle":"135","tr-focus-bg-color-value":"rgb(211, 228, 242)","tr-un-focus-bg-color":"rgb(235, 235, 235)","td-pad-lr":"20","td-pad-tb":"0","longText-txt-gap":"30","longText-sco-ani-name":"longTextScrollAnimation","longText-sco-ani-dura":"15"})}},O=function(e,l){for(let[i,c]of Object.entries(l.value))e.style.setProperty("--"+i,c)},U={mounted(e,l){O(e,l)},updated(e,l){O(e,l)},install(e){e.directive("Css",this)}},{n:Z}=M(""),D=(e=Z())=>e+"xxxxxxxx".replace(/[xy]/g,function(l){var i=0|16*Math.random(),c=l=="x"?i:8|3&i;return c.toString(16)});class ee{constructor(l=[],i=7){this.list=l,this.severalGroups=i,this.windowSliding=new Array(this.severalGroups).fill(0).map((c,r)=>r)}take(l){return this.Sliding(l),this.show()}show(){return this.windowSliding.map(l=>this.list[l])}Sliding(l){this.windowSliding=this.windowSliding.map(i=>{const c=this.list.length,r=i+l;return r<=c-1?r:r-c})}}const R=function(e){const l=e instanceof Array?[]:{};for(let i in e)l[i]=typeof e[i]=="object"?R(e[i]):e[i];return l};function te(e,l="top",i,c,r){const u=l=="top"?e.scrollTop:l=="left"?e.scrollLeft:0,d=i-u,p=performance.now();function g(){const x=performance.now()-p,s=S(x,u,d,c);l=="top"?e.scrollTop=s:l=="left"&&(e.scrollLeft=s),x<c?requestAnimationFrame(g):r&&r()}function S(f,x,s,L){return f/=L/2,f<1?s/2*f*f+x:(f--,-s/2*(f*(f-2)-1)+x)}requestAnimationFrame(g)}function H(){let e=new Date().getTime();return typeof performance<"u"&&typeof performance.now=="function"&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const c=(e+Math.random()*16)%16|0;return e=Math.floor(e/16),(i==="x"?c:c&3|8).toString(16)})}function oe(e){const l={};return e.map(i=>{const{__id:c,...r}=i,u=JSON.stringify(r);if(!l[u])return l[u]=!0,i;const d=H();return{...i,__id:d}})}const{n:W}=M("long-text"),P={text:{type:String,default:"这是一个默认文本"},speed:{type:Number,default:1e3},dynamicCss:{type:Object,default:()=>({"txt-gap":"22","sco-ani-name":"longTextScrollAnimation","sco-ani-dura":"10"})}},q=t.defineComponent({name:"LongText",emits:["update:text"],props:P,directives:{css:U},setup(e,l){var x;const c="onUpdate:modelValue"in(((x=t.getCurrentInstance())==null?void 0:x.vnode.props)||{}),r=t.ref(null),u=t.ref(null),d=t.ref(null),p=t.ref(null),g=t.reactive({isScroll:!0,toolTip_x:0,toolTip_y:0,toolTip_content:"盎司附近拉萨解放了卡JFK垃圾地方"}),S=t.computed(()=>Object.assign(P.dynamicCss.default(),e.dynamicCss)),f=t.computed({get(){return g.isScroll=!0,e.text},set(s){c&&l.emit("update:text",s)}});return t.onMounted(()=>{t.watchEffect(()=>{t.nextTick(()=>{const s=r.value.clientWidth,_=d.value.offsetWidth;s>=_&&(g.isScroll=!1)})})}),()=>t.withDirectives(t.createVNode("div",{class:[W(""),"tooltip"],"data-tooltip":"这是一个 tooltip",ref:r},[t.createVNode("div",{class:W("_scroll"),ref:u},[t.createVNode("span",{ref:d,class:g.isScroll?"startAnimation":""},[f.value]),g.isScroll?t.createVNode("span",null,[t.createVNode("span",{class:"seizeASeat"},null),t.createVNode("span",{ref:p,class:"startAnimation"},[f.value]),t.createVNode("span",{class:"seizeASeat"},null)]):""])]),[[t.resolveDirective("css"),S.value||{}]])}}),{n:v}=M("roll-list"),E=X(t.defineComponent({name:"RollList",emits:["update:modelValue","rowClick"],directives:{css:U},props:G,components:{LongText:q},setup(e,l){var J;const c="onUpdate:modelValue"in(((J=t.getCurrentInstance())==null?void 0:J.vnode.props)||{}),r=t.reactive({uuid:D(v("-")),takeFlag:!1,rotationTimer:null,getInventedListDataBridgeInit:!1}),u=t.ref(null),d=t.ref();let p=0,g=!1,S=null;const f={longText:"longText"},x=n=>{n.preventDefault()},s=t.computed(()=>Object.assign(G.dynamicCss.default(),e.dynamicCss)),L=t.computed(()=>{let n={};for(let o in s.value)o.includes("longText")&&(n[o.replace("longText-","")]=s.value[o]);return n}),_=t.computed(()=>e.header),j=()=>{var n;for(let o=0;o<((n=d.value)==null?void 0:n.children.length);o++){const a=d.value.children[o],{attractShowCount:m,header:y,tmp_scaleRule:b}=e;if(m.includes(o))if(s.value["tr-focus-bg-color-style"]=="double"){const w=s.value["tr-focus-bg-color-angle"],C=s.value["tr-focus-bg-color-from"],h=s.value["tr-focus-bg-color-to"];a.style.background=`linear-gradient(${w}deg,${C},${h})`}else a.style.background=s.value["tr-focus-bg-color-value"];else a.style.background=s.value["tr-un-focus-bg-color"];Array.from(a.children).forEach((T,w)=>{T.style.flexBasis=y[w].basis+"%",m.includes(o)?T.style.transform=`scale(${b[0]})`:T.style.transform=`scale(${b[1]})`})}},A=()=>{if(r.rotationTimer&&(clearInterval(r.rotationTimer),r.rotationTimer=null),e.rollType==B.AUTHROLL){if(g)return;r.rotationTimer=k.value.length>e.showCount&&setInterval(()=>{t.nextTick(()=>{re()})},e.loopTime)}},k=t.computed({get(){const n=e.modelValue.map((o,a)=>(o.__id=H(),o.__uniqueness=H(),o));return S=new ee(R(n),e.showCount*2),t.nextTick(()=>{j()}),n},set(n){c&&l.emit("update:modelValue",n)}}),ne=t.computed(()=>{if(r.takeFlag=!r.takeFlag,e.modelValue.length>e.showCount){const n=r.getInventedListDataBridgeInit?e.rollCount:(r.getInventedListDataBridgeInit=!0)&&0;return oe(S.take(n))}else return new Array(e.modelValue.length).fill(0).map((n,o)=>k.value[o])}),le=t.computed(()=>{let n=k.value.length;const o=Number(e.itemHeight.replace("px","")),a=n<=e.showCount?n:e.showCount;return o*a+"px"});t.onMounted(()=>{A(),t.watch(()=>e.rollType,()=>A()),t.watch(()=>e.loopTime,()=>A()),t.watch(()=>k.value,()=>{A()})}),t.onUnmounted(()=>{});const re=()=>{var m;const n=u==null?void 0:u.value,o=e.rollCount<=e.showCount?e.rollCount:e.showCount,a=n.scrollHeight-n.clientHeight;p=p+a/e.showCount*o;for(let y=0;y<((m=d.value)==null?void 0:m.children.length);y++){const b=d.value.children[y],{attractShowCount:N,header:T,tmp_scaleRule:w}=e,C=N.map(h=>h+o).includes(y);if(C)if(s.value["tr-focus-bg-color-style"]=="double"){const V=s.value["tr-focus-bg-color-angle"],$=s.value["tr-focus-bg-color-from"],I=s.value["tr-focus-bg-color-to"];b.style.background=`linear-gradient(${V}deg,${$},${I})`}else b.style.background=s.value["tr-focus-bg-color-value"];else b.style.background=s.value["tr-un-focus-bg-color"];Array.from(b.children).forEach((h,V)=>{h.style.flexBasis=T[V].basis+"%",C?h.style.transform=`scale(${w[0]})`:h.style.transform=`scale(${w[1]})`})}te(n,"top",p,e.scrollTransition,()=>{r.takeFlag=!r.takeFlag,n.scrollTop=0,p=0,t.nextTick(()=>{j()})})},z=()=>{g=!0,r.rotationTimer&&(clearInterval(r.rotationTimer),r.rotationTimer=null)},se=()=>{g=!1,A()},ie=function(n){l.emit&&l.emit("rowClick",n)};t.onUnmounted(()=>{z(),r.rotationTimer=null});const ce=()=>{if(!s.value["pin-bg-color-style"])return"";let n="none";if(s.value["pin-bg-color-style"]=="double"){const a=s.value["pin-bg-color-angle"],m=s.value["pin-bg-color-from"],y=s.value["pin-bg-color-to"];n=`linear-gradient(${a}deg,${m},${y})`}else n=s.value["pin-bg-color-value"];return t.createVNode("div",{class:v("_pinSth"),style:{background:n}},null)},ae=()=>e.showHeader?t.createVNode("div",{class:v("_th")},[_.value.map(n=>t.createVNode("div",{class:v("_td"),style:{flexBasis:n.basis+"%"}},[n.label]))]):"",ue=()=>t.createVNode("div",{ref:u,onWheel:x,class:v("_scroll"),style:{height:le.value}},[t.createVNode("ul",{ref:d,class:v("_wrapper")},[ne.value.map(n=>de(n))])]),de=n=>t.createVNode("li",{key:n.__id,style:{height:e.itemHeight},onClick:ie.bind(this,n)},[e.header.map((o,a)=>ge(n,o,a))]),ge=(n,o,a)=>{var y,b,N,T,w,C,h,V,$,I,K,Q;let m={};return o.longText&&((y=o==null?void 0:o.longText)!=null&&y.speed&&(m["sco-ani-dura"]=o.longText.speed),(b=o.longText)!=null&&b.GPUSpee&&(m["sco-ani-name"]=((N=o==null?void 0:o.longText)==null?void 0:N.GPUSpee)==!0?"longTextScrollxAnimation3d":"longTextScrollxAnimation"),((T=o.longText)!=null&&T.txtGap||Number(o.longText.txtGap)==0)&&(m["txt-gap"]=o.longText.txtGap)),t.createVNode("div",{class:[v("_td")]},[t.createVNode("div",{class:[f[(w=_.value[a])==null?void 0:w.type]],style:{color:n[o.prop]?(C=o.fo)==null?void 0:C.color:"none",fontSize:n[o.prop]?((h=o.fo)==null?void 0:h.size)+"px":"auto",fontWeight:n[o.prop]?(V=o.fo)==null?void 0:V.weight:"0",fontFamily:n[o.prop]?($=o.fo)==null?void 0:$.style:"none"}},[(I=_.value[a])!=null&&I.type&&((K=_.value[a])==null?void 0:K.type)=="longText"?t.createVNode(q,{style:{padding:"0 1px"},text:n[o.prop]||"undefined",speed:n[o.prop]?(Q=o.longText)==null?void 0:Q.speed:!1,dynamicCss:Object.assign(R(L.value),m)},null):n[o.prop]||"undefined"])])};return()=>t.withDirectives(t.createVNode("div",{class:v(),onMouseenter:z,onMouseleave:se},[ce(),ae(),ue()]),[[t.resolveDirective("css"),s.value||{}]])}}),"roll-list");return F.RollList=E,F.default=E,Object.defineProperties(F,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),F}({},Vue);
