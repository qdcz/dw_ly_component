this.dw=this.dw||{};this.dw["uiroll-list"]=function(F,e){"use strict";const nt=(t,n)=>(t.install=function(i){if(t){const c=t.name||t.__name;if(c||n){const r=n?`dw-${n}`:"dw-"+c.replace(/dw/gi,"").toLowerCase();i.component(r,t)}else console.error(t,n,!n)}},t),lt=t=>Array.isArray(t);function M(t){const n=`vi-${t}`;return{n:r=>r?r.startsWith("-")?`${n}${r}`:`${n}_${r}`:n,classes:(...r)=>r.map(u=>{if(lt(u)){const[f,y,g=null]=u;return f?y:g}return u})}}var B=(t=>(t.AUTHROLL="autoRoll",t.HANDMOVE="handRoll",t))(B||{});const G={header:{type:Array,default:[]},showHeader:{type:Boolean,default:!0},itemHeight:{type:[String],default:"40px"},showCount:{type:[Number],default:8},rollCount:{type:[Number],default:1},attractShowCount:{type:Array,default:[3,4]},rollType:{type:String,default:"autoRoll",validator:function(t){return Object.values(B).includes(t)}},loopTime:{type:Number,default:1e3*2},scrollTransition:{type:Number,default:1e3*.8},tmp_scaleRule:{type:Array,default:[1.3,1]},scaleRule:{type:[Number,Array],default:[1.5,1,.8]},modelValue:{type:Array,default:[]},dynamicCss:{type:Object,default:()=>({"box-wid":"800","pin-hei":"80","pin-radius":"4","pin-dire-b":"120","pin-bg-color-style":"double","pin-bg-color-to":"#00DEFF","pin-bg-color-from":"#FFFFFF","pin-bg-color-angle":"135","pin-bg-color-value":"#49a3cb","th-pad-tb":"10","th-bg-color":"rgb(179, 210, 224)","th-fo-color":"rgb(90, 99, 110)","th-fo-size":"16","th-fo-weight":"900","th-radius-lt":"8","th-radius-rt":"8","th-radius-lb":"0","th-radius-rb":"0","tr-hover-bg-color":"rgb(132 176 212 / 80%)","tr-hover-transition":"0.3","tr-focus-bg-color-style":"single","tr-focus-bg-color-to":"#00DEFF","tr-focus-bg-color-from":"#FFFFFF","tr-focus-bg-color-angle":"135","tr-focus-bg-color-value":"rgb(211, 228, 242)","tr-un-focus-bg-color":"rgb(235, 235, 235)","td-pad-lr":"20","td-pad-tb":"0","td-txt-align":"center","longText-txt-gap":"30","longText-sco-ani-name":"longTextScrollAnimation","longText-sco-ani-dura":"15"})}},O=function(t,n){for(let[i,c]of Object.entries(n.value))t.style.setProperty("--"+i,c)},U={mounted(t,n){O(t,n)},updated(t,n){O(t,n)},install(t){t.directive("Css",this)}},{n:rt}=M(""),st=(t=rt())=>t+"xxxxxxxx".replace(/[xy]/g,function(n){var i=0|16*Math.random(),c=n=="x"?i:8|3&i;return c.toString(16)});class it{constructor(n=[],i=7){this.list=n,this.severalGroups=i,this.windowSliding=new Array(this.severalGroups).fill(0).map((c,r)=>r)}take(n){return this.Sliding(n),this.show()}show(){return this.windowSliding.map(n=>this.list[n])}Sliding(n){this.windowSliding=this.windowSliding.map(i=>{const c=this.list.length,r=i+n;return r<=c-1?r:r-c})}}const R=function(t){const n=t instanceof Array?[]:{};for(let i in t)n[i]=typeof t[i]=="object"?R(t[i]):t[i];return n};function ct(t,n="top",i,c,r){const u=n=="top"?t.scrollTop:n=="left"?t.scrollLeft:0,f=i-u,y=performance.now();function g(){const h=performance.now()-y,s=S(h,u,f,c);n=="top"?t.scrollTop=s:n=="left"&&(t.scrollLeft=s),h<c?requestAnimationFrame(g):r&&r()}function S(m,h,s,L){return m/=L/2,m<1?s/2*m*m+h:(m--,-s/2*(m*(m-2)-1)+h)}requestAnimationFrame(g)}function H(){let t=new Date().getTime();return typeof performance<"u"&&typeof performance.now=="function"&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const c=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(i==="x"?c:c&3|8).toString(16)})}function at(t){const n={};return t.map(i=>{const{__id:c,...r}=i,u=JSON.stringify(r);if(!n[u])return n[u]=!0,i;const f=H();return{...i,__id:f}})}const{n:W}=M("long-text"),P={text:{type:String,default:"这是一个默认文本"},speed:{type:Number,default:1e3},dynamicCss:{type:Object,default:()=>({"txt-gap":"22","sco-ani-name":"longTextScrollAnimation","sco-ani-dura":"10"})}},q=e.defineComponent({name:"LongText",emits:["update:text"],props:P,directives:{css:U},setup(t,n){var h;const c="onUpdate:modelValue"in(((h=e.getCurrentInstance())==null?void 0:h.vnode.props)||{}),r=e.ref(null),u=e.ref(null),f=e.ref(null),y=e.ref(null),g=e.reactive({isScroll:!0,toolTip_x:0,toolTip_y:0,toolTip_content:"盎司附近拉萨解放了卡JFK垃圾地方"}),S=e.computed(()=>Object.assign(P.dynamicCss.default(),t.dynamicCss)),m=e.computed({get(){return g.isScroll=!0,t.text},set(s){c&&n.emit("update:text",s)}});return e.onMounted(()=>{e.watchEffect(()=>{e.nextTick(()=>{const s=r.value.clientWidth,_=f.value.offsetWidth;s>=_&&(g.isScroll=!1)})})}),()=>e.withDirectives(e.createVNode("div",{class:[W(""),"tooltip"],"data-tooltip":"这是一个 tooltip",ref:r},[e.createVNode("div",{class:W("_scroll"),ref:u},[e.createVNode("span",{ref:f,class:g.isScroll?"startAnimation":""},[m.value]),g.isScroll?e.createVNode("span",null,[e.createVNode("span",{class:"seizeASeat"},null),e.createVNode("span",{ref:y,class:"startAnimation"},[m.value]),e.createVNode("span",{class:"seizeASeat"},null)]):""])]),[[e.resolveDirective("css"),S.value||{}]])}}),{n:v}=M("roll-list"),E=nt(e.defineComponent({name:"RollList",emits:["update:modelValue","rowClick"],directives:{css:U},props:G,components:{LongText:q},setup(t,n){var J;const c="onUpdate:modelValue"in(((J=e.getCurrentInstance())==null?void 0:J.vnode.props)||{}),r=e.reactive({uuid:st(v("-")),takeFlag:!1,rotationTimer:null,getInventedListDataBridgeInit:!1}),u=e.ref(null),f=e.ref();let y=0,g=!1,S=null;const m={longText:"longText"},h=l=>{l.preventDefault()},s=e.computed(()=>Object.assign(G.dynamicCss.default(),t.dynamicCss)),L=e.computed(()=>{let l={};for(let o in s.value)o.includes("longText")&&(l[o.replace("longText-","")]=s.value[o]);return l}),_=e.computed(()=>t.header),z=()=>{var l;for(let o=0;o<((l=f.value)==null?void 0:l.children.length);o++){const a=f.value.children[o],{attractShowCount:p,header:d,tmp_scaleRule:b}=t;if(p.includes(o))if(s.value["tr-focus-bg-color-style"]=="double"){const w=s.value["tr-focus-bg-color-angle"],C=s.value["tr-focus-bg-color-from"],x=s.value["tr-focus-bg-color-to"];a.style.background=`linear-gradient(${w}deg,${C},${x})`}else a.style.background=s.value["tr-focus-bg-color-value"];else a.style.background=s.value["tr-un-focus-bg-color"];Array.from(a.children).forEach((T,w)=>{T.style.flexBasis=d[w].basis+"%",p.includes(o)?T.style.transform=`scale(${b[0]})`:T.style.transform=`scale(${b[1]})`})}},V=()=>{if(r.rotationTimer&&(clearInterval(r.rotationTimer),r.rotationTimer=null),t.rollType==B.AUTHROLL){if(g)return;r.rotationTimer=k.value.length>t.showCount&&setInterval(()=>{e.nextTick(()=>{ft()})},t.loopTime)}},k=e.computed({get(){const l=t.modelValue.map((o,a)=>(o.__id=H(),o.__uniqueness=H(),o));return S=new it(R(l),t.showCount*2),e.nextTick(()=>{z()}),l},set(l){c&&n.emit("update:modelValue",l)}}),ut=e.computed(()=>{if(r.takeFlag=!r.takeFlag,t.modelValue.length>t.showCount){const l=r.getInventedListDataBridgeInit?t.rollCount:(r.getInventedListDataBridgeInit=!0)&&0;return at(S.take(l))}else return new Array(t.modelValue.length).fill(0).map((l,o)=>k.value[o])}),dt=e.computed(()=>{let l=k.value.length;const o=Number(t.itemHeight.replace("px","")),a=l<=t.showCount?l:t.showCount;return o*a+"px"});e.onMounted(()=>{V(),e.watch(()=>t.rollType,()=>V()),e.watch(()=>t.loopTime,()=>V()),e.watch(()=>k.value,()=>{V()})}),e.onUnmounted(()=>{});const ft=()=>{var p;const l=u==null?void 0:u.value,o=t.rollCount<=t.showCount?t.rollCount:t.showCount,a=l.scrollHeight-l.clientHeight;y=y+a/t.showCount*o;for(let d=0;d<((p=f.value)==null?void 0:p.children.length);d++){const b=f.value.children[d],{attractShowCount:N,header:T,tmp_scaleRule:w}=t,C=N.map(x=>x+o).includes(d);if(C)if(s.value["tr-focus-bg-color-style"]=="double"){const A=s.value["tr-focus-bg-color-angle"],$=s.value["tr-focus-bg-color-from"],I=s.value["tr-focus-bg-color-to"];b.style.background=`linear-gradient(${A}deg,${$},${I})`}else b.style.background=s.value["tr-focus-bg-color-value"];else b.style.background=s.value["tr-un-focus-bg-color"];Array.from(b.children).forEach((x,A)=>{x.style.flexBasis=T[A].basis+"%",C?x.style.transform=`scale(${w[0]})`:x.style.transform=`scale(${w[1]})`})}ct(l,"top",y,t.scrollTransition,()=>{r.takeFlag=!r.takeFlag,l.scrollTop=0,y=0,e.nextTick(()=>{z()})})},j=()=>{g=!0,r.rotationTimer&&(clearInterval(r.rotationTimer),r.rotationTimer=null)},gt=()=>{g=!1,V()},mt=function(l){n.emit&&n.emit("rowClick",l)};e.onUnmounted(()=>{j(),r.rotationTimer=null});const pt=()=>{if(!s.value["pin-bg-color-style"])return"";let l="none";if(s.value["pin-bg-color-style"]=="double"){const a=s.value["pin-bg-color-angle"],p=s.value["pin-bg-color-from"],d=s.value["pin-bg-color-to"];l=`linear-gradient(${a}deg,${p},${d})`}else l=s.value["pin-bg-color-value"];return e.createVNode("div",{class:v("_pinSth"),style:{background:l}},null)},yt=()=>t.showHeader?e.createVNode("div",{class:v("_th")},[_.value.map(l=>e.createVNode("div",{class:v("_td"),style:{flexBasis:l.basis+"%"}},[l.label]))]):"",xt=()=>e.createVNode("div",{ref:u,onWheel:h,class:v("_scroll"),style:{height:dt.value}},[e.createVNode("ul",{ref:f,class:v("_wrapper")},[ut.value.map(l=>ht(l))])]),ht=l=>e.createVNode("li",{key:l.__id,style:{height:t.itemHeight},onClick:mt.bind(this,l)},[t.header.map((o,a)=>bt(l,o,a))]),bt=(l,o,a)=>{var b,N,T,w,C,x,A,$,I,K,Q,X,Y,Z,D,tt,et,ot;let p={};o.longText&&((b=o==null?void 0:o.longText)!=null&&b.speed&&(p["sco-ani-dura"]=o.longText.speed),(N=o.longText)!=null&&N.GPUSpee&&(p["sco-ani-name"]=((T=o==null?void 0:o.longText)==null?void 0:T.GPUSpee)==!0?"longTextScrollxAnimation3d":"longTextScrollxAnimation"),((w=o.longText)!=null&&w.txtGap||Number(o.longText.txtGap)==0)&&(p["txt-gap"]=o.longText.txtGap));const d={};return l[o.prop]&&((C=o.fo)!=null&&C.textAlign&&(d.textAlign=(x=o.fo)==null?void 0:x.textAlign),(A=o.fo)!=null&&A.style&&(d.fontFamily=($=o.fo)==null?void 0:$.style),(I=o.fo)!=null&&I.weight&&(d.fontWeight=(K=o.fo)==null?void 0:K.weight),(Q=o.fo)!=null&&Q.color&&(d.color=(X=o.fo)==null?void 0:X.color),(Y=o.fo)!=null&&Y.size&&(d.fontSize=((Z=o.fo)==null?void 0:Z.size)+"px")),e.createVNode("div",{class:[v("_td")]},[e.createVNode("div",{class:[m[(D=_.value[a])==null?void 0:D.type]],style:{...d}},[(tt=_.value[a])!=null&&tt.type&&((et=_.value[a])==null?void 0:et.type)=="longText"?e.createVNode(q,{style:{padding:"0 1px"},text:l[o.prop]||"undefined",speed:l[o.prop]?(ot=o.longText)==null?void 0:ot.speed:!1,dynamicCss:Object.assign(R(L.value),p)},null):l[o.prop]||"undefined"])])};return()=>e.withDirectives(e.createVNode("div",{class:v(),onMouseenter:j,onMouseleave:gt},[pt(),yt(),xt()]),[[e.resolveDirective("css"),s.value||{}]])}}),"roll-list");return F.RollList=E,F.default=E,Object.defineProperties(F,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),F}({},Vue);
