(function(g,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],n):(g=typeof globalThis<"u"?globalThis:g||self,n((g.dw=g.dw||{},g.dw["uiroll-list"]={}),g.Vue))})(this,function(g,n){"use strict";const H=(e,t)=>(e.install=function(l){if(e){const s=e.name||e.__name;if(s||t){const r=t?`dw-${t}`:"dw-"+s.replace(/dw/gi,"").toLowerCase();l.component(r,e)}else console.error(e,t,!t)}},e),W=e=>Array.isArray(e);function N(e){const t=`vi-${e}`;return{n:r=>r?r.startsWith("-")?`${t}${r}`:`${t}_${r}`:t,classes:(...r)=>r.map(d=>{if(W(d)){const[u,f,y=null]=d;return u?f:y}return d})}}const B={header:{type:Array,default:[]},itemHeight:{type:[String],default:"40px"},showCount:{type:[Number],default:6},rollCount:{type:[Number],default:1},attractShowCount:{type:Array,default:[1,3,4]},loopTime:{type:Number,default:1e3*300},scrollTransition:{type:Number,default:1e3*2},tmp_scaleRule:{type:Array,default:[1.3,.8]},scaleRule:{type:[Number,Array],default:[1.5,1,.8]},modelValue:{type:Array,default:[]},dynamicCss:{type:Object,default:()=>({"box-width":"800","box-pad-lr":"10","th-pad-tb":"10","th-bg-color":"#0f2851","th-fo-color":"#df9418","th-fo-size":"16","th-fo-weight":"900","tr-attract-bg-color":"#184677","tr-un-attract-bg-color":"#04172c","td-pad-lr":"0","td-pad-tb":"0"})}},E=function(e,t){for(let[l,s]of Object.entries(t.value))e.style.setProperty("--"+l,s)},M={mounted(e,t){E(e,t)},updated(e,t){E(e,t)},install(e){e.directive("Css",this)}},{n:R}=N(""),q=(e=R())=>e+"xxxxxxxx".replace(/[xy]/g,function(t){var l=0|16*Math.random(),s=t=="x"?l:8|3&l;return s.toString(16)});class P{constructor(t=[],l=7){this.list=t,this.severalGroups=l,this.windowSliding=new Array(this.severalGroups).fill(0).map((s,r)=>r)}take(t){return this.Sliding(t),this.show()}show(){return this.windowSliding.map(t=>this.list[t])}Sliding(t){this.windowSliding=this.windowSliding.map(l=>{const s=this.list.length,r=l+t;return r<=s-1?r:r-s})}}const $=function(e){const t=e instanceof Array?[]:{};for(let l in e)t[l]=typeof e[l]=="object"?$(e[l]):e[l];return t};function _(e,t,l,s){const r=e.scrollTop,d=t-r,u=performance.now();function f(){const x=performance.now()-u,p=y(x,r,d,l);e.scrollTop=p,x<l?requestAnimationFrame(f):s&&s()}function y(m,x,p,S){return m/=S/2,m<1?p/2*m*m+x:(m--,-p/2*(m*(m-2)-1)+x)}requestAnimationFrame(f)}const O=n.defineComponent({name:"ScrollText",props:{text:{type:String,required:!0},speed:{type:Number,default:50}},setup(e){const t=n.ref(null),l=n.ref(null),s=n.ref(null);let r=null,d=!1;const u=()=>{const m=l.value.scrollLeft;d||m+t.value.clientWidth>=l.value.scrollWidth||(l.value.scrollLeft+=1,r=requestAnimationFrame(u))},f=()=>{l.value.scrollWidth<=t.value.clientWidth||(r=requestAnimationFrame(u))},y=()=>{d=!0,r!==null&&(cancelAnimationFrame(r),r=null)};return n.onMounted(()=>{f(),t.value.addEventListener("mouseenter",y),t.value.addEventListener("mouseleave",f)}),n.onUnmounted(()=>{y(),t.value.removeEventListener("mouseenter",y),t.value.removeEventListener("mouseleave",f)}),{container:t,content:l,text:s}},render(){return n.createVNode("div",{class:"scroll-text-container",ref:"container"},[n.createVNode("div",{class:"scroll-text-content",ref:"content"},[n.createVNode("div",{class:"scroll-text",ref:"text",style:{whiteSpace:"nowrap"}},[n.createTextVNode("464654")])])])}}),{n:C}=N("roll-list"),k=H(n.defineComponent({name:"RollList",emits:["update:modelValue"],directives:{css:M},props:B,components:{scrollText:O},setup(e,t){var I;const s="onUpdate:modelValue"in(((I=n.getCurrentInstance())==null?void 0:I.vnode.props)||{}),r=n.reactive({uuid:q(C("-")),takeFlag:!1,rotationTimer:null,getInventedListDataBridgeInit:!1}),d=n.ref(null),u=n.ref();let f=0,y=null;const m={longText:"longText"},x=o=>{o.preventDefault()},p=n.computed(()=>Object.assign(B.dynamicCss.default(),e.dynamicCss)),S=n.computed(()=>e.header),V=n.computed({get(){return y=new P($(e.modelValue),e.showCount*2),e.modelValue},set(o){s&&t.emit("update:modelValue",o)}}),z=n.computed(()=>{if(r.takeFlag=!r.takeFlag,e.modelValue.length>e.showCount){const o=r.getInventedListDataBridgeInit?e.rollCount:(r.getInventedListDataBridgeInit=!0)&&0;return y.take(o)}else return new Array(e.modelValue.length).fill(0).map((o,a)=>V.value[a])});n.watchEffect(()=>{r.rotationTimer&&(clearInterval(r.rotationTimer),r.rotationTimer=null),r.rotationTimer=V.value.length>e.showCount&&setInterval(()=>{j()},e.loopTime)});const U=n.computed(()=>{let o=V.value.length;const a=Number(e.itemHeight.replace("px","")),w=o<=e.showCount?o:e.showCount;return a*w+"px"}),F=()=>{var o;for(let a=0;a<((o=u.value)==null?void 0:o.children.length);a++){const w=u.value.children[a],{attractShowCount:b,header:h,tmp_scaleRule:i}=e;b.includes(a)?(w.style.background=p.value["tr-attract-bg-color"],Array.from(w.children).forEach((c,T)=>{c.style.transform=`scale(${i[0]})`,c.style.flexBasis=h[T].basis+"%",console.log(66666666,c.style.flexBasis)})):(w.style.background=p.value["tr-un-attract-bg-color"],Array.from(w.children).forEach((c,T)=>{c.style.transform=`scale(${i[1]})`,c.style.flexBasis=h[T].basis+"%",console.log(66666666,c.style.flexBasis)}))}},j=()=>{var b;const o=d==null?void 0:d.value,a=e.rollCount<=e.showCount?e.rollCount:e.showCount,w=o.scrollHeight-o.clientHeight;f=f+w/e.showCount*a;for(let h=0;h<((b=u.value)==null?void 0:b.children.length);h++){const i=u.value.children[h],{rollCount:c,attractShowCount:T,scrollTransition:A,header:D}=e;i.style.transition=`${A/1e3}s`,T.map(v=>v+c).includes(h)?(i.style.background=p.value["tr-attract-bg-color"],Array.from(i.children).forEach((v,L)=>{v.style.transition=`${A/1e3}s`,v.style.flexBasis=D[L].basis+"%",v.style.transform=`scale(${e.tmp_scaleRule[0]})`})):(i.style.background=p.value["tr-un-attract-bg-color"],Array.from(i.children).forEach((v,L)=>{v.style.transition=`${A/1e3}s`,v.style.flexBasis=D[L].basis+"%",v.style.transform=`scale(${e.tmp_scaleRule[1]})`}))}_(o,f,e.scrollTransition,()=>{var h;for(let i=0;i<((h=u.value)==null?void 0:h.children.length);i++){const c=u.value.children[i];c.style.transition="0s",Array.from(c.children).forEach(T=>{T.style.transition="0s"})}r.takeFlag=!r.takeFlag,o.scrollTop=0,f=0,F()})};return n.nextTick(()=>{F()}),()=>n.withDirectives(n.createVNode("div",{class:C()},[n.createVNode("div",{class:C("_th")},[S.value.map(o=>n.createVNode("div",{class:C("_td"),style:{flexBasis:o.basis+"%"}},[o.label]))]),n.createVNode("div",{ref:d,onWheel:x,class:C("_scroll"),style:{height:U.value}},[n.createVNode("ul",{ref:u,class:C("_wrapper")},[z.value.map(o=>n.createVNode("li",{style:{height:e.itemHeight}},[e.header.map((a,w)=>{var b,h,i,c;return n.createVNode("div",{class:[C("_td")]},[n.createVNode("div",{class:[m[(b=S.value[w])==null?void 0:b.type]],style:{color:o[a.prop]?(h=a.fo)==null?void 0:h.color:"none",fontSize:o[a.prop]?((i=a.fo)==null?void 0:i.size)+"px":"auto",fontWeight:o[a.prop]?(c=a.fo)==null?void 0:c.weight:"0"}},[o[a.prop]||"undefined"])])})]))])])]),[[n.resolveDirective("css"),p.value||{}]])}}),"roll-list");g.RollList=k,g.default=k,Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
