(function(g,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],n):(g=typeof globalThis<"u"?globalThis:g||self,n((g.dw=g.dw||{},g.dw["uiroll-list"]={}),g.Vue))})(this,function(g,n){"use strict";const H=(e,t)=>(e.install=function(l){if(e){const a=e.name||e.__name;if(a||t){const r=t?`dw-${t}`:"dw-"+a.replace(/dw/gi,"").toLowerCase();l.component(r,e)}else console.error(e,t,!t)}},e),W=e=>Array.isArray(e);function N(e){const t=`vi-${e}`;return{n:r=>r?r.startsWith("-")?`${t}${r}`:`${t}_${r}`:t,classes:(...r)=>r.map(u=>{if(W(u)){const[c,d,y=null]=u;return c?d:y}return u})}}const B={header:{type:Array,default:[]},itemHeight:{type:[String],default:"40px"},showCount:{type:[Number],default:6},rollCount:{type:[Number],default:1},attractShowCount:{type:Array,default:[1,3,4]},loopTime:{type:Number,default:1e3*300},scrollTransition:{type:Number,default:1e3*2},tmp_scaleRule:{type:Array,default:[1.3,.8]},scaleRule:{type:[Number,Array],default:[1.5,1,.8]},modelValue:{type:Array,default:[]},dynamicCss:{type:Object,default:()=>({"box-width":"800","th-pad-tb":"10","th-bg-color":"#0f2851","th-fo-color":"#df9418","th-fo-size":"16","th-fo-weight":"900","th-radius-lt":"2","th-radius-rt":"2","th-radius-lb":"2","th-radius-rb":"2","tr-attract-bg-color":"#184677","tr-un-attract-bg-color":"#04172c","td-pad-lr":"0","td-pad-tb":"0"})}},E=function(e,t){for(let[l,a]of Object.entries(t.value))e.style.setProperty("--"+l,a)},M={mounted(e,t){E(e,t)},updated(e,t){E(e,t)},install(e){e.directive("Css",this)}},{n:R}=N(""),_=(e=R())=>e+"xxxxxxxx".replace(/[xy]/g,function(t){var l=0|16*Math.random(),a=t=="x"?l:8|3&l;return a.toString(16)});class q{constructor(t=[],l=7){this.list=t,this.severalGroups=l,this.windowSliding=new Array(this.severalGroups).fill(0).map((a,r)=>r)}take(t){return this.Sliding(t),this.show()}show(){return this.windowSliding.map(t=>this.list[t])}Sliding(t){this.windowSliding=this.windowSliding.map(l=>{const a=this.list.length,r=l+t;return r<=a-1?r:r-a})}}const $=function(e){const t=e instanceof Array?[]:{};for(let l in e)t[l]=typeof e[l]=="object"?$(e[l]):e[l];return t};function P(e,t,l,a){const r=e.scrollTop,u=t-r,c=performance.now();function d(){const b=performance.now()-c,p=y(b,r,u,l);e.scrollTop=p,b<l?requestAnimationFrame(d):a&&a()}function y(m,b,p,S){return m/=S/2,m<1?p/2*m*m+b:(m--,-p/2*(m*(m-2)-1)+b)}requestAnimationFrame(d)}const O=n.defineComponent({name:"ScrollText",props:{text:{type:String,required:!0},speed:{type:Number,default:50}},setup(e){const t=n.ref(null),l=n.ref(null),a=n.ref(null);let r=null,u=!1;const c=()=>{const m=l.value.scrollLeft;u||m+t.value.clientWidth>=l.value.scrollWidth||(l.value.scrollLeft+=1,r=requestAnimationFrame(c))},d=()=>{l.value.scrollWidth<=t.value.clientWidth||(r=requestAnimationFrame(c))},y=()=>{u=!0,r!==null&&(cancelAnimationFrame(r),r=null)};return n.onMounted(()=>{d(),t.value.addEventListener("mouseenter",y),t.value.addEventListener("mouseleave",d)}),n.onUnmounted(()=>{y(),t.value.removeEventListener("mouseenter",y),t.value.removeEventListener("mouseleave",d)}),{container:t,content:l,text:a}},render(){return n.createVNode("div",{class:"scroll-text-container",ref:"container"},[n.createVNode("div",{class:"scroll-text-content",ref:"content"},[n.createVNode("div",{class:"scroll-text",ref:"text",style:{whiteSpace:"nowrap"}},[n.createTextVNode("464654")])])])}}),{n:C}=N("roll-list"),k=H(n.defineComponent({name:"RollList",emits:["update:modelValue"],directives:{css:M},props:B,components:{scrollText:O},setup(e,t){var I;const a="onUpdate:modelValue"in(((I=n.getCurrentInstance())==null?void 0:I.vnode.props)||{}),r=n.reactive({uuid:_(C("-")),takeFlag:!1,rotationTimer:null,getInventedListDataBridgeInit:!1}),u=n.ref(null),c=n.ref();let d=0,y=null;const m={longText:"longText"},b=o=>{o.preventDefault()},p=n.computed(()=>Object.assign(B.dynamicCss.default(),e.dynamicCss)),S=n.computed(()=>e.header),V=n.computed({get(){return y=new q($(e.modelValue),e.showCount*2),e.modelValue},set(o){a&&t.emit("update:modelValue",o)}}),z=n.computed(()=>{if(r.takeFlag=!r.takeFlag,e.modelValue.length>e.showCount){const o=r.getInventedListDataBridgeInit?e.rollCount:(r.getInventedListDataBridgeInit=!0)&&0;return y.take(o)}else return new Array(e.modelValue.length).fill(0).map((o,s)=>V.value[s])});n.watchEffect(()=>{r.rotationTimer&&(clearInterval(r.rotationTimer),r.rotationTimer=null),r.rotationTimer=V.value.length>e.showCount&&setInterval(()=>{j()},e.loopTime)});const U=n.computed(()=>{let o=V.value.length;const s=Number(e.itemHeight.replace("px","")),w=o<=e.showCount?o:e.showCount;return s*w+"px"}),F=()=>{var o;for(let s=0;s<((o=c.value)==null?void 0:o.children.length);s++){const w=c.value.children[s],{attractShowCount:x,header:f,tmp_scaleRule:i}=e;x.includes(s)?(w.style.background=p.value["tr-attract-bg-color"],Array.from(w.children).forEach((h,T)=>{h.style.transform=`scale(${i[0]})`,h.style.flexBasis=f[T].basis+"%"})):(w.style.background=p.value["tr-un-attract-bg-color"],Array.from(w.children).forEach((h,T)=>{h.style.transform=`scale(${i[1]})`,h.style.flexBasis=f[T].basis+"%"}))}},j=()=>{var x;const o=u==null?void 0:u.value,s=e.rollCount<=e.showCount?e.rollCount:e.showCount,w=o.scrollHeight-o.clientHeight;d=d+w/e.showCount*s;for(let f=0;f<((x=c.value)==null?void 0:x.children.length);f++){const i=c.value.children[f],{rollCount:h,attractShowCount:T,scrollTransition:A,header:D}=e;i.style.transition=`${A/1e3}s`,T.map(v=>v+h).includes(f)?(i.style.background=p.value["tr-attract-bg-color"],Array.from(i.children).forEach((v,L)=>{v.style.transition=`${A/1e3}s`,v.style.flexBasis=D[L].basis+"%",v.style.transform=`scale(${e.tmp_scaleRule[0]})`})):(i.style.background=p.value["tr-un-attract-bg-color"],Array.from(i.children).forEach((v,L)=>{v.style.transition=`${A/1e3}s`,v.style.flexBasis=D[L].basis+"%",v.style.transform=`scale(${e.tmp_scaleRule[1]})`}))}P(o,d,e.scrollTransition,()=>{var f;for(let i=0;i<((f=c.value)==null?void 0:f.children.length);i++){const h=c.value.children[i];h.style.transition="0s",Array.from(h.children).forEach(T=>{T.style.transition="0s"})}r.takeFlag=!r.takeFlag,o.scrollTop=0,d=0,F()})};return n.nextTick(()=>{F()}),()=>n.withDirectives(n.createVNode("div",{class:C()},[n.createVNode("div",{class:C("_th")},[S.value.map(o=>n.createVNode("div",{class:C("_td"),style:{flexBasis:o.basis+"%"}},[o.label]))]),n.createVNode("div",{ref:u,onWheel:b,class:C("_scroll"),style:{height:U.value}},[n.createVNode("ul",{ref:c,class:C("_wrapper")},[z.value.map(o=>n.createVNode("li",{style:{height:e.itemHeight}},[e.header.map((s,w)=>{var x,f,i,h;return n.createVNode("div",{class:[C("_td")]},[n.createVNode("div",{class:[m[(x=S.value[w])==null?void 0:x.type]],style:{color:o[s.prop]?(f=s.fo)==null?void 0:f.color:"none",fontSize:o[s.prop]?((i=s.fo)==null?void 0:i.size)+"px":"auto",fontWeight:o[s.prop]?(h=s.fo)==null?void 0:h.weight:"0"}},[o[s.prop]||"undefined"])])})]))])])]),[[n.resolveDirective("css"),p.value||{}]])}}),"roll-list");g.RollList=k,g.default=k,Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
