"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const r=require("vue"),M=(e,t)=>(e.install=function(l){if(e){const a=e.name||e.__name;if(a||t){const n=t?`dw-${t}`:"dw-"+a.replace(/dw/gi,"").toLowerCase();l.component(n,e)}else console.error(e,t,!t)}},e),R=e=>Array.isArray(e);function k(e){const t=`vi-${e}`;return{n:n=>n?n.startsWith("-")?`${t}${n}`:`${t}_${n}`:t,classes:(...n)=>n.map(u=>{if(R(u)){const[c,d,g=null]=u;return c?d:g}return u})}}const E={header:{type:Array,default:[]},itemHeight:{type:[String],default:"40px"},showCount:{type:[Number],default:6},rollCount:{type:[Number],default:1},attractShowCount:{type:Array,default:[1,3,4]},loopTime:{type:Number,default:1e3*300},scrollTransition:{type:Number,default:1e3*2},tmp_scaleRule:{type:Array,default:[1.3,.8]},scaleRule:{type:[Number,Array],default:[1.5,1,.8]},modelValue:{type:Array,default:[]},dynamicCss:{type:Object,default:()=>({"box-width":"800","th-pad-tb":"10","th-bg-color":"#0f2851","th-fo-color":"#df9418","th-fo-size":"16","th-fo-weight":"900","th-radius-lt":"2","th-radius-rt":"2","th-radius-lb":"2","th-radius-rb":"2","tr-attract-bg-color":"#184677","tr-un-attract-bg-color":"#04172c","td-pad-lr":"0","td-pad-tb":"0"})}},$=function(e,t){for(let[l,a]of Object.entries(t.value))e.style.setProperty("--"+l,a)},_={mounted(e,t){$(e,t)},updated(e,t){$(e,t)},install(e){e.directive("Css",this)}},{n:q}=k(""),P=(e=q())=>e+"xxxxxxxx".replace(/[xy]/g,function(t){var l=0|16*Math.random(),a=t=="x"?l:8|3&l;return a.toString(16)});class O{constructor(t=[],l=7){this.list=t,this.severalGroups=l,this.windowSliding=new Array(this.severalGroups).fill(0).map((a,n)=>n)}take(t){return this.Sliding(t),this.show()}show(){return this.windowSliding.map(t=>this.list[t])}Sliding(t){this.windowSliding=this.windowSliding.map(l=>{const a=this.list.length,n=l+t;return n<=a-1?n:n-a})}}const F=function(e){const t=e instanceof Array?[]:{};for(let l in e)t[l]=typeof e[l]=="object"?F(e[l]):e[l];return t};function z(e,t,l,a){const n=e.scrollTop,u=t-n,c=performance.now();function d(){const w=performance.now()-c,v=g(w,n,u,l);e.scrollTop=v,w<l?requestAnimationFrame(d):a&&a()}function g(m,w,v,T){return m/=T/2,m<1?v/2*m*m+w:(m--,-v/2*(m*(m-2)-1)+w)}requestAnimationFrame(d)}const U=r.defineComponent({name:"ScrollText",props:{text:{type:String,required:!0},speed:{type:Number,default:50}},setup(e){const t=r.ref(null),l=r.ref(null),a=r.ref(null);let n=null,u=!1;const c=()=>{const m=l.value.scrollLeft;u||m+t.value.clientWidth>=l.value.scrollWidth||(l.value.scrollLeft+=1,n=requestAnimationFrame(c))},d=()=>{l.value.scrollWidth<=t.value.clientWidth||(n=requestAnimationFrame(c))},g=()=>{u=!0,n!==null&&(cancelAnimationFrame(n),n=null)};return r.onMounted(()=>{d(),t.value.addEventListener("mouseenter",g),t.value.addEventListener("mouseleave",d)}),r.onUnmounted(()=>{g(),t.value.removeEventListener("mouseenter",g),t.value.removeEventListener("mouseleave",d)}),{container:t,content:l,text:a}},render(){return r.createVNode("div",{class:"scroll-text-container",ref:"container"},[r.createVNode("div",{class:"scroll-text-content",ref:"content"},[r.createVNode("div",{class:"scroll-text",ref:"text",style:{whiteSpace:"nowrap"}},[r.createTextVNode("464654")])])])}}),{n:x}=k("roll-list"),G=r.defineComponent({name:"RollList",emits:["update:modelValue"],directives:{css:_},props:E,components:{scrollText:U},setup(e,t){var L;const a="onUpdate:modelValue"in(((L=r.getCurrentInstance())==null?void 0:L.vnode.props)||{}),n=r.reactive({uuid:P(x("-")),takeFlag:!1,rotationTimer:null,getInventedListDataBridgeInit:!1}),u=r.ref(null),c=r.ref();let d=0,g=null;const m={longText:"longText"},w=o=>{o.preventDefault()},v=r.computed(()=>Object.assign(E.dynamicCss.default(),e.dynamicCss)),T=r.computed(()=>e.header),S=r.computed({get(){return g=new O(F(e.modelValue),e.showCount*2),e.modelValue},set(o){a&&t.emit("update:modelValue",o)}}),D=r.computed(()=>{if(n.takeFlag=!n.takeFlag,e.modelValue.length>e.showCount){const o=n.getInventedListDataBridgeInit?e.rollCount:(n.getInventedListDataBridgeInit=!0)&&0;return g.take(o)}else return new Array(e.modelValue.length).fill(0).map((o,s)=>S.value[s])});r.watchEffect(()=>{n.rotationTimer&&(clearInterval(n.rotationTimer),n.rotationTimer=null),n.rotationTimer=S.value.length>e.showCount&&setInterval(()=>{W()},e.loopTime)});const H=r.computed(()=>{let o=S.value.length;const s=Number(e.itemHeight.replace("px","")),y=o<=e.showCount?o:e.showCount;return s*y+"px"}),N=()=>{var o;for(let s=0;s<((o=c.value)==null?void 0:o.children.length);s++){const y=c.value.children[s],{attractShowCount:C,header:h,tmp_scaleRule:i}=e;C.includes(s)?(y.style.background=v.value["tr-attract-bg-color"],Array.from(y.children).forEach((f,b)=>{f.style.transform=`scale(${i[0]})`,f.style.flexBasis=h[b].basis+"%"})):(y.style.background=v.value["tr-un-attract-bg-color"],Array.from(y.children).forEach((f,b)=>{f.style.transform=`scale(${i[1]})`,f.style.flexBasis=h[b].basis+"%"}))}},W=()=>{var C;const o=u==null?void 0:u.value,s=e.rollCount<=e.showCount?e.rollCount:e.showCount,y=o.scrollHeight-o.clientHeight;d=d+y/e.showCount*s;for(let h=0;h<((C=c.value)==null?void 0:C.children.length);h++){const i=c.value.children[h],{rollCount:f,attractShowCount:b,scrollTransition:A,header:B}=e;i.style.transition=`${A/1e3}s`,b.map(p=>p+f).includes(h)?(i.style.background=v.value["tr-attract-bg-color"],Array.from(i.children).forEach((p,V)=>{p.style.transition=`${A/1e3}s`,p.style.flexBasis=B[V].basis+"%",p.style.transform=`scale(${e.tmp_scaleRule[0]})`})):(i.style.background=v.value["tr-un-attract-bg-color"],Array.from(i.children).forEach((p,V)=>{p.style.transition=`${A/1e3}s`,p.style.flexBasis=B[V].basis+"%",p.style.transform=`scale(${e.tmp_scaleRule[1]})`}))}z(o,d,e.scrollTransition,()=>{var h;for(let i=0;i<((h=c.value)==null?void 0:h.children.length);i++){const f=c.value.children[i];f.style.transition="0s",Array.from(f.children).forEach(b=>{b.style.transition="0s"})}n.takeFlag=!n.takeFlag,o.scrollTop=0,d=0,N()})};return r.nextTick(()=>{N()}),()=>r.withDirectives(r.createVNode("div",{class:x()},[r.createVNode("div",{class:x("_th")},[T.value.map(o=>r.createVNode("div",{class:x("_td"),style:{flexBasis:o.basis+"%"}},[o.label]))]),r.createVNode("div",{ref:u,onWheel:w,class:x("_scroll"),style:{height:H.value}},[r.createVNode("ul",{ref:c,class:x("_wrapper")},[D.value.map(o=>r.createVNode("li",{style:{height:e.itemHeight}},[e.header.map((s,y)=>{var C,h,i,f;return r.createVNode("div",{class:[x("_td")]},[r.createVNode("div",{class:[m[(C=T.value[y])==null?void 0:C.type]],style:{color:o[s.prop]?(h=s.fo)==null?void 0:h.color:"none",fontSize:o[s.prop]?((i=s.fo)==null?void 0:i.size)+"px":"auto",fontWeight:o[s.prop]?(f=s.fo)==null?void 0:f.weight:"0"}},[o[s.prop]||"undefined"])])})]))])])]),[[r.resolveDirective("css"),v.value||{}]])}}),I=M(G,"roll-list");exports.RollList=I;exports.default=I;
