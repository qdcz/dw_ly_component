"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("vue"),ce=(o,n)=>(o.install=function(u){if(o){const s=o.name||o.__name;if(s||n){const p=n?`dw-${n}`:"dw-"+s.replace(/dw/gi,"").toLowerCase();u.component(p,o)}else console.error(o,n,!n)}},o),ue=o=>Array.isArray(o);function k(o){const n=`vi-${o}`;return{n:p=>p?p.startsWith("-")?`${n}${p}`:`${n}_${p}`:n,classes:(...p)=>p.map(l=>{if(ue(l)){const[w,g,h=null]=l;return w?g:h}return l})}}const A={clearable:{type:[String,Boolean],default:!1},isRange:{type:[String,Boolean],default:!1},disabledHours:{type:Array,default:[]},disabledMinutes:{type:Array,default:[]},disabledSeconds:{type:Array,default:[]},arrowControl:{type:[String,Boolean],default:""},placeholder:{type:String,default:"Arbitrary time"},startPlaceholder:String,endPlaceholder:String,modelValue:{type:[String,Number,Boolean],default:""},dynamicCss:{type:Object,default:()=>({"input-box-shadow-x":"0","input-box-shadow-y":"0","input-box-shadow-blur":"0","input-box-shadow-spread":"1","input-box-shadow-color":"#dcdfe6","input-hover-box-shadow-x":"0","input-hover-box-shadow-y":"0","input-hover-box-shadow-blur":"0","input-hover-box-shadow-spread":"1","input-hover-box-shadow-color":"#85a2dd","input-active-box-shadow-x":"0","input-active-box-shadow-y":"0","input-active-box-shadow-blur":"0","input-active-box-shadow-spread":"1","input-active-box-shadow-color":"rgb(0, 94, 255)","input-border-radius":"4","input-line-padding-t":"0","input-line-padding-r":"28","input-line-padding-b":"0","input-line-padding-l":"8","input-bg-color":"rgba(255,255,255)","input-fo-color":"#606266","input-fo-size":"12","input-fo-weight":"600","input-line-height":"30","input-width":"200","input-text-alight":"start","input-icon-width":"12","input-icon-color":"#000","input-icon-hover-color":"#008cc8","input-placeholder-fo-color":"gray","popper-bg-color":"#fff","popper-height":"228","popper-border-radius":"8","popper-z-index":"999","popper-box-shadow-x":"0","popper-box-shadow-y":"0","popper-box-shadow-blur":"12","popper-box-shadow-spread":"0","popper-box-shadow-color":"rgba(0, 0, 0, 0.12)","popper-arrow-height":"5","popper-panel-padding-t":"8","popper-panel-padding-r":"4","popper-panel-padding-b":"0","popper-panel-padding-l":"4","popper-footer-height":"36","popper-footer-fo-size":"12","popper-footer-border-top-width":"1","popper-footer-border-top-style":"solid","popper-footer-border-top-color":"rgb(228, 231, 237)","popper-footer-cancel-fo-color":"#303133","popper-footer-ok-fo-color":"skyblue","popper-footer-ok-fo-weight":"800","popper-footer-ok-margin-t":"0","popper-footer-ok-margin-r":"5","popper-footer-ok-margin-b":"0","popper-footer-ok-margin-l":"5","popper-footer-ok-padding-t":"0","popper-footer-ok-padding-r":"5","popper-footer-ok-padding-b":"0","popper-footer-ok-padding-l":"5","popper-spinner-pitch-box-border-top-width":"1","popper-spinner-pitch-box-border-top-style":"solid","popper-spinner-pitch-box-border-top-color":"#e4e7ed","popper-spinner-pitch-box-border-bottom-width":"1","popper-spinner-pitch-box-border-bottom-style":"solid","popper-spinner-pitch-box-border-bottom-color":"#e4e7ed","popper-spinner-number-height":"32","popper-spinner-number-fo-color":"#606266","popper-spinner-number-fo-size":"12","popper-spinner-number-hover-bg-color":"#e0e0e0","popper-spinner-number-active-fo-color":"#000","popper-spinner-number-active-fo-weight":"700","popper-spinner-number-active-hover-bg-color":"rgba($color: #e0e0e0, $alpha: 0)","popper-spinner-number-disabled-fo-color":"rgb(223, 223, 223)","popper-spinner-number-disabled-hover-bg-color":"rgba($color: #e0e0e0, $alpha: 0)","scroll-bar-thumb-width":"8",scrollBarHeight:"60",scrollBarBgColor:"rgb(218, 218, 218)",scrollBarBgColorHover:"skyblue"})}},G=Symbol("time-picker"),F=function(o,n){for(let[u,s]of Object.entries(n.value))o.style.setProperty("--"+u,s)},P={mounted(o,n){F(o,n)},updated(o,n){F(o,n)},install(o){o.directive("Css",this)}},{n:pe,classes:de}=k("input-svg-icon"),me=t.defineComponent({name:"VIInputSvgIcon",emits:["click"],props:{path:{type:String,default:`M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 
            764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 
            45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z`},height:{type:[String,Number],default:"12px"},width:{type:[String,Number],default:"12px"},modelValue:{type:[String,Number,Boolean],default:""}},setup(o,n){const u=function(s){n.emit("click",s)};return()=>t.createVNode("svg",{class:[de(pe()),"icon"],height:o.height,width:o.width,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",onClick:u},[t.createVNode("path",{fill:"currentColor",d:o.path},null)])}}),O={modelValue:{type:[String,Number,Array],default:""},showPassword:{type:[String,Boolean],default:!1},disabled:{type:[String,Boolean],default:!1},readonly:{type:[String,Boolean],default:!1},clearable:{type:[String,Boolean],default:!1},placeholder:{type:String,default:"请选择您需要的内容o(*￣▽￣*)ブ"},dynamicCss:{type:Object,default:()=>({"input-box-shadow-x":"0","input-box-shadow-y":"0","input-box-shadow-blur":"0","input-box-shadow-spread":"1","input-box-shadow-color":"#dcdfe6","input-hover-box-shadow-x":"0","input-hover-box-shadow-y":"0","input-hover-box-shadow-blur":"0","input-hover-box-shadow-spread":"1","input-hover-box-shadow-color":"#85a2dd","input-active-box-shadow-x":"0","input-active-box-shadow-y":"0","input-active-box-shadow-blur":"0","input-active-box-shadow-spread":"1","input-active-box-shadow-color":"rgb(0, 94, 255)","input-border-radius":"4","input-line-padding-t":"0","input-line-padding-r":"28","input-line-padding-b":"0","input-line-padding-l":"8","input-bg-color":"rgba(255,255,255)","input-fo-color":"#606266","input-fo-size":"12","input-fo-weight":"600","input-line-height":"30","input-width":"200","input-text-alight":"start","input-icon-width":"12","input-icon-color":"#000","input-icon-hover-color":"#008cc8","input-placeholder-fo-color":"gray"})}},{n:j,classes:fe}=k("timePickerInput"),he=t.defineComponent({name:"VITimePickerInput",emits:["focus","blur","click","update:modelValue","close"],directives:{css:P},props:O,components:{"vi-input-svg-icon":me},setup(o,n){const u="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z",s=t.reactive({softFocus:!1,isHover:!1}),p=function(m){b.value||n.emit("click",m)},l=function(m){b.value||(n.emit("update:modelValue",m.target.value),n.emit("close"),m.stopPropagation())},w=function(m){b.value||(n.emit("focus",m),s.softFocus=!0)},g=function(m){b.value||(n.emit("blur",m),s.softFocus=!1)},h=function(m){b.value||(s.isHover=!0)},V=function(m){b.value||(s.isHover=!1)},S=function(m){b.value||n.emit("update:modelValue",m.target.value)},r=function(m){b.value||n.emit("update:modelValue",m.target.value)},a=t.computed(()=>Object.assign(O.dynamicCss.default(),o.dynamicCss)),y=t.computed(()=>typeof o.readonly=="string"?!0:o.readonly),N=t.computed(()=>typeof o.clearable=="string"?!0:o.clearable),x=t.computed(()=>typeof o.showPassword=="string"?!0:o.showPassword),b=t.computed(()=>typeof o.disabled=="string"?!0:o.disabled),B=t.computed(()=>s.softFocus?"active":"");return()=>t.withDirectives(t.createVNode("div",{class:[fe(j()),B.value,b.value?"disabled":""],onClick:p,onMouseenter:h,onMouseleave:V},[t.createVNode("input",{class:[j("_inner")],placeholder:o.placeholder,onFocus:w,onBlur:g,readonly:y.value||b.value,value:o.modelValue,onChange:S,onInput:r,type:x.value?"password":"text"},null),o.modelValue&&N.value&&s.isHover?t.createVNode(t.resolveComponent("vi-input-svg-icon"),{class:"icon",height:a.value["input-icon-width"],width:a.value["input-icon-width"],path:u,onClick:l},null):""]),[[t.resolveDirective("css"),a.value||{}]])}}),{n:C,classes:z}=k("popper"),be=t.defineComponent({name:"VITimePickerPopper",emits:["focus","blur","click"],props:["active"],setup(o,n){let{timePickerRef:u}=t.inject(G);const s=t.reactive({parentRect:{x:0,y:0,height:0,width:0},dropdownTop:"0"}),p=t.ref(null),l=t.ref(null),w=()=>{t.nextTick(()=>{s.parentRect=u.value.getBoundingClientRect(),s.dropdownTop=s.parentRect.height+10+"px"})};return t.onMounted(()=>w()),()=>{var g,h;return t.createVNode("div",{class:[C(""),o.active?"active":""],style:{top:s.dropdownTop}},[t.createVNode("div",{ref:p,class:[C("_arrow")]},[o.active]),t.createVNode("div",{ref:l,class:[z(C("_content"))]},[t.createVNode("div",{class:[z(C("_inner"))]},[(h=(g=n.slots).default)==null?void 0:h.call(g)])])])}}}),{n:R,classes:ve}=k("scroll-bar"),ge=t.defineComponent({name:"VIScrollBar",emits:["focus","blur","click","scroll","getRef"],props:["dynamicCss"],directives:{css:P},setup(o,n){const u=t.ref(),s=t.ref(),p=t.ref(),l=t.reactive({realMargin:0,realPadding:0,viewHeight:0,realHeight:"0",maxScrollBoxRange:0,proportion:0,scrollBarHeight:0,maxScrollBarRange:0,scrollBarMovePropor:0,scrollBoxMovePropor:0,translateY:0,startY:0,moveY:0,_move:0,mouseMoving:!1,scrollBoxRealHeight:0,scrollBarViewHeight:0,scrollBoxMaxRange:0});t.onMounted(()=>{t.nextTick(()=>{let a=window.getComputedStyle(p.value).height.replace("px","");l.scrollBoxRealHeight=Number(a);let y=window.getComputedStyle(u.value).height.replace("px","");l.scrollBarViewHeight=Number(y),l.scrollBoxMaxRange=l.scrollBoxRealHeight-l.scrollBarViewHeight,n.emit&&n.emit("getRef",u)})});const w=t.computed(()=>l.scrollBarHeight<l.realHeight.replace("px","")*1),g=function(a){n.emit("scroll",a)},h=function(a){document.addEventListener("mousedown",V),document.addEventListener("mousemove",S)},V=function(a){l.mouseMoving=!0,l.startY=a.clientY},S=function(a){l.moveY=l.startY-a.clientY,r()};document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mousedown",V),l.startY=0,l.moveY=0,l.mouseMoving&&(l.translateY=l._move),l.mouseMoving=!1});const r=function(){let a=0;l.moveY<0?a=l.translateY+Math.abs(l.moveY):l.moveY>=0&&(a=l.translateY-Math.abs(l.moveY)),a<0&&(a=0),a>l.maxScrollBarRange&&(a=l.maxScrollBarRange),l._move=a,s.value.style.transform=`translateY(${a}px)`,u.value.scrollTop=Math.abs(l.scrollBoxMovePropor*a)};return()=>{var a,y;return t.withDirectives(t.createVNode("div",{class:[ve(R())]},[t.createVNode("div",{class:R("left"),ref:u,onScroll:g},[t.createVNode("div",{ref:p},[(y=(a=n.slots).default)==null?void 0:y.call(a)])]),w.value?t.createVNode("div",{ref:s,class:R("right"),style:{height:l.scrollBarHeight+"px"},onMousedown:h},null):""]),[[t.resolveDirective("css"),Object.assign(o.dynamicCss||{},{})]])}}}),{n:we,classes:Ve}=k("time-picker"),Se=t.defineComponent({name:"VITimePicker",emits:["click","inputClick","closeClick","cancelClick","okClick","update:modelValue"],directives:{css:P},props:A,components:{"vi-time-picker-input":he,"vi-time-picker-popper":be,"vi-scroll-bar":ge},setup(o,n){const u=[null,null,null];let s="";const p=e=>e<10?"0"+e:e+"",l=e=>{const i=e.match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return i||console.warn("初始化数据格式不符合规范,已被清空！"),i},w=()=>"xxxxxxxx".replace(/[xy]/g,function(e){var i=0|16*Math.random(),c=e=="x"?i:8|3&i;return c.toString(16)}),g=t.ref();let h=t.ref(),V=t.ref(),S=t.ref();const r=t.reactive({uuid:w(),popperVisible:!1,softFocus:!1,isSubmit:!1,hourList:[],minuteList:[],secondList:[],currentSelect:["","",""]}),a=e=>h=e,y=e=>V=e,N=e=>S=e,x=function(){r.popperVisible=!1,r.softFocus=!1},b=function(e){let i=!1;for(let c=0;c<e.path.length;c++){const d=e.path[c];if(d.classList&&d.classList.value&&d.getAttribute("class").includes("-time-picker")&&d.dataset.id==r.uuid){i=!0;break}}i||(x(),r.isSubmit=!0)};document.addEventListener("mousedown",b);const B=function(e){},m=function(e){},K=function(){n.emit&&n.emit("click")},q=function(e){r.popperVisible=!r.popperVisible,r.isSubmit=!1,o.modelValue||re(),n.emit&&n.emit("inputClick")},J=function(){r.popperVisible=!1,n.emit&&n.emit("closeClick")},W=function(e){const{type:i}=e.target.dataset;r.popperVisible=!1,i=="cancel"?(r.isSubmit=!1,n.emit&&n.emit("update:modelValue",s),n.emit&&n.emit("cancelClick"),I()):i=="ok"&&(r.isSubmit=!0,n.emit&&n.emit("okClick",r.currentSelect))},M=function(e,i){const c={index:{hour:"0",minute:"1",second:"2"},ref:{hour:h,minute:V,second:S}},{num:d,disabled:f}=i.dataset;if(d){if(f=="true")return;r.currentSelect[c.index[e]]=d;const E=Number(r.currentSelect[c.index[e]])*Number(v.value["popper-spinner-number-height"]);c.ref[e].value.scrollTop=E}},Q=function(e){M("hour",e.target)},X=function(e){M("minute",e.target)},Z=function(e){M("second",e.target)},_=function(e,i){const c={timers:{hour:0,minute:1,second:2},ableRange:{hour:"disabledHours",minute:"disabledMinutes",second:"disabledSeconds"}};let d=e.scrollTop,f=Math.round(d/Number(v.value["popper-spinner-number-height"]));if(o[c.ableRange[i]].filter(ae=>ae==f).length>0)return;r.currentSelect[c.timers[i]]=p(f);let se=f*Number(v.value["popper-spinner-number-height"]);u[c.timers[i]]&&(clearTimeout(u[c.timers[i]]),u[c.timers[i]]=null),u[c.timers[i]]=setTimeout(()=>{e.scrollTop=se},200)},ee=function(e){_(e.target,"hour")},te=function(e){_(e.target,"minute")},oe=function(e){_(e.target,"second")},ne=()=>{r.hourList=new Array(24).fill(0).map((e,i)=>i<10?"0"+i:i+""),r.minuteList=new Array(60).fill(0).map((e,i)=>i<10?"0"+i:i+""),r.secondList=new Array(60).fill(0).map((e,i)=>i<10?"0"+i:i+"")},I=function(){s&&(h.value.scrollTop=Number(s.slice(0,2))*Number(v.value["popper-spinner-number-height"]),V.value.scrollTop=Number(s.slice(3,5))*Number(v.value["popper-spinner-number-height"]),S.value.scrollTop=Number(s.slice(6,8))*Number(v.value["popper-spinner-number-height"]))},re=()=>{const e=new Date,i=e.getHours(),c=e.getMinutes(),d=e.getSeconds();r.currentSelect[0]=p(i),r.currentSelect[1]=p(c),r.currentSelect[2]=p(d),h.value.scrollTop=Number(r.currentSelect[0])*Number(v.value["popper-spinner-number-height"]),V.value.scrollTop=Number(r.currentSelect[1])*Number(v.value["popper-spinner-number-height"]),S.value.scrollTop=Number(r.currentSelect[2])*Number(v.value["popper-spinner-number-height"]),n.emit&&n.emit("update:modelValue",r.currentSelect[0]+":"+r.currentSelect[1]+":"+r.currentSelect[2])},L=function(){if(o.modelValue&&l(o.modelValue)){const e=o.modelValue.split(":"),i=o.disabledHours.findIndex(f=>f==e[0])!=-1,c=o.disabledMinutes.findIndex(f=>f==e[1])!=-1,d=o.disabledSeconds.findIndex(f=>f==e[2])!=-1;if(i||c||d)return console.warn("输入的值包含禁用项,已被清空"),n.emit&&n.emit("update:modelValue",""),!0}return!1};t.onBeforeMount(()=>{if(o.modelValue&&l(o.modelValue)&&!L()){const e=o.modelValue.split(":");r.currentSelect[0]=e[0],r.currentSelect[1]=e[1],r.currentSelect[2]=e[2],s=o.modelValue}}),t.onMounted(()=>{ne(),t.nextTick(()=>{I()})});const v=t.computed(()=>Object.assign(A.dynamicCss.default(),o.dynamicCss)),ie=t.computed(()=>{const e={};for(const i in v.value)i.includes("input")&&(e[i]=v.value[i]);return e}),H=t.computed({get(){return L(),o.modelValue},set(e){n.emit&&n.emit("update:modelValue",e)}}),le=t.computed(()=>o.clearable),T=function(e,i){const c={hour:"disabledHours",minute:"disabledMinutes",second:"disabledSeconds"};let d=!1;return o[c[e]].forEach(f=>f==i?d=!0:""),d},D=t.computed(()=>function(e){return T("hour",e)}),$=t.computed(()=>function(e){return T("minute",e)}),Y=t.computed(()=>function(e){return T("second",e)});return t.watchEffect(()=>{const e=r.currentSelect[0],i=r.currentSelect[1],c=r.currentSelect[2];if(!e&&!i&&!c){n.emit&&n.emit("update:modelValue","");return}const d=e+":"+i+":"+c;n.emit&&n.emit("update:modelValue",d)}),t.watchEffect(()=>{r.isSubmit&&(s=o.modelValue,n.emit&&n.emit("update:modelValue",s))}),t.provide(G,{timePickerRef:g}),()=>t.withDirectives(t.createVNode("div",{ref:g,"data-id":r.uuid,class:[Ve(we())],onClick:K},[t.createVNode(t.resolveComponent("vi-time-picker-input"),{placeholder:o.placeholder,modelValue:H.value,"onUpdate:modelValue":e=>H.value=e,onFocus:B,onBlur:m,onClose:J,dynamicCss:ie.value||{},clearable:le.value,readonly:!0,onClick:q},null),t.createVNode(t.resolveComponent("vi-time-picker-popper"),{active:r.popperVisible},{default:()=>[t.createVNode("div",{class:"time-panel"},[t.createVNode("div",{class:"time-panel__content"},[t.createVNode(t.resolveComponent("vi-scroll-bar"),{onGetRef:a,class:"time-panel__spinner time-panel__popper-spinner--hour",onScroll:ee},{default:()=>[t.createVNode("ul",{onClick:Q},[r.hourList.map(e=>t.createVNode("li",{"data-num":e,"data-disabled":D.value(e),class:[r.currentSelect[0]==e?"active":"",D.value(e)?"disabled":""]},[e]))])]}),t.createVNode(t.resolveComponent("vi-scroll-bar"),{onGetRef:y,class:"time-panel__spinner time-panel__popper-spinner--minutes",onScroll:te},{default:()=>[t.createVNode("ul",{onClick:X},[r.minuteList.map(e=>t.createVNode("li",{"data-num":e,"data-disabled":$.value(e),class:[r.currentSelect[1]==e?"active":"",$.value(e)?"disabled":""]},[e]))])]}),t.createVNode(t.resolveComponent("vi-scroll-bar"),{onGetRef:N,class:"time-panel__spinner time-panel__popper-spinner--second",onScroll:oe},{default:()=>[t.createVNode("ul",{onClick:Z},[r.secondList.map(e=>t.createVNode("li",{"data-num":e,"data-disabled":Y.value(e),class:[r.currentSelect[2]==e?"active":"",Y.value(e)?"disabled":""]},[e]))])]})]),t.createVNode("div",{class:"time-panel__footer",onClick:W},[t.createVNode("div",{"data-type":"cancel",class:"time-panel__footer_cancel"},[t.createTextVNode("取消")]),t.createVNode("div",{"data-type":"ok",class:"time-panel__footer_ok"},[t.createTextVNode("确认")])])])]})]),[[t.resolveDirective("css"),v.value||{}]])}}),U=ce(Se,"time-picker");exports.VITimePicker=U;exports.default=U;
