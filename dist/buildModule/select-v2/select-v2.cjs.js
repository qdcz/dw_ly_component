"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),$=(t,n)=>(t.install=function(c){if(t){const s=t.name||t.__name;if(s||n){const r=n?`dw-${n}`:"dw-"+s.replace(/dw/gi,"").toLowerCase();c.component(r,t)}else console.error(t,n,!n)}},t),re=t=>Array.isArray(t);function C(t){const n=`vi-${t}`;return{n:r=>r?r.startsWith("-")?`${n}${r}`:`${n}_${r}`:n,classes:(...r)=>r.map(o=>{if(re(o)){const[u,d,a=null]=o;return u?d:a}return o})}}const N=Symbol("select-v2"),_=function(t,n){for(let[c,s]of Object.entries(n.value))t.style.setProperty("--"+c,s)},z={mounted(t,n){_(t,n)},updated(t,n){_(t,n)},install(t){t.directive("Css",this)}},E={modelValue:{type:[String,Number,Array],default:""},mode:{type:String,default:"single"},list:{type:Array,default:()=>[]},itemLayout:{type:String,default:"co1"},clearable:Boolean,tooltip:Boolean,showMore:Boolean,search:Boolean,searchImg:{type:String,default:"https://cdn-upload.datav.aliyun.com/upload/download/1666233796787-Qfh6D-SR.svg"},placeholder:{type:String,default:"请选择您需要的选项o(*￣▽￣*)ブ"},dynamicCss:{type:Object,default:()=>({"input-box-shadow-x":"0","input-box-shadow-y":"0","input-box-shadow-blur":"0","input-box-shadow-spread":"1","input-box-shadow-color":"#dcdfe6","input-hover-box-shadow-x":"0","input-hover-box-shadow-y":"0","input-hover-box-shadow-blur":"0","input-hover-box-shadow-spread":"1","input-hover-box-shadow-color":"#85a2dd","input-active-box-shadow-x":"0","input-active-box-shadow-y":"0","input-active-box-shadow-blur":"0","input-active-box-shadow-spread":"1","input-active-box-shadow-color":"rgb(0, 94, 255)","input-border-radius":"4","input-line-padding-t":"0","input-line-padding-r":"8","input-line-padding-b":"0","input-line-padding-l":"8","input-bg-color":"rgba(255,255,255)","input-fo-color":"#606266","input-fo-size":"12","input-fo-weight":"600","input-placeholder-fo-color":"gray","input-line-height":"30","input-width":"200","input-text-alight":"start","input-icon-width":"12","input-icon-color":"#000","tag-height":"30","tag-max-width":"80","tag-margin-t":"2","tag-margin-r":"0","tag-margin-b":"2","tag-margin-l":"2","tag-padding-t":"0","tag-padding-r":"5","tag-padding-b":"0","tag-padding-l":"9","tag-border-radius":"4","tag-fo-color":"#909399","tag-fo-size":"10","tag-fo-weight":"500","tag-bg-color":"#f0f2f5","tag-close-size":"12","tag-close-hover-bg-color":"gray","tag-close-hover-fo-color":"#fff","tag-tooltip-bg-color":"#3a81d2","tag-tooltip-fo-color":"#fff","tag-tooltip-fo-size":"12","tag-tooltip-fo-weight":"500","popper-bg-color":"#fff","popper-height":"250","popper-padding":"4","popper-border-radius":"8","popper-z-index":"999","popper-box-shadow-x":"0","popper-box-shadow-y":"0","popper-box-shadow-blur":"12","popper-box-shadow-spread":"0","popper-box-shadow-color":"rgba(0, 0, 0, 0.12)","popper-arrow-height":"6","popper-option-fo-size":"12","popper-option-fo-weight":"500","popper-option-fo-color":"#64666a","popper-option-height":"40","popper-option-padding-lr":"8","popper-option-hover-bg-color":"#f5f7fa","popper-option-active-fo-color":"#409eff","popper-option-active-fo-weight":"600","popper-option-txt-margin-lr":"6","popper-option-fo-alight":"start","popper-search-line-height":"20","popper-search-fo-size":"12","popper-search-fo-color":"gray","popper-search-fo-weight":"500","popper-search-box-shadow-x":"0","popper-search-box-shadow-y":"0","popper-search-box-shadow-blur":"0","popper-search-box-shadow-spread":"1","popper-search-box-shadow-color":"#e0e3e9","popper-search-border-radius":"4","popper-search-padding-t":"4","popper-search-padding-r":"10","popper-search-padding-b":"4","popper-search-padding-l":"30","popper-search-bg-color":"initial","popper-search-inp-bg-color":"initial","popper-search-icon-size":"14","unfold-icon-height":"14","unfold-icon-width":"14","unfold-icon-hover-fo-color":"#00b7ff","unfold-height":"300","unfold-width":"600","unfold-padding-t":"10","unfold-padding-r":"10","unfold-padding-b":"10","unfold-padding-l":"10","unfold-tag-border-radius":"4","unfold-tag-bg-color":"rgb(229, 236, 234)","unfold-tag-hover-bg-color":"#87ceeb","unfold-tag-active-bg-color":"rgb(32, 183, 243)","unfold-tag-padding-t":"8","unfold-tag-padding-r":"16","unfold-tag-padding-b":"8","unfold-tag-padding-l":"16","unfold-tag-margin-t":"0","unfold-tag-margin-r":"8","unfold-tag-margin-b":"8","unfold-tag-margin-l":"0","scroll-bar-width":"4","scroll-bar-bg-color":"rgb(218, 218, 218)","scroll-bar-hover-bg-color":"#87ceeb","ani-transition":".3"})}},{n:ce,classes:se}=C("select-v2-svg-icon"),L=e.defineComponent({name:"VISelectV2SvgIcon",emits:["click"],props:{path:{type:String,default:`M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 
			764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 
			45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z`},height:{type:[String,Number],default:"12"},width:{type:[String,Number],default:"12"},modelValue:{type:[String,Number,Boolean],default:""}},setup(t,n){const c=function(r){n.emit("click",r)},s=function(){return e.createVNode("svg",{class:[se(ce()),"icon"],height:t.height,width:t.width,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",onClick:c},[e.createVNode("path",{fill:"currentColor",d:t.path},null)])};return()=>s()}}),{n:T,classes:ue}=C("select-v2-input"),de=e.defineComponent({name:"VISelectV2Input",emits:["focus","blur","click","clear","mouseenter","mouseleave"],props:{active:{type:[Boolean,String],default:""},placeholder:{type:String,default:"o(*￣▽￣*)ブ"},iconHeight:{type:[Number,String],default:"12"},iconWidth:{type:[Number,String],default:"12"}},components:{"vi-select-v2-svg-icon":L},setup(t,n){const{currentSelect:c,clearable:s,cacheOptionList:r,mode:o}=e.inject(N),u="m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0z",d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z",a=e.reactive({isHover:!1}),g=function(f){n.emit("click",f)},p=function(f){c.value="",n.emit("clear"),f.stopPropagation()},h=function(f){n.emit("focus",f)},m=function(f){n.emit("blur",f)},S=function(f){a.isHover=!0,n.emit("mouseenter")},i=function(f){a.isHover=!1,n.emit("mouseleave")},y=e.computed(()=>r.value[c.value]);return()=>e.createVNode("div",{class:[ue(T(),t.active?"active":"")],onClick:g,onMouseenter:S,onMouseleave:i},[e.createVNode("input",{class:[T("_inner")],placeholder:t.placeholder,onFocus:h,onBlur:m,value:y.value,readonly:!0},null),a.isHover&&c.value&&s.value&&o.value=="single"?e.createVNode(e.resolveComponent("vi-select-v2-svg-icon"),{height:t.iconHeight,width:t.iconWidth,path:d,onClick:p},null):e.createVNode(e.resolveComponent("vi-select-v2-svg-icon"),{height:t.iconHeight,width:t.iconWidth,path:u,class:["arrow",t.active?"turnUp":"turnDown"]},null)])}}),{n:M,classes:Y}=C("select-v2-dropdown"),pe=e.defineComponent({name:"VISelectV2DropDown",emits:["focus","blur","click"],props:["active"],components:{"vi-svg-icon":L},setup(t,n){const{selectRef:c,mode:s,currentSelect:r}=e.inject(N),o=e.reactive({parentRect:{x:0,y:0},dropdownTop:"0"}),u=e.ref(),d=e.ref(),a=()=>{e.nextTick(()=>{o.dropdownTop=c.value.clientHeight+10+"px"})};return e.onMounted(()=>a()),e.watchEffect(()=>{let g=r.value;s.value=="multiple"&&g&&setTimeout(()=>{a()},200)}),()=>{var g,p;return e.createVNode("div",{class:[M("-popper"),t.active?"active":""],style:{top:o.dropdownTop}},[e.createVNode("div",{ref:u,class:[M("-arrow"),t.active?"active":""]},null),e.createVNode("div",{ref:d,class:[Y(M(),t.active?"active":"")]},[e.createVNode("div",{class:[Y(M("_inner"))]},[(p=(g=n.slots).default)==null?void 0:p.call(g)])])])}}}),{n:R,classes:he}=C("select-v2-tag"),ve=e.defineComponent({name:"VISelectV2Tag",emits:["click","closeClick","hover"],props:{label:{type:[Number,String],default:""},value:{type:[Number,String],default:""},tooltip:{type:[Boolean,String],default:!1},height:{type:[Number,String],default:""},width:{type:[Number,String],default:""}},components:{"vi-svg-icon":L},setup(t,n){const{currentSelect:c}=e.inject(N),s="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z",r=function(o){const u=JSON.parse(JSON.stringify(c.value));try{u.forEach((d,a)=>{if(d.value==t.value)throw u.splice(a,1),new Error})}catch{}c.value=u,n.emit&&n.emit("closeClick",{currentClose:{label:t.label,value:t.value},currentSelects:JSON.parse(JSON.stringify(u))}),o.stopPropagation()};return()=>e.createVNode("div",{class:[he(R()),t.tooltip?"useToolTip":""],"data-txt":t.label},[e.createVNode("span",{class:R("_span")},[t.label]),e.createVNode(e.resolveComponent("vi-svg-icon"),{path:s,onClick:r,height:t.height+"px",width:t.width+"px"},null)])}}),{n:k,classes:ge}=C("scroll-bar"),fe=e.defineComponent({name:"VIScrollBar",emits:["focus","blur","click"],props:["dynamicCss"],directives:{css:z},setup(t,n){const{cacheOptionList:c}=e.inject(N),s=e.ref(),r=e.ref(),o=e.reactive({realMargin:0,realPadding:0,viewHeight:0,realHeight:0,maxScrollBoxRange:0,proportion:0,scrollBarHeight:0,maxScrollBarRange:0,scrollBarMovePropor:0,scrollBoxMovePropor:0,translateY:0,startY:0,moveY:0,_move:0,mouseMoving:!1}),u=function(){e.nextTick(()=>{const i=window.getComputedStyle(s.value.children[0]);o.realPadding=t.dynamicCss["popper-padding"]*2,o.realHeight=i.height.replace("px","")*1,o.viewHeight=t.dynamicCss["popper-height"]*1-o.realPadding,o.maxScrollBoxRange=o.realHeight-o.viewHeight,o.proportion=Number((o.viewHeight/o.realHeight).toFixed(1)),o.scrollBarHeight=o.viewHeight*o.proportion,o.maxScrollBarRange=o.viewHeight-o.scrollBarHeight,o.scrollBarMovePropor=o.maxScrollBarRange/o.maxScrollBoxRange,o.scrollBoxMovePropor=o.maxScrollBoxRange/o.maxScrollBarRange})};e.onMounted(()=>{u()}),e.watch(()=>c.value,()=>{u()},{deep:!0,immediate:!1});const d=e.computed(()=>o.scrollBarHeight<o.realHeight),a=function(i){const y=i.target.scrollTop;m(y)},g=function(i){document.addEventListener("mousedown",p),document.addEventListener("mousemove",h)},p=function(i){o.mouseMoving=!0,o.startY=i.clientY},h=function(i){o.moveY=o.startY-i.clientY,S()};document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mousedown",p),o.startY=0,o.moveY=0,o.mouseMoving&&(o.translateY=o._move),o.mouseMoving=!1});const m=function(i){o.mouseMoving||(o.translateY=o.scrollBarMovePropor*i,r.value.style.transform=`translateY(${o.translateY}px)`)},S=function(){let i=0;o.moveY<0?i=o.translateY+Math.abs(o.moveY):o.moveY>=0&&(i=o.translateY-Math.abs(o.moveY)),i<0&&(i=0),i>o.maxScrollBarRange&&(i=o.maxScrollBarRange),o._move=i,r.value.style.transform=`translateY(${i}px)`,s.value.scrollTop=Math.abs(o.scrollBoxMovePropor*i)};return()=>{var i,y;return e.createVNode("div",{class:[ge(k())]},[e.createVNode("div",{class:k("left"),ref:s,onScroll:a},[(y=(i=n.slots).default)==null?void 0:y.call(i)]),d.value?e.createVNode("div",{ref:r,class:k("right"),style:{height:o.scrollBarHeight+"px"},onMousedown:g},null):""])}}}),{n:me,classes:be}=C("select-v2-option"),j=e.defineComponent({name:"VISelectV2Option",emits:["click"],props:["label","value"],components:{"vi-svg-icon":L},setup(t,n){const{currentSelect:c,currentSelectLabel:s,mode:r,dropDownVisible:o,cacheOptionList:u,selectedFn:d,deleteOptionItem:a}=e.inject(N),g=function(){if(r.value=="single")c.value=t.value,s.value=t.label,o.value=!1;else if(r.value=="multiple"){const h=JSON.parse(JSON.stringify(c.value));let m=!1;try{h.forEach((S,i)=>{if(S.value==t.value)throw h.splice(i,1),m=!0,new Error})}catch{}m||h.push({label:t.label,value:t.value}),c.value=h}d({label:t.label,value:t.value})};e.watchEffect(()=>{u.value={key:t.label,value:t.value}}),e.onMounted(()=>{u.value={key:t.label,value:t.value}}),e.onUnmounted(()=>{a(t.value)});const p=e.computed(()=>{if(r.value=="single")return c.value==t.value;if(r.value=="multiple"){let h=!1;try{c.value.forEach(m=>{if(h=m.value==t.value)throw new Error})}catch{}return h}});return()=>e.createVNode("li",{class:[be(me()),p.value?"active":""],onClick:g},[e.createVNode("div",{class:"txt"},[t.label])])}}),{n:x,classes:we}=C("select-v2"),Ve=e.defineComponent({name:"VISelectV2",emits:["focus","blur","update:modelValue","handleSelected","handleClear","mouseenter","mouseleave"],props:E,directives:{css:z},components:{"vi-select-v2-input":de,"vi-select-v2-drop-down":pe,"vi-scroll-bar":fe,"vi-select-v2-tag":ve,"vi-select-v2-svg-icon":L,"vi-select-v2-option":j},setup(t,n){var P;const s="onUpdate:modelValue"in(((P=e.getCurrentInstance())==null?void 0:P.vnode.props)||{}),r=()=>"xxxxxxxx".replace(/[xy]/g,function(l){var v=0|16*Math.random(),w=l=="x"?v:8|3&v;return w.toString(16)}),o=e.ref(),u=e.ref(),d=e.ref(),a=e.reactive({uuid:r(),dropDownVisible:!1,dialogVisible:!1,softFocus:!1,currentSelectLabel:"",OptionList:{},list:[],__inputPlaceholder:"",searchLabel:"",searchValue:""}),g="M955.069071 864.311021 740.015134 649.258107c-3.752464-3.751441-8.841366-5.860475-14.149255-5.860475-5.306866 0-10.395768 2.108011-14.149255 5.860475l-16.692171 16.692171-38.34226-38.34226c53.03796-59.810201 85.298711-138.442072 85.298711-224.478588 0-186.774871-151.952784-338.727655-338.727655-338.727655S64.527642 216.35456 64.527642 403.12943c0 186.775894 151.952784 338.728678 338.727655 338.728678 86.36909 0 165.276231-32.510438 225.170343-85.913718l38.303374 38.303374-17.34504 17.34504c-7.812943 7.813966-7.812943 20.48352 0 28.297486l215.051891 215.052914c3.753487 3.751441 8.841366 5.860475 14.149255 5.860475 5.306866 0 10.395768-2.108011 14.149255-5.860475l62.334697-62.334697C962.883037 884.794541 962.883037 872.124987 955.069071 864.311021zM104.546078 403.12943c0-164.709319 133.9999-298.709219 298.709219-298.709219s298.709219 133.9999 298.709219 298.709219S567.964616 701.839673 403.255297 701.839673 104.546078 567.838749 104.546078 403.12943zM878.585119 912.496463 691.829691 725.741036l34.036187-34.036187 186.755428 186.755428L878.585119 912.496463z",p={popperHeight:"0",inputLineHeight:"0"},h=function(l){let v=!1;const w=l.path||l.composedPath&&l.composedPath();for(let V=0;V<w.length;V++){const B=w[V];if(B.classList&&B.classList.value&&B.getAttribute("class").includes("-select-v2")&&B.dataset.id==a.uuid){v=!0;break}}v||m()};document.addEventListener("mousedown",h);const m=function(){a.dropDownVisible=!1,n.emit&&n.emit("blur")},S=function(l){return new Promise((v,w)=>{v(e.nextTick(()=>window.getComputedStyle(l.value)))})},i=function(l){t.mode=="single"?n.emit&&n.emit("handleSelected",l):e.nextTick(()=>{n.emit&&n.emit("handleSelected",{currentSelected:l,currentSelects:JSON.parse(JSON.stringify(t.modelValue))})})},y=function(l){delete a.OptionList[l]},f=function(l){if(l=="co1")return"";if(l=="auto"||l=="co2"||l=="co3"||l=="co4"||l=="co5"||l=="co6"||l=="co7")return"display:flex;flex-wrap: wrap;"},H=function(l){a.dropDownVisible=!a.dropDownVisible,n.emit&&(a.dropDownVisible?n.emit("focus"):n.emit("blur"))},F=function(l){},A=function(l){},U=function(){n.emit&&n.emit("handleClear")},W=function(){n.emit&&n.emit("mouseenter")},q=function(){n.emit&&n.emit("mouseleave")},K=function(l){n.emit&&n.emit("handleClear",l)},Q=function(l){let v=l.target.value,w={};a.list.forEach(V=>V.label.includes(v)?w[V.value]=V.label:""),a.searchValue=w,a.searchLabel=v,e.nextTick(()=>{I.value})};e.watch(()=>t.list,()=>{a.list=JSON.parse(JSON.stringify(t.list))},{deep:!0,immediate:!0});const D=e.computed({get(){return t.mode=="multiple"&&(async()=>{const{height:l}=await S(d);t.dynamicCss["input-line-height"]=l.replace("px","")*1,O.value=t.modelValue.length>0?" ":t.placeholder,t.modelValue.length<=1&&(t.dynamicCss["input-line-height"]=p.inputLineHeight)})(),t.modelValue},set(l){s&&n.emit("update:modelValue",l)}}),G=e.computed({get(){return a.currentSelectLabel},set(l){a.currentSelectLabel=l}}),I=e.computed({get(){let l=Object.keys(a.OptionList).length;return l<=5&&l>0?a.searchValue||(t.search&&l++,b.value["popper-height"]=b.value["popper-option-height"]*l+b.value["popper-padding"]*2):b.value["popper-height"]=p.popperHeight,a.OptionList},set(l){a.OptionList[l.value]=l.key}}),X=e.computed({get(){return a.dropDownVisible},set(l){a.dropDownVisible=l}}),O=e.computed({get(){return a.__inputPlaceholder||t.placeholder},set(l){a.__inputPlaceholder=l}}),Z=e.computed(()=>t.clearable),ee=e.computed(()=>t.mode),b=e.computed(()=>{let l=Object.assign(E.dynamicCss.default(),t.dynamicCss);return p.popperHeight=l["popper-height"],p.inputLineHeight=l["input-line-height"],l}),te=e.computed(()=>t.mode=="multiple"),oe=e.computed(()=>!!t.searchImg);e.provide(N,{selectRef:o,currentSelect:D,currentSelectLabel:G,mode:ee,dynamicCss:b,dropDownVisible:X,placeholder:O,cacheOptionList:I,clearable:Z,selectedFn:i,deleteOptionItem:y});const le=function(l){return e.createVNode(e.resolveComponent("vi-select-v2-tag"),{tooltip:t.tooltip,label:l.label,value:l.value,height:b.value["tag-close-size"],width:b.value["tag-close-size"],onCloseClick:K},null)},ne=function(){return e.createVNode(e.resolveComponent("vi-select-v2-input"),{iconHeight:b.value["input-icon-width"],iconWidth:b.value["input-icon-width"],ref:u,active:a.dropDownVisible,placeholder:O.value,onClick:H,onFocus:F,onBlur:A,onClear:U,onMouseenter:W,onMouseleave:q},null)},ae=function(){return e.createVNode("li",{class:x("-search")},[oe.value?e.createVNode("img",{class:x("--search"),src:t.searchImg},null):e.createVNode(e.resolveComponent("vi-select-v2-svg-icon"),{class:x("--search"),path:g},null),e.createVNode("input",{value:a.searchLabel,class:x("-search__input"),placeholder:"请输入您要搜索的内容",onInput:Q},null)])},ie=function(){return e.createVNode(e.resolveComponent("vi-select-v2-drop-down"),{active:a.dropDownVisible},{default:()=>[e.createVNode(e.resolveComponent("vi-scroll-bar"),{dynamicCss:b.value},{default:()=>{var l,v;return[e.createVNode("ul",null,[t.search?ae():"",a.searchValue?e.createVNode("div",{style:f(t.itemLayout),class:t.itemLayout},[Object.keys(a.searchValue).map((w,V)=>e.createVNode(e.resolveComponent("vi-select-v2-option"),{key:w,value:w,label:Object.values(a.searchValue)[V]},null))]):e.createVNode("div",{style:f(t.itemLayout),class:t.itemLayout},[(v=(l=n.slots).default)==null?void 0:v.call(l)]),Object.keys(I.value).length<=0?e.createVNode("li",{class:x("-notData")},[e.createTextVNode("暂无数据")]):""])]}})]})};return()=>e.withDirectives(e.createVNode("div",{"data-id":a.uuid,class:[we(x())],ref:o},[te.value?e.createVNode("div",{ref:d,class:x("-taglist"),onClick:H},[D.value.map(l=>le(l))]):"",ne(),ie()]),[[e.resolveDirective("css"),b.value||{}]])}}),J=$(Ve,"select-v2"),Se=$(j,"select-v2-option");exports.VISelectV2=J;exports.VISelectV2Option=Se;exports.default=J;
