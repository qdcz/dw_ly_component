(function(v,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(v=typeof globalThis<"u"?globalThis:v||self,e((v.dw=v.dw||{},v.dw["uiselect-v2"]={}),v.Vue))})(this,function(v,e){"use strict";const D=(t,l)=>(t.install=function(c){if(t){const s=t.name||t.__name;if(s||l){const r=l?`dw-${l}`:"dw-"+s.replace(/dw/gi,"").toLowerCase();c.component(r,t)}else console.error(t,l,!l)}},t),A=t=>Array.isArray(t);function C(t){const l=`vi-${t}`;return{n:r=>r?r.startsWith("-")?`${l}${r}`:`${l}_${r}`:l,classes:(...r)=>r.map(o=>{if(A(o)){const[d,u,a=null]=o;return d?u:a}return o})}}const L=Symbol("select-v2"),P=function(t,l){for(let[c,s]of Object.entries(l.value))t.style.setProperty("--"+c,s)},_={mounted(t,l){P(t,l)},updated(t,l){P(t,l)},install(t){t.directive("Css",this)}},T={modelValue:{type:[String,Number,Array],default:""},mode:{type:String,default:"single"},list:{type:Array,default:()=>[]},itemLayout:{type:String,default:"co1"},clearable:Boolean,tooltip:Boolean,showMore:Boolean,search:Boolean,searchImg:{type:String,default:"https://cdn-upload.datav.aliyun.com/upload/download/1666233796787-Qfh6D-SR.svg"},placeholder:{type:String,default:"请选择您需要的选项o(*￣▽￣*)ブ"},dynamicCss:{type:Object,default:()=>({"input-box-shadow-x":"0","input-box-shadow-y":"0","input-box-shadow-blur":"0","input-box-shadow-spread":"1","input-box-shadow-color":"#dcdfe6","input-hover-box-shadow-x":"0","input-hover-box-shadow-y":"0","input-hover-box-shadow-blur":"0","input-hover-box-shadow-spread":"1","input-hover-box-shadow-color":"#85a2dd","input-active-box-shadow-x":"0","input-active-box-shadow-y":"0","input-active-box-shadow-blur":"0","input-active-box-shadow-spread":"1","input-active-box-shadow-color":"rgb(0, 94, 255)","input-border-radius":"4","input-line-padding-t":"0","input-line-padding-r":"8","input-line-padding-b":"0","input-line-padding-l":"8","input-bg-color":"rgba(255,255,255)","input-fo-color":"#606266","input-fo-size":"12","input-fo-weight":"600","input-placeholder-fo-color":"gray","input-line-height":"30","input-width":"200","input-text-alight":"start","input-icon-width":"12","input-icon-color":"#000","tag-height":"30","tag-max-width":"80","tag-margin-t":"2","tag-margin-r":"0","tag-margin-b":"2","tag-margin-l":"2","tag-padding-t":"0","tag-padding-r":"5","tag-padding-b":"0","tag-padding-l":"9","tag-border-radius":"4","tag-fo-color":"#909399","tag-fo-size":"10","tag-fo-weight":"500","tag-bg-color":"#f0f2f5","tag-close-size":"12","tag-close-hover-bg-color":"gray","tag-close-hover-fo-color":"#fff","tag-tooltip-bg-color":"#3a81d2","tag-tooltip-fo-color":"#fff","tag-tooltip-fo-size":"12","tag-tooltip-fo-weight":"500","popper-bg-color":"#fff","popper-height":"250","popper-padding":"4","popper-border-radius":"8","popper-z-index":"999","popper-box-shadow-x":"0","popper-box-shadow-y":"0","popper-box-shadow-blur":"12","popper-box-shadow-spread":"0","popper-box-shadow-color":"rgba(0, 0, 0, 0.12)","popper-arrow-height":"6","popper-option-fo-size":"12","popper-option-fo-weight":"500","popper-option-fo-color":"#64666a","popper-option-height":"40","popper-option-padding-lr":"8","popper-option-hover-bg-color":"#f5f7fa","popper-option-active-fo-color":"#409eff","popper-option-active-fo-weight":"600","popper-option-txt-margin-lr":"6","popper-option-fo-alight":"start","popper-search-line-height":"20","popper-search-fo-size":"12","popper-search-fo-color":"gray","popper-search-fo-weight":"500","popper-search-box-shadow-x":"0","popper-search-box-shadow-y":"0","popper-search-box-shadow-blur":"0","popper-search-box-shadow-spread":"1","popper-search-box-shadow-color":"#e0e3e9","popper-search-border-radius":"4","popper-search-padding-t":"4","popper-search-padding-r":"10","popper-search-padding-b":"4","popper-search-padding-l":"30","popper-search-bg-color":"initial","popper-search-inp-bg-color":"initial","popper-search-icon-size":"14","unfold-icon-height":"14","unfold-icon-width":"14","unfold-icon-hover-fo-color":"#00b7ff","unfold-height":"300","unfold-width":"600","unfold-padding-t":"10","unfold-padding-r":"10","unfold-padding-b":"10","unfold-padding-l":"10","unfold-tag-border-radius":"4","unfold-tag-bg-color":"rgb(229, 236, 234)","unfold-tag-hover-bg-color":"#87ceeb","unfold-tag-active-bg-color":"rgb(32, 183, 243)","unfold-tag-padding-t":"8","unfold-tag-padding-r":"16","unfold-tag-padding-b":"8","unfold-tag-padding-l":"16","unfold-tag-margin-t":"0","unfold-tag-margin-r":"8","unfold-tag-margin-b":"8","unfold-tag-margin-l":"0","scroll-bar-width":"4","scroll-bar-bg-color":"rgb(218, 218, 218)","scroll-bar-hover-bg-color":"#87ceeb","ani-transition":".3"})}},{n:U,classes:W}=C("select-v2-svg-icon"),B=e.defineComponent({name:"VISelectV2SvgIcon",emits:["click"],props:{path:{type:String,default:`M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 
			764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 
			45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z`},height:{type:[String,Number],default:"12"},width:{type:[String,Number],default:"12"},modelValue:{type:[String,Number,Boolean],default:""}},setup(t,l){const c=function(r){l.emit("click",r)},s=function(){return e.createVNode("svg",{class:[W(U()),"icon"],height:t.height,width:t.width,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",onClick:c},[e.createVNode("path",{fill:"currentColor",d:t.path},null)])};return()=>s()}}),{n:E,classes:q}=C("select-v2-input"),K=e.defineComponent({name:"VISelectV2Input",emits:["focus","blur","click","clear","mouseenter","mouseleave"],props:{active:{type:[Boolean,String],default:""},placeholder:{type:String,default:"o(*￣▽￣*)ブ"},iconHeight:{type:[Number,String],default:"12"},iconWidth:{type:[Number,String],default:"12"}},components:{"vi-select-v2-svg-icon":B},setup(t,l){const{currentSelect:c,clearable:s,cacheOptionList:r,mode:o}=e.inject(L),d="m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0z",u="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z",a=e.reactive({isHover:!1}),f=function(m){l.emit("click",m)},p=function(m){c.value="",l.emit("clear"),m.stopPropagation()},h=function(m){l.emit("focus",m)},b=function(m){l.emit("blur",m)},y=function(m){a.isHover=!0,l.emit("mouseenter")},i=function(m){a.isHover=!1,l.emit("mouseleave")},x=e.computed(()=>r.value[c.value]);return()=>e.createVNode("div",{class:[q(E(),t.active?"active":"")],onClick:f,onMouseenter:y,onMouseleave:i},[e.createVNode("input",{class:[E("_inner")],placeholder:t.placeholder,onFocus:h,onBlur:b,value:x.value,readonly:!0},null),a.isHover&&c.value&&s.value&&o.value=="single"?e.createVNode(e.resolveComponent("vi-select-v2-svg-icon"),{height:t.iconHeight,width:t.iconWidth,path:u,onClick:p},null):e.createVNode(e.resolveComponent("vi-select-v2-svg-icon"),{height:t.iconHeight,width:t.iconWidth,path:d,class:["arrow",t.active?"turnUp":"turnDown"]},null)])}}),{n:M,classes:Y}=C("select-v2-dropdown"),Q=e.defineComponent({name:"VISelectV2DropDown",emits:["focus","blur","click"],props:["active"],components:{"vi-svg-icon":B},setup(t,l){const{selectRef:c,mode:s,currentSelect:r}=e.inject(L),o=e.reactive({parentRect:{x:0,y:0},dropdownTop:"0"}),d=e.ref(),u=e.ref(),a=()=>{e.nextTick(()=>{o.dropdownTop=c.value.clientHeight+10+"px"})};return e.onMounted(()=>a()),e.watchEffect(()=>{let f=r.value;s.value=="multiple"&&f&&setTimeout(()=>{a()},200)}),()=>{var f,p;return e.createVNode("div",{class:[M("-popper"),t.active?"active":""],style:{top:o.dropdownTop}},[e.createVNode("div",{ref:d,class:[M("-arrow"),t.active?"active":""]},null),e.createVNode("div",{ref:u,class:[Y(M(),t.active?"active":"")]},[e.createVNode("div",{class:[Y(M("_inner"))]},[(p=(f=l.slots).default)==null?void 0:p.call(f)])])])}}}),{n:R,classes:G}=C("select-v2-tag"),X=e.defineComponent({name:"VISelectV2Tag",emits:["click","closeClick","hover"],props:{label:{type:[Number,String],default:""},value:{type:[Number,String],default:""},tooltip:{type:[Boolean,String],default:!1},height:{type:[Number,String],default:""},width:{type:[Number,String],default:""}},components:{"vi-svg-icon":B},setup(t,l){const{currentSelect:c}=e.inject(L),s="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z",r=function(o){const d=JSON.parse(JSON.stringify(c.value));try{d.forEach((u,a)=>{if(u.value==t.value)throw d.splice(a,1),new Error})}catch{}c.value=d,l.emit&&l.emit("closeClick",{currentClose:{label:t.label,value:t.value},currentSelects:JSON.parse(JSON.stringify(d))}),o.stopPropagation()};return()=>e.createVNode("div",{class:[G(R()),t.tooltip?"useToolTip":""],"data-txt":t.label},[e.createVNode("span",{class:R("_span")},[t.label]),e.createVNode(e.resolveComponent("vi-svg-icon"),{path:s,onClick:r,height:t.height+"px",width:t.width+"px"},null)])}}),{n:I,classes:Z}=C("scroll-bar"),ee=e.defineComponent({name:"VIScrollBar",emits:["focus","blur","click"],props:["dynamicCss"],directives:{css:_},setup(t,l){const{cacheOptionList:c}=e.inject(L),s=e.ref(),r=e.ref(),o=e.reactive({realMargin:0,realPadding:0,viewHeight:0,realHeight:0,maxScrollBoxRange:0,proportion:0,scrollBarHeight:0,maxScrollBarRange:0,scrollBarMovePropor:0,scrollBoxMovePropor:0,translateY:0,startY:0,moveY:0,_move:0,mouseMoving:!1}),d=function(){e.nextTick(()=>{const i=window.getComputedStyle(s.value.children[0]);o.realPadding=t.dynamicCss["popper-padding"]*2,o.realHeight=i.height.replace("px","")*1,o.viewHeight=t.dynamicCss["popper-height"]*1-o.realPadding,o.maxScrollBoxRange=o.realHeight-o.viewHeight,o.proportion=Number((o.viewHeight/o.realHeight).toFixed(1)),o.scrollBarHeight=o.viewHeight*o.proportion,o.maxScrollBarRange=o.viewHeight-o.scrollBarHeight,o.scrollBarMovePropor=o.maxScrollBarRange/o.maxScrollBoxRange,o.scrollBoxMovePropor=o.maxScrollBoxRange/o.maxScrollBarRange})};e.onMounted(()=>{d()}),e.watch(()=>c.value,()=>{d()},{deep:!0,immediate:!1});const u=e.computed(()=>o.scrollBarHeight<o.realHeight),a=function(i){const x=i.target.scrollTop;b(x)},f=function(i){document.addEventListener("mousedown",p),document.addEventListener("mousemove",h)},p=function(i){o.mouseMoving=!0,o.startY=i.clientY},h=function(i){o.moveY=o.startY-i.clientY,y()};document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mousedown",p),o.startY=0,o.moveY=0,o.mouseMoving&&(o.translateY=o._move),o.mouseMoving=!1});const b=function(i){o.mouseMoving||(o.translateY=o.scrollBarMovePropor*i,r.value.style.transform=`translateY(${o.translateY}px)`)},y=function(){let i=0;o.moveY<0?i=o.translateY+Math.abs(o.moveY):o.moveY>=0&&(i=o.translateY-Math.abs(o.moveY)),i<0&&(i=0),i>o.maxScrollBarRange&&(i=o.maxScrollBarRange),o._move=i,r.value.style.transform=`translateY(${i}px)`,s.value.scrollTop=Math.abs(o.scrollBoxMovePropor*i)};return()=>{var i,x;return e.createVNode("div",{class:[Z(I())]},[e.createVNode("div",{class:I("left"),ref:s,onScroll:a},[(x=(i=l.slots).default)==null?void 0:x.call(i)]),u.value?e.createVNode("div",{ref:r,class:I("right"),style:{height:o.scrollBarHeight+"px"},onMousedown:f},null):""])}}}),{n:te,classes:oe}=C("select-v2-option"),$=e.defineComponent({name:"VISelectV2Option",emits:["click"],props:["label","value"],components:{"vi-svg-icon":B},setup(t,l){const{currentSelect:c,currentSelectLabel:s,mode:r,dropDownVisible:o,cacheOptionList:d,selectedFn:u,deleteOptionItem:a}=e.inject(L),f=function(){if(r.value=="single")c.value=t.value,s.value=t.label,o.value=!1;else if(r.value=="multiple"){const h=JSON.parse(JSON.stringify(c.value));let b=!1;try{h.forEach((y,i)=>{if(y.value==t.value)throw h.splice(i,1),b=!0,new Error})}catch{}b||h.push({label:t.label,value:t.value}),c.value=h}u({label:t.label,value:t.value})};e.watchEffect(()=>{d.value={key:t.label,value:t.value}}),e.onMounted(()=>{d.value={key:t.label,value:t.value}}),e.onUnmounted(()=>{a(t.value)});const p=e.computed(()=>{if(r.value=="single")return c.value==t.value;if(r.value=="multiple"){let h=!1;try{c.value.forEach(b=>{if(h=b.value==t.value)throw new Error})}catch{}return h}});return()=>e.createVNode("li",{class:[oe(te()),p.value?"active":""],onClick:f},[e.createVNode("div",{class:"txt"},[t.label])])}}),{n:N,classes:ne}=C("select-v2"),z=D(e.defineComponent({name:"VISelectV2",emits:["focus","blur","update:modelValue","handleSelected","handleClear","mouseenter","mouseleave"],props:T,directives:{css:_},components:{"vi-select-v2-input":K,"vi-select-v2-drop-down":Q,"vi-scroll-bar":ee,"vi-select-v2-tag":X,"vi-select-v2-svg-icon":B,"vi-select-v2-option":$},setup(t,l){var F;const s="onUpdate:modelValue"in(((F=e.getCurrentInstance())==null?void 0:F.vnode.props)||{}),r=()=>"xxxxxxxx".replace(/[xy]/g,function(n){var g=0|16*Math.random(),V=n=="x"?g:8|3&g;return V.toString(16)}),o=e.ref(),d=e.ref(),u=e.ref(),a=e.reactive({uuid:r(),dropDownVisible:!1,dialogVisible:!1,softFocus:!1,currentSelectLabel:"",OptionList:{},list:[],__inputPlaceholder:"",searchLabel:"",searchValue:""}),f="M955.069071 864.311021 740.015134 649.258107c-3.752464-3.751441-8.841366-5.860475-14.149255-5.860475-5.306866 0-10.395768 2.108011-14.149255 5.860475l-16.692171 16.692171-38.34226-38.34226c53.03796-59.810201 85.298711-138.442072 85.298711-224.478588 0-186.774871-151.952784-338.727655-338.727655-338.727655S64.527642 216.35456 64.527642 403.12943c0 186.775894 151.952784 338.728678 338.727655 338.728678 86.36909 0 165.276231-32.510438 225.170343-85.913718l38.303374 38.303374-17.34504 17.34504c-7.812943 7.813966-7.812943 20.48352 0 28.297486l215.051891 215.052914c3.753487 3.751441 8.841366 5.860475 14.149255 5.860475 5.306866 0 10.395768-2.108011 14.149255-5.860475l62.334697-62.334697C962.883037 884.794541 962.883037 872.124987 955.069071 864.311021zM104.546078 403.12943c0-164.709319 133.9999-298.709219 298.709219-298.709219s298.709219 133.9999 298.709219 298.709219S567.964616 701.839673 403.255297 701.839673 104.546078 567.838749 104.546078 403.12943zM878.585119 912.496463 691.829691 725.741036l34.036187-34.036187 186.755428 186.755428L878.585119 912.496463z",p={popperHeight:"0",inputLineHeight:"0"},h=function(n){let g=!1;const V=n.path||n.composedPath&&n.composedPath();for(let S=0;S<V.length;S++){const O=V[S];if(O.classList&&O.classList.value&&O.getAttribute("class").includes("-select-v2")&&O.dataset.id==a.uuid){g=!0;break}}g||b()};document.addEventListener("mousedown",h);const b=function(){a.dropDownVisible=!1,l.emit&&l.emit("blur")},y=function(n){return new Promise((g,V)=>{g(e.nextTick(()=>window.getComputedStyle(n.value)))})},i=function(n){t.mode=="single"?l.emit&&l.emit("handleSelected",n):e.nextTick(()=>{l.emit&&l.emit("handleSelected",{currentSelected:n,currentSelects:JSON.parse(JSON.stringify(t.modelValue))})})},x=function(n){delete a.OptionList[n]},m=function(n){if(n=="co1")return"";if(n=="auto"||n=="co2"||n=="co3"||n=="co4"||n=="co5"||n=="co6"||n=="co7")return"display:flex;flex-wrap: wrap;"},j=function(n){a.dropDownVisible=!a.dropDownVisible,l.emit&&(a.dropDownVisible?l.emit("focus"):l.emit("blur"))},ae=function(n){},ie=function(n){},re=function(){l.emit&&l.emit("handleClear")},ce=function(){l.emit&&l.emit("mouseenter")},se=function(){l.emit&&l.emit("mouseleave")},de=function(n){l.emit&&l.emit("handleClear",n)},ue=function(n){let g=n.target.value,V={};a.list.forEach(S=>S.label.includes(g)?V[S.value]=S.label:""),a.searchValue=V,a.searchLabel=g,e.nextTick(()=>{k.value})};e.watch(()=>t.list,()=>{a.list=JSON.parse(JSON.stringify(t.list))},{deep:!0,immediate:!0});const J=e.computed({get(){return t.mode=="multiple"&&(async()=>{const{height:n}=await y(u);t.dynamicCss["input-line-height"]=n.replace("px","")*1,H.value=t.modelValue.length>0?" ":t.placeholder,t.modelValue.length<=1&&(t.dynamicCss["input-line-height"]=p.inputLineHeight)})(),t.modelValue},set(n){s&&l.emit("update:modelValue",n)}}),pe=e.computed({get(){return a.currentSelectLabel},set(n){a.currentSelectLabel=n}}),k=e.computed({get(){let n=Object.keys(a.OptionList).length;return n<=5&&n>0?a.searchValue||(t.search&&n++,w.value["popper-height"]=w.value["popper-option-height"]*n+w.value["popper-padding"]*2):w.value["popper-height"]=p.popperHeight,a.OptionList},set(n){a.OptionList[n.value]=n.key}}),he=e.computed({get(){return a.dropDownVisible},set(n){a.dropDownVisible=n}}),H=e.computed({get(){return a.__inputPlaceholder||t.placeholder},set(n){a.__inputPlaceholder=n}}),ge=e.computed(()=>t.clearable),fe=e.computed(()=>t.mode),w=e.computed(()=>{let n=Object.assign(T.dynamicCss.default(),t.dynamicCss);return p.popperHeight=n["popper-height"],p.inputLineHeight=n["input-line-height"],n}),me=e.computed(()=>t.mode=="multiple"),ve=e.computed(()=>!!t.searchImg);e.provide(L,{selectRef:o,currentSelect:J,currentSelectLabel:pe,mode:fe,dynamicCss:w,dropDownVisible:he,placeholder:H,cacheOptionList:k,clearable:ge,selectedFn:i,deleteOptionItem:x});const be=function(n){return e.createVNode(e.resolveComponent("vi-select-v2-tag"),{tooltip:t.tooltip,label:n.label,value:n.value,height:w.value["tag-close-size"],width:w.value["tag-close-size"],onCloseClick:de},null)},we=function(){return e.createVNode(e.resolveComponent("vi-select-v2-input"),{iconHeight:w.value["input-icon-width"],iconWidth:w.value["input-icon-width"],ref:d,active:a.dropDownVisible,placeholder:H.value,onClick:j,onFocus:ae,onBlur:ie,onClear:re,onMouseenter:ce,onMouseleave:se},null)},Ve=function(){return e.createVNode("li",{class:N("-search")},[ve.value?e.createVNode("img",{class:N("--search"),src:t.searchImg},null):e.createVNode(e.resolveComponent("vi-select-v2-svg-icon"),{class:N("--search"),path:f},null),e.createVNode("input",{value:a.searchLabel,class:N("-search__input"),placeholder:"请输入您要搜索的内容",onInput:ue},null)])},Se=function(){return e.createVNode(e.resolveComponent("vi-select-v2-drop-down"),{active:a.dropDownVisible},{default:()=>[e.createVNode(e.resolveComponent("vi-scroll-bar"),{dynamicCss:w.value},{default:()=>{var n,g;return[e.createVNode("ul",null,[t.search?Ve():"",a.searchValue?e.createVNode("div",{style:m(t.itemLayout),class:t.itemLayout},[Object.keys(a.searchValue).map((V,S)=>e.createVNode(e.resolveComponent("vi-select-v2-option"),{key:V,value:V,label:Object.values(a.searchValue)[S]},null))]):e.createVNode("div",{style:m(t.itemLayout),class:t.itemLayout},[(g=(n=l.slots).default)==null?void 0:g.call(n)]),Object.keys(k.value).length<=0?e.createVNode("li",{class:N("-notData")},[e.createTextVNode("暂无数据")]):""])]}})]})};return()=>e.withDirectives(e.createVNode("div",{"data-id":a.uuid,class:[ne(N())],ref:o},[me.value?e.createVNode("div",{ref:u,class:N("-taglist"),onClick:j},[J.value.map(n=>be(n))]):"",we(),Se()]),[[e.resolveDirective("css"),w.value||{}]])}}),"select-v2"),le=D($,"select-v2-option");v.SelectV2=z,v.SelectV2Option=le,v.default=z,Object.defineProperties(v,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
