(function(d,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],t):(d=typeof globalThis<"u"?globalThis:d||self,t((d.dw=d.dw||{},d.dw["uiscroll-bar"]={}),d.Vue))})(this,function(d,t){"use strict";const z=(r,a)=>(r.install=function(u){if(r){const m=r.name||r.__name;if(m||a){const n=a?`dw-${a}`:"dw-"+m.replace(/dw/gi,"").toLowerCase();u.component(n,r)}else console.error(r,a,!a)}},r),j=r=>Array.isArray(r);function H(r){const a=`vi-${r}`;return{n:n=>n?n.startsWith("-")?`${a}${n}`:`${a}_${n}`:a,classes:(...n)=>n.map(c=>{if(j(c)){const[w,e,p=null]=c;return w?e:p}return c})}}const T={height:{type:[String,Boolean],default:"300px"},width:{type:[String,Boolean],default:"auto"},thumbWidth:{type:String,default:"6px"},noResize:Boolean,dynamicCss:{type:Object,default:()=>({"thumb-bg-color":"#d9dfe3"})}};var x=(r=>(r.HORIZONTAL="horizontal",r.VERTICAL="vertical",r))(x||{});const D={type:{type:[String||x],default:"vertical"},height:{type:String,default:"100px"},width:{type:String,default:"6px"},ratioX:{type:String,default:"0px"},ratioY:{type:String,default:"0px"}},_=function(r,a){for(let[u,m]of Object.entries(a.value))r.style.setProperty("--"+u,m)},k={mounted(r,a){_(r,a)},updated(r,a){_(r,a)},install(r){r.directive("Css",this)}},V=Symbol("scroll-bar"),{n:Z}=H("scroll-bar__thumb"),q=t.defineComponent({name:"ScrollBar",emits:["update:height","update:width"],props:D,setup(r,a){const{thumbRatioY:u,thumbRatioX:m,thumbRatioYMaxRange:n,thumbRatioXMaxRange:c,wrapperInnerMaxiMoveProportionY:w,wrapperInnerMaxiMoveProportionX:e,scrollBarRef:p}=t.inject(V),P=t.ref(),b=t.reactive({mouseMoving:!1});let l=0,Y=0,M=0,g=0,v=0,X=0;const W=t.computed({get(){return r.height},set(i){a.emit&&a.emit("update:height",i)}}),S=t.computed({get(){return r.width},set(i){a.emit&&a.emit("update:width",i)}}),C=function(i){if(i=="vertical"){let s=0;const R=v;s=M<0?R+Math.abs(M):R-Math.abs(M),s<0&&(s=0),s>n.value&&(s=n.value),p.value.scrollTop=Math.abs(w.value*s)}else if(i=="horizontal"){let s=0;const R=X;s=g<0?R+Math.abs(g):R-Math.abs(g),s<0&&(s=0),s>c.value&&(s=c.value),p.value.scrollLeft=Math.abs(e.value*s)}},B=function(i){b.mouseMoving=!0,v=Number(u.value.slice(11,-3)),X=Number(m.value.slice(11,-3)),l=Number(i.clientY),Y=Number(i.clientX)},N=function(i){M=l-i.clientY,g=Y-i.clientX,C(r.type)};document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",N),document.removeEventListener("mousedown",B),l=0,Y=0,M=0,g=0,v=0,X=0,b.mouseMoving=!1});const y=i=>{document.addEventListener("mousedown",B),document.addEventListener("mousemove",N)};return()=>t.createVNode("div",{class:Z(),ref:P,style:{height:W.value,width:S.value,transform:r.type=="vertical"?r.ratioY:r.ratioX},onMousedown:y},null)}}),{n:I}=H("scroll-bar"),E=z(t.defineComponent({name:"ScrollBar",emits:["update:width","scroll"],directives:{css:k},props:T,components:{"scroll-bar-thumb":q},setup(r,a){let u=null;const m=o=>{R()},n=t.ref(),c=t.ref(),w=t.ref(),e=t.reactive({wrapperInnerRealHeight:0,wrapperInnerRealWidth:0,wrapperInnerMaxiMoveRangeY:0,wrapperInnerMaxiMoveRangeX:0,wrapperInnerMaxiMoveProportionY:0,wrapperInnerMaxiMoveProportionX:0,thumbHeightProportion:0,thumbWidthProportion:0,thumbHeight:"",thumbWidth:"",thumbRatioX:"",thumbRatioY:"",thumbRatioYMaxRange:0,thumbRatioXMaxRange:0,thumbRatioYProportion:0,thumbRatioXProportion:0,cacheContainerWidth:""});let p=t.ref(!1);t.watch(()=>r.noResize,o=>{o?u==null||u.disconnect():(u=new MutationObserver(m),t.nextTick(()=>{u.observe(c.value,{attributes:!0,childList:!0,subtree:!0})}))},{immediate:!0});const P=t.computed(()=>Object.assign(T.dynamicCss.default(),r.dynamicCss)),b=t.computed(()=>r.height),l=t.computed({get(){return e.cacheContainerWidth},set(o){e.cacheContainerWidth=o}}),Y=t.computed({get(){return e.thumbHeight},set(o){e.thumbHeight=o}}),M=t.computed({get(){return e.thumbWidth},set(o){e.thumbWidth=o}}),g=t.computed({get(){return e.thumbRatioX},set(o){e.thumbRatioX=o}}),v=t.computed({get(){return e.thumbRatioY},set(o){e.thumbRatioY=o}}),X=t.computed(()=>e.thumbRatioYMaxRange),W=t.computed(()=>e.thumbRatioXMaxRange),S=t.computed(()=>e.wrapperInnerMaxiMoveProportionY),C=t.computed(()=>e.wrapperInnerMaxiMoveProportionX),B=o=>{e.thumbRatioY=`translateY(${String(e.thumbRatioYProportion*o)+"px"})`},N=o=>{e.thumbRatioX=`translateX(${String(e.thumbRatioXProportion*o)+"px"})`},y=o=>{n.value.scrollTop=o},i=o=>{n.value.scrollLeft=o},s=(o,h)=>{y(o),i(h)},R=o=>{var h,f;e.wrapperInnerRealHeight=Number((h=c.value)==null?void 0:h.scrollHeight),e.wrapperInnerRealWidth=Number((f=c.value)==null?void 0:f.scrollWidth),e.wrapperInnerMaxiMoveRangeY=e.wrapperInnerRealHeight-Number(b.value.replace("px","")),e.wrapperInnerMaxiMoveRangeX=e.wrapperInnerRealWidth-Number(l.value.replace("px","")),e.thumbHeightProportion=Number(b.value.replace("px",""))/e.wrapperInnerRealHeight,e.thumbWidthProportion=Number(l.value.replace("px",""))/e.wrapperInnerRealWidth,e.thumbHeight=String(e.thumbHeightProportion*Number(b.value.replace("px","")))+"px",e.thumbWidth=String(e.thumbWidthProportion*Number(l.value.replace("px","")))+"px",e.thumbRatioYMaxRange=Number(b.value.replace("px",""))-Number(e.thumbHeight.replace("px","")),e.thumbRatioXMaxRange=Number(l.value.replace("px",""))-Number(e.thumbWidth.replace("px","")),e.thumbRatioYProportion=e.thumbRatioYMaxRange/e.wrapperInnerMaxiMoveRangeY,e.thumbRatioXProportion=e.thumbRatioXMaxRange/e.wrapperInnerMaxiMoveRangeX,e.wrapperInnerMaxiMoveProportionY=e.wrapperInnerMaxiMoveRangeY/e.thumbRatioYMaxRange,e.wrapperInnerMaxiMoveProportionX=e.wrapperInnerMaxiMoveRangeX/e.thumbRatioXMaxRange};t.onMounted(()=>{e.cacheContainerWidth=r.width,R()});const F=o=>{const h=o.target.scrollTop,f=o.target.scrollLeft;B(h),N(f),a.emit&&a.emit("scroll",f,h)},J=()=>{p.value=!0},K=()=>{p.value=!1};t.provide(V,{height:b,thumbRatioY:v,thumbRatioX:g,thumbRatioYMaxRange:X,thumbRatioXMaxRange:W,wrapperInnerMaxiMoveProportionY:S,wrapperInnerMaxiMoveProportionX:C,scrollBarRef:n}),a.expose({setScrollTop:y,setScrollLeft:i,setScrollTo:s});const O=(o=x.VERTICAL)=>{if(r.width===!1||r.height===!1)return"";const h=e.wrapperInnerRealHeight,f=Number(r.height.replace("px","")),G=e.wrapperInnerRealWidth;if(o=="vertical")return f<h?t.createVNode(t.resolveComponent("scroll-bar-thumb"),{ref:w,type:o,height:Y.value,width:r.thumbWidth,ratioX:g.value,ratioY:v.value,class:p.value?"show":"hide"},null):"";if(o=="horizontal"){let L=Number(l.value.replace("px",""));if(l.value=="auto"){const A=()=>{l.value="auto",t.nextTick(()=>{var $;L=Number(($=c.value)==null?void 0:$.clientWidth),l.value=L+"px",R()})};A(),window.onresize=()=>A()}else if(l.value)return L<G?t.createVNode(t.resolveComponent("scroll-bar-thumb"),{ref:w,type:o,height:r.thumbWidth,width:M.value,ratioX:g.value,ratioY:v.value,class:p.value?"show":"hide"},null):""}};return()=>{var o,h;return t.withDirectives(t.createVNode("div",{class:I(),style:{width:l.value},onMouseenter:J,onMouseleave:K},[t.createVNode("div",{class:I("_wrapper"),ref:n,style:{height:b.value,width:l.value},onScroll:F},[t.createVNode("div",{class:I("_view"),ref:c},[(h=(o=a.slots).default)==null?void 0:h.call(o)])]),t.createVNode("div",{class:[I("_bar"),"horizontal"]},[O(x.HORIZONTAL)]),t.createVNode("div",{class:[I("_bar"),"vertical"]},[O(x.VERTICAL)])]),[[t.resolveDirective("css"),P.value||{}]])}}}),"scroll-bar");d.ScrollBar=E,d.default=E,Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
