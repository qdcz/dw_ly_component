(function(d,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],t):(d=typeof globalThis<"u"?globalThis:d||self,t((d.dw=d.dw||{},d.dw["uiscroll-bar"]={}),d.Vue))})(this,function(d,t){"use strict";const j=(r,a)=>(r.install=function(b){if(r){const s=r.name||r.__name;if(s||a){const u=a?`dw-${a}`:"dw-"+s.replace(/dw/gi,"").toLowerCase();b.component(u,r)}else console.error(r,a,!a)}},r),D=r=>Array.isArray(r);function T(r){const a=`vi-${r}`;return{n:u=>u?u.startsWith("-")?`${a}${u}`:`${a}_${u}`:a,classes:(...u)=>u.map(h=>{if(D(h)){const[p,x,e=null]=h;return p?x:e}return h})}}const _={height:{type:[String,Boolean],default:"300px"},width:{type:[String,Boolean],default:"auto"},thumbWidth:{type:String,default:"6px"},noResize:Boolean,dynamicCss:{type:Object,default:()=>({"thumb-bg-color":"#d9dfe3"})}};var Y=(r=>(r.HORIZONTAL="horizontal",r.VERTICAL="vertical",r))(Y||{});const k={type:{type:[String||Y],default:"vertical"},height:{type:String,default:"100px"},width:{type:String,default:"6px"},ratioX:{type:String,default:"0px"},ratioY:{type:String,default:"0px"}},O=function(r,a){for(let[b,s]of Object.entries(a.value))r.style.setProperty("--"+b,s)},Z={mounted(r,a){O(r,a)},updated(r,a){O(r,a)},install(r){r.directive("Css",this)}},V=Symbol("scroll-bar"),{n:q}=T("scroll-bar__thumb"),F=t.defineComponent({name:"ScrollBar",emits:["update:height","update:width"],props:k,setup(r,a){const{thumbRatioY:b,thumbRatioX:s,thumbRatioYMaxRange:u,thumbRatioXMaxRange:h,wrapperInnerMaxiMoveProportionY:p,wrapperInnerMaxiMoveProportionX:x,scrollBarRef:e}=t.inject(V),I=t.ref(),B=t.reactive({mouseMoving:!1});let m=0,l=0,g=0,R=0,v=0,M=0;const P=t.computed({get(){return r.height},set(n){a.emit&&a.emit("update:height",n)}}),W=t.computed({get(){return r.width},set(n){a.emit&&a.emit("update:width",n)}}),S=function(n){if(n=="vertical"){let i=0;const f=v;i=g<0?f+Math.abs(g):f-Math.abs(g),i<0&&(i=0),i>u.value&&(i=u.value),e.value.scrollTop=Math.abs(p.value*i)}else if(n=="horizontal"){let i=0;const f=M;i=R<0?f+Math.abs(R):f-Math.abs(R),i<0&&(i=0),i>h.value&&(i=h.value),e.value.scrollLeft=Math.abs(x.value*i)}},N=function(n){B.mouseMoving=!0,v=Number(b.value.slice(11,-3)),M=Number(s.value.slice(11,-3)),m=Number(n.clientY),l=Number(n.clientX)},y=function(n){g=m-n.clientY,R=l-n.clientX,S(r.type)};document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mousedown",N),m=0,l=0,g=0,R=0,v=0,M=0,B.mouseMoving=!1});const C=n=>{document.addEventListener("mousedown",N),document.addEventListener("mousemove",y)};return()=>t.createVNode("div",{class:q(),ref:I,style:{height:P.value,width:W.value,transform:r.type=="vertical"?r.ratioY:r.ratioX},onMousedown:C},null)}}),{n:X}=T("scroll-bar"),E=j(t.defineComponent({name:"ScrollBar",emits:["update:width","scroll"],directives:{css:Z},props:_,components:{"scroll-bar-thumb":F},setup(r,a){let s=null;const u=o=>{L()},h=t.ref(),p=t.ref(),x=t.ref(),e=t.reactive({wrapperInnerRealHeight:0,wrapperInnerRealWidth:0,wrapperInnerMaxiMoveRangeY:0,wrapperInnerMaxiMoveRangeX:0,wrapperInnerMaxiMoveProportionY:0,wrapperInnerMaxiMoveProportionX:0,thumbHeightProportion:0,thumbWidthProportion:0,thumbHeight:"",thumbWidth:"",thumbRatioX:"",thumbRatioY:"",thumbRatioYMaxRange:0,thumbRatioXMaxRange:0,thumbRatioYProportion:0,thumbRatioXProportion:0,cacheContainerWidth:""});let I=t.ref(!1);t.watch(()=>r.noResize,o=>{o?s==null||s.disconnect():(s=new MutationObserver(u),t.nextTick(()=>{s.observe(p.value,{attributes:!0,childList:!0,subtree:!0})}))},{immediate:!0});const B=t.computed(()=>Object.assign(_.dynamicCss.default(),r.dynamicCss)),m=t.computed(()=>r.height),l=t.computed({get(){return e.cacheContainerWidth},set(o){e.cacheContainerWidth=o}}),g=t.computed({get(){return e.thumbHeight},set(o){e.thumbHeight=o}}),R=t.computed({get(){return e.thumbWidth},set(o){e.thumbWidth=o}}),v=t.computed({get(){return e.thumbRatioX},set(o){e.thumbRatioX=o}}),M=t.computed({get(){return e.thumbRatioY},set(o){e.thumbRatioY=o}}),P=t.computed(()=>e.thumbRatioYMaxRange),W=t.computed(()=>e.thumbRatioXMaxRange),S=t.computed(()=>e.wrapperInnerMaxiMoveProportionY),N=t.computed(()=>e.wrapperInnerMaxiMoveProportionX),y=o=>{e.thumbRatioY=`translateY(${String(e.thumbRatioYProportion*o)+"px"})`},C=o=>{e.thumbRatioX=`translateX(${String(e.thumbRatioXProportion*o)+"px"})`},n=o=>{h.value.scrollTop=o},i=o=>{h.value.scrollLeft=o},f=(o,c)=>{n(o),i(c)},L=o=>{var c,w;e.wrapperInnerRealHeight=Number((c=p.value)==null?void 0:c.scrollHeight),e.wrapperInnerRealWidth=Number((w=p.value)==null?void 0:w.scrollWidth),e.wrapperInnerMaxiMoveRangeY=e.wrapperInnerRealHeight-Number(m.value.replace("px","")),e.wrapperInnerMaxiMoveRangeX=e.wrapperInnerRealWidth-Number(l.value.replace("px","")),e.thumbHeightProportion=Number(m.value.replace("px",""))/e.wrapperInnerRealHeight,e.thumbWidthProportion=Number(l.value.replace("px",""))/e.wrapperInnerRealWidth,e.thumbHeight=String(e.thumbHeightProportion*Number(m.value.replace("px","")))+"px",e.thumbWidth=String(e.thumbWidthProportion*Number(l.value.replace("px","")))+"px",e.thumbRatioYMaxRange=Number(m.value.replace("px",""))-Number(e.thumbHeight.replace("px","")),e.thumbRatioXMaxRange=Number(l.value.replace("px",""))-Number(e.thumbWidth.replace("px","")),e.thumbRatioYProportion=e.thumbRatioYMaxRange/e.wrapperInnerMaxiMoveRangeY,e.thumbRatioXProportion=e.thumbRatioXMaxRange/e.wrapperInnerMaxiMoveRangeX,e.wrapperInnerMaxiMoveProportionY=e.wrapperInnerMaxiMoveRangeY/e.thumbRatioYMaxRange,e.wrapperInnerMaxiMoveProportionX=e.wrapperInnerMaxiMoveRangeX/e.thumbRatioXMaxRange};t.onMounted(()=>{e.cacheContainerWidth=r.width,L()});const J=o=>{const c=o.target.scrollTop,w=o.target.scrollLeft;y(c),C(w),a.emit&&a.emit("scroll",w,c)},K=()=>{I.value=!0},G=()=>{I.value=!1};t.provide(V,{height:m,thumbRatioY:M,thumbRatioX:v,thumbRatioYMaxRange:P,thumbRatioXMaxRange:W,wrapperInnerMaxiMoveProportionY:S,wrapperInnerMaxiMoveProportionX:N,scrollBarRef:h}),a.expose({setScrollTop:n,setScrollLeft:i,setScrollTo:f});const A=(o=Y.VERTICAL)=>{if(r.width===!1||r.height===!1)return"";const c=e.wrapperInnerRealHeight,w=Number(r.height.replace("px","")),Q=e.wrapperInnerRealWidth;if(o=="vertical")return w<c?t.createVNode(t.resolveComponent("scroll-bar-thumb"),{ref:x,type:o,height:g.value,width:r.thumbWidth,ratioX:v.value,ratioY:M.value,class:I.value?"show":"hide"},null):"";if(o=="horizontal"){let H=Number(l.value.replace("px",""));if(l.value=="auto"){const z=()=>{l.value="auto",t.nextTick(()=>{var $;H=Number(($=p.value)==null?void 0:$.clientWidth),l.value=H+"px",L()})};z(),window.onresize=()=>z()}else if(l.value)return H<Q?t.createVNode(t.resolveComponent("scroll-bar-thumb"),{ref:x,type:o,height:r.thumbWidth,width:R.value,ratioX:v.value,ratioY:M.value,class:I.value?"show":"hide"},null):""}};return()=>{var o,c;return t.withDirectives(t.createVNode("div",{class:X(),style:{width:l.value},onMouseenter:K,onMouseleave:G},[t.createVNode("div",{class:X("_wrapper"),ref:h,style:{height:m.value,width:l.value},onScroll:J},[t.createVNode("div",{class:X("_view"),ref:p},[(c=(o=a.slots).default)==null?void 0:c.call(o)])]),t.createVNode("div",{class:[X("_bar"),"horizontal"]},[A(Y.HORIZONTAL)]),t.createVNode("div",{class:[X("_bar"),"vertical"]},[A(Y.VERTICAL)])]),[[t.resolveDirective("css"),B.value||{}]])}}}),"scroll-bar");d.ScrollBar=E,d.default=E,Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
