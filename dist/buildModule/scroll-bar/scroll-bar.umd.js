(function(c,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],t):(c=typeof globalThis<"u"?globalThis:c||self,t((c.dw=c.dw||{},c.dw["uiscroll-bar"]={}),c.Vue))})(this,function(c,t){"use strict";const j=(r,a)=>(r.install=function(h){if(r){const u=r.name||r.__name;if(u||a){const s=a?`dw-${a}`:"dw-"+u.replace(/dw/gi,"").toLowerCase();h.component(s,r)}else console.error(r,a,!a)}},r),z=r=>Array.isArray(r);function L(r){const a=`vi-${r}`;return{n:s=>s?s.startsWith("-")?`${a}${s}`:`${a}_${s}`:a,classes:(...s)=>s.map(m=>{if(z(m)){const[p,f,e=null]=m;return p?f:e}return m})}}const _={height:{type:[String,Boolean],default:"300px"},width:{type:[String,Boolean],default:"auto"},thumbWidth:{type:String,default:"6px"},noResize:Boolean,dynamicCss:{type:Object,default:()=>({"thumb-bg-color":"#d9dfe3"})}};var Y=(r=>(r.HORIZONTAL="horizontal",r.VERTICAL="vertical",r))(Y||{});const D={type:{type:[String||Y],default:"vertical"},height:{type:String,default:"100px"},width:{type:String,default:"6px"},ratioX:{type:String,default:"0px"},ratioY:{type:String,default:"0px"}},T=function(r,a){for(let[h,u]of Object.entries(a.value))r.style.setProperty("--"+h,u)},k={mounted(r,a){T(r,a)},updated(r,a){T(r,a)},install(r){r.directive("Css",this)}},V=Symbol("scroll-bar"),{n:Z}=L("scroll-bar__thumb"),q=t.defineComponent({name:"ScrollBar",emits:["update:height","update:width"],props:D,setup(r,a){const{thumbRatioY:h,thumbRatioX:u,thumbRatioYMaxRange:s,thumbRatioXMaxRange:m,wrapperInnerMaxiMoveProportionY:p,wrapperInnerMaxiMoveProportionX:f,scrollBarRef:e}=t.inject(V),x=t.ref(),B=t.reactive({mouseMoving:!1});let d=0,i=0,g=0,R=0,M=0,v=0;const P=t.computed({get(){return r.height},set(n){a.emit&&a.emit("update:height",n)}}),W=t.computed({get(){return r.width},set(n){a.emit&&a.emit("update:width",n)}}),C=function(n){if(n=="vertical"){let l=0;const w=M;l=g<0?w+Math.abs(g):w-Math.abs(g),l<0&&(l=0),l>s.value&&(l=s.value),e.value.scrollTop=Math.abs(p.value*l)}else if(n=="horizontal"){let l=0;const w=v;l=R<0?w+Math.abs(R):w-Math.abs(R),l<0&&(l=0),l>m.value&&(l=m.value),e.value.scrollLeft=Math.abs(f.value*l)}},N=function(n){B.mouseMoving=!0,M=Number(h.value.slice(11,-3)),v=Number(u.value.slice(11,-3)),d=Number(n.clientY),i=Number(n.clientX)},y=function(n){g=d-n.clientY,R=i-n.clientX,C(r.type)};document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mousedown",N),d=0,i=0,g=0,R=0,M=0,v=0,B.mouseMoving=!1});const S=n=>{document.addEventListener("mousedown",N),document.addEventListener("mousemove",y)};return()=>t.createVNode("div",{class:Z(),ref:x,style:{height:P.value,width:W.value,transform:r.type=="vertical"?r.ratioY:r.ratioX},onMousedown:S},null)}}),{n:X}=L("scroll-bar"),E=j(t.defineComponent({name:"ScrollBar",emits:["update:width"],directives:{css:k},props:_,components:{"scroll-bar-thumb":q},setup(r,a){let h,u=null;const s=o=>{n()},m=t.ref(),p=t.ref(),f=t.ref(),e=t.reactive({wrapperInnerRealHeight:0,wrapperInnerRealWidth:0,wrapperInnerMaxiMoveRangeY:0,wrapperInnerMaxiMoveRangeX:0,wrapperInnerMaxiMoveProportionY:0,wrapperInnerMaxiMoveProportionX:0,thumbHeightProportion:0,thumbWidthProportion:0,thumbHeight:"",thumbWidth:"",thumbRatioX:"",thumbRatioY:"",thumbRatioYMaxRange:0,thumbRatioXMaxRange:0,thumbRatioYProportion:0,thumbRatioXProportion:0,cacheContainerWidth:""});let x=t.ref(!1);t.watch(()=>r.noResize,o=>{o?(h==null||h(),u==null||u.disconnect()):(u=new MutationObserver(s),t.nextTick(()=>{u.observe(p.value,{attributes:!0,childList:!0,subtree:!0})}))},{immediate:!0});const B=t.computed(()=>Object.assign(_.dynamicCss.default(),r.dynamicCss)),d=t.computed(()=>r.height),i=t.computed({get(){return e.cacheContainerWidth},set(o){e.cacheContainerWidth=o}}),g=t.computed({get(){return e.thumbHeight},set(o){e.thumbHeight=o}}),R=t.computed({get(){return e.thumbWidth},set(o){e.thumbWidth=o}}),M=t.computed({get(){return e.thumbRatioX},set(o){e.thumbRatioX=o}}),v=t.computed({get(){return e.thumbRatioY},set(o){e.thumbRatioY=o}}),P=t.computed(()=>e.thumbRatioYMaxRange),W=t.computed(()=>e.thumbRatioXMaxRange),C=t.computed(()=>e.wrapperInnerMaxiMoveProportionY),N=t.computed(()=>e.wrapperInnerMaxiMoveProportionX),y=o=>{e.thumbRatioY=`translateY(${String(e.thumbRatioYProportion*o)+"px"})`},S=o=>{e.thumbRatioX=`translateX(${String(e.thumbRatioXProportion*o)+"px"})`},n=o=>{var b,I;e.wrapperInnerRealHeight=Number((b=p.value)==null?void 0:b.scrollHeight),e.wrapperInnerRealWidth=Number((I=p.value)==null?void 0:I.scrollWidth),e.wrapperInnerMaxiMoveRangeY=e.wrapperInnerRealHeight-Number(d.value.replace("px","")),e.wrapperInnerMaxiMoveRangeX=e.wrapperInnerRealWidth-Number(i.value.replace("px","")),e.thumbHeightProportion=Number(d.value.replace("px",""))/e.wrapperInnerRealHeight,e.thumbWidthProportion=Number(i.value.replace("px",""))/e.wrapperInnerRealWidth,e.thumbHeight=String(e.thumbHeightProportion*Number(d.value.replace("px","")))+"px",e.thumbWidth=String(e.thumbWidthProportion*Number(i.value.replace("px","")))+"px",e.thumbRatioYMaxRange=Number(d.value.replace("px",""))-Number(e.thumbHeight.replace("px","")),e.thumbRatioXMaxRange=Number(i.value.replace("px",""))-Number(e.thumbWidth.replace("px","")),e.thumbRatioYProportion=e.thumbRatioYMaxRange/e.wrapperInnerMaxiMoveRangeY,e.thumbRatioXProportion=e.thumbRatioXMaxRange/e.wrapperInnerMaxiMoveRangeX,e.wrapperInnerMaxiMoveProportionY=e.wrapperInnerMaxiMoveRangeY/e.thumbRatioYMaxRange,e.wrapperInnerMaxiMoveProportionX=e.wrapperInnerMaxiMoveRangeX/e.thumbRatioXMaxRange};t.onMounted(()=>{e.cacheContainerWidth=r.width,n()});const l=o=>{const b=o.target.scrollTop,I=o.target.scrollLeft;y(b),S(I)},w=o=>{x.value=!0},F=o=>{x.value=!1};t.provide(V,{height:d,thumbRatioY:v,thumbRatioX:M,thumbRatioYMaxRange:P,thumbRatioXMaxRange:W,wrapperInnerMaxiMoveProportionY:C,wrapperInnerMaxiMoveProportionX:N,scrollBarRef:m});const A=(o=Y.VERTICAL)=>{if(r.width===!1||r.height===!1)return"";const b=e.wrapperInnerRealHeight,I=Number(r.height.replace("px","")),J=e.wrapperInnerRealWidth;if(o=="vertical")return I<b?t.createVNode(t.resolveComponent("scroll-bar-thumb"),{ref:f,type:o,height:g.value,width:r.thumbWidth,ratioX:M.value,ratioY:v.value,class:x.value?"show":"hide"},null):"";if(o=="horizontal"){let H=Number(i.value.replace("px",""));if(i.value=="auto"){const O=()=>{i.value="auto",t.nextTick(()=>{var $;H=Number(($=p.value)==null?void 0:$.clientWidth),i.value=H+"px",n()})};O(),window.onresize=()=>O()}else if(i.value)return H<J?t.createVNode(t.resolveComponent("scroll-bar-thumb"),{ref:f,type:o,height:r.thumbWidth,width:R.value,ratioX:M.value,ratioY:v.value,class:x.value?"show":"hide"},null):""}};return()=>{var o,b;return t.withDirectives(t.createVNode("div",{class:X(),style:{width:i.value},onMouseenter:w,onMouseleave:F},[t.createVNode("div",{class:X("_wrapper"),ref:m,style:{height:d.value,width:i.value},onScroll:l},[t.createVNode("div",{class:X("_view"),ref:p},[(b=(o=a.slots).default)==null?void 0:b.call(o)])]),t.createVNode("div",{class:[X("_bar"),"horizontal"]},[A(Y.HORIZONTAL)]),t.createVNode("div",{class:[X("_bar"),"vertical"]},[A(Y.VERTICAL)])]),[[t.resolveDirective("css"),B.value||{}]])}}}),"scroll-bar");c.ScrollBar=E,c.default=E,Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
