(function(d,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],t):(d=typeof globalThis<"u"?globalThis:d||self,t((d.dw=d.dw||{},d.dw["uiscroll-bar"]={}),d.Vue))})(this,function(d,t){"use strict";const z=(r,a)=>(r.install=function(m){if(r){const u=r.name||r.__name;if(u||a){const s=a?`dw-${a}`:"dw-"+u.replace(/dw/gi,"").toLowerCase();m.component(s,r)}else console.error(r,a,!a)}},r),D=r=>Array.isArray(r);function T(r){const a=`vi-${r}`;return{n:s=>s?s.startsWith("-")?`${a}${s}`:`${a}_${s}`:a,classes:(...s)=>s.map(h=>{if(D(h)){const[b,x,e=null]=h;return b?x:e}return h})}}const _={height:{type:[String,Boolean],default:"300px"},width:{type:[String,Boolean],default:"auto"},thumbWidth:{type:String,default:"6px"},noResize:Boolean,dynamicCss:{type:Object,default:()=>({"thumb-bg-color":"#d9dfe3"})}};var Y=(r=>(r.HORIZONTAL="horizontal",r.VERTICAL="vertical",r))(Y||{});const k={type:{type:[String||Y],default:"vertical"},height:{type:String,default:"100px"},width:{type:String,default:"6px"},ratioX:{type:String,default:"0px"},ratioY:{type:String,default:"0px"}},V=function(r,a){for(let[m,u]of Object.entries(a.value))r.style.setProperty("--"+m,u)},Z={mounted(r,a){V(r,a)},updated(r,a){V(r,a)},install(r){r.directive("Css",this)}},E=Symbol("scroll-bar"),{n:q}=T("scroll-bar__thumb"),F=t.defineComponent({name:"ScrollBar",emits:["update:height","update:width"],props:k,setup(r,a){const{thumbRatioY:m,thumbRatioX:u,thumbRatioYMaxRange:s,thumbRatioXMaxRange:h,wrapperInnerMaxiMoveProportionY:b,wrapperInnerMaxiMoveProportionX:x,scrollBarRef:e}=t.inject(E),I=t.ref(),B=t.reactive({mouseMoving:!1});let p=0,l=0,g=0,R=0,M=0,v=0;const P=t.computed({get(){return r.height},set(n){a.emit&&a.emit("update:height",n)}}),W=t.computed({get(){return r.width},set(n){a.emit&&a.emit("update:width",n)}}),S=function(n){if(n=="vertical"){let i=0;const f=M;i=g<0?f+Math.abs(g):f-Math.abs(g),i<0&&(i=0),i>s.value&&(i=s.value),e.value.scrollTop=Math.abs(b.value*i)}else if(n=="horizontal"){let i=0;const f=v;i=R<0?f+Math.abs(R):f-Math.abs(R),i<0&&(i=0),i>h.value&&(i=h.value),e.value.scrollLeft=Math.abs(x.value*i)}},N=function(n){B.mouseMoving=!0,M=Number(m.value.slice(11,-3)),v=Number(u.value.slice(11,-3)),p=Number(n.clientY),l=Number(n.clientX)},y=function(n){g=p-n.clientY,R=l-n.clientX,S(r.type)};document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mousedown",N),p=0,l=0,g=0,R=0,M=0,v=0,B.mouseMoving=!1});const C=n=>{document.addEventListener("mousedown",N),document.addEventListener("mousemove",y)};return()=>t.createVNode("div",{class:q(),ref:I,style:{height:P.value,width:W.value,transform:r.type=="vertical"?r.ratioY:r.ratioX},onMousedown:C},null)}}),{n:X}=T("scroll-bar"),A=z(t.defineComponent({name:"ScrollBar",emits:["update:width","scroll"],directives:{css:Z},props:_,components:{"scroll-bar-thumb":F},setup(r,a){let m,u=null;const s=o=>{L()},h=t.ref(),b=t.ref(),x=t.ref(),e=t.reactive({wrapperInnerRealHeight:0,wrapperInnerRealWidth:0,wrapperInnerMaxiMoveRangeY:0,wrapperInnerMaxiMoveRangeX:0,wrapperInnerMaxiMoveProportionY:0,wrapperInnerMaxiMoveProportionX:0,thumbHeightProportion:0,thumbWidthProportion:0,thumbHeight:"",thumbWidth:"",thumbRatioX:"",thumbRatioY:"",thumbRatioYMaxRange:0,thumbRatioXMaxRange:0,thumbRatioYProportion:0,thumbRatioXProportion:0,cacheContainerWidth:""});let I=t.ref(!1);t.watch(()=>r.noResize,o=>{o?(m==null||m(),u==null||u.disconnect()):(u=new MutationObserver(s),t.nextTick(()=>{u.observe(b.value,{attributes:!0,childList:!0,subtree:!0})}))},{immediate:!0});const B=t.computed(()=>Object.assign(_.dynamicCss.default(),r.dynamicCss)),p=t.computed(()=>r.height),l=t.computed({get(){return e.cacheContainerWidth},set(o){e.cacheContainerWidth=o}}),g=t.computed({get(){return e.thumbHeight},set(o){e.thumbHeight=o}}),R=t.computed({get(){return e.thumbWidth},set(o){e.thumbWidth=o}}),M=t.computed({get(){return e.thumbRatioX},set(o){e.thumbRatioX=o}}),v=t.computed({get(){return e.thumbRatioY},set(o){e.thumbRatioY=o}}),P=t.computed(()=>e.thumbRatioYMaxRange),W=t.computed(()=>e.thumbRatioXMaxRange),S=t.computed(()=>e.wrapperInnerMaxiMoveProportionY),N=t.computed(()=>e.wrapperInnerMaxiMoveProportionX),y=o=>{e.thumbRatioY=`translateY(${String(e.thumbRatioYProportion*o)+"px"})`},C=o=>{e.thumbRatioX=`translateX(${String(e.thumbRatioXProportion*o)+"px"})`},n=o=>{h.value.scrollTop=o},i=o=>{h.value.scrollLeft=o},f=(o,c)=>{n(o),i(c)},L=o=>{var c,w;e.wrapperInnerRealHeight=Number((c=b.value)==null?void 0:c.scrollHeight),e.wrapperInnerRealWidth=Number((w=b.value)==null?void 0:w.scrollWidth),e.wrapperInnerMaxiMoveRangeY=e.wrapperInnerRealHeight-Number(p.value.replace("px","")),e.wrapperInnerMaxiMoveRangeX=e.wrapperInnerRealWidth-Number(l.value.replace("px","")),e.thumbHeightProportion=Number(p.value.replace("px",""))/e.wrapperInnerRealHeight,e.thumbWidthProportion=Number(l.value.replace("px",""))/e.wrapperInnerRealWidth,e.thumbHeight=String(e.thumbHeightProportion*Number(p.value.replace("px","")))+"px",e.thumbWidth=String(e.thumbWidthProportion*Number(l.value.replace("px","")))+"px",e.thumbRatioYMaxRange=Number(p.value.replace("px",""))-Number(e.thumbHeight.replace("px","")),e.thumbRatioXMaxRange=Number(l.value.replace("px",""))-Number(e.thumbWidth.replace("px","")),e.thumbRatioYProportion=e.thumbRatioYMaxRange/e.wrapperInnerMaxiMoveRangeY,e.thumbRatioXProportion=e.thumbRatioXMaxRange/e.wrapperInnerMaxiMoveRangeX,e.wrapperInnerMaxiMoveProportionY=e.wrapperInnerMaxiMoveRangeY/e.thumbRatioYMaxRange,e.wrapperInnerMaxiMoveProportionX=e.wrapperInnerMaxiMoveRangeX/e.thumbRatioXMaxRange};t.onMounted(()=>{e.cacheContainerWidth=r.width,L()});const J=o=>{const c=o.target.scrollTop,w=o.target.scrollLeft;y(c),C(w),a.emit&&a.emit("scroll",w,c)},K=o=>{I.value=!0},G=o=>{I.value=!1};t.provide(E,{height:p,thumbRatioY:v,thumbRatioX:M,thumbRatioYMaxRange:P,thumbRatioXMaxRange:W,wrapperInnerMaxiMoveProportionY:S,wrapperInnerMaxiMoveProportionX:N,scrollBarRef:h}),a.expose({setScrollTop:n,setScrollLeft:i,setScrollTo:f});const O=(o=Y.VERTICAL)=>{if(r.width===!1||r.height===!1)return"";const c=e.wrapperInnerRealHeight,w=Number(r.height.replace("px","")),Q=e.wrapperInnerRealWidth;if(o=="vertical")return w<c?t.createVNode(t.resolveComponent("scroll-bar-thumb"),{ref:x,type:o,height:g.value,width:r.thumbWidth,ratioX:M.value,ratioY:v.value,class:I.value?"show":"hide"},null):"";if(o=="horizontal"){let H=Number(l.value.replace("px",""));if(l.value=="auto"){const $=()=>{l.value="auto",t.nextTick(()=>{var j;H=Number((j=b.value)==null?void 0:j.clientWidth),l.value=H+"px",L()})};$(),window.onresize=()=>$()}else if(l.value)return H<Q?t.createVNode(t.resolveComponent("scroll-bar-thumb"),{ref:x,type:o,height:r.thumbWidth,width:R.value,ratioX:M.value,ratioY:v.value,class:I.value?"show":"hide"},null):""}};return()=>{var o,c;return t.withDirectives(t.createVNode("div",{class:X(),style:{width:l.value},onMouseenter:K,onMouseleave:G},[t.createVNode("div",{class:X("_wrapper"),ref:h,style:{height:p.value,width:l.value},onScroll:J},[t.createVNode("div",{class:X("_view"),ref:b},[(c=(o=a.slots).default)==null?void 0:c.call(o)])]),t.createVNode("div",{class:[X("_bar"),"horizontal"]},[O(Y.HORIZONTAL)]),t.createVNode("div",{class:[X("_bar"),"vertical"]},[O(Y.VERTICAL)])]),[[t.resolveDirective("css"),B.value||{}]])}}}),"scroll-bar");d.ScrollBar=A,d.default=A,Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
