this.dw=this.dw||{};this.dw["uiscroll-bar"]=function(X,t){"use strict";const z=(r,o)=>(r.install=function(c){if(r){const u=r.name||r.__name;if(u||o){const s=o?`dw-${o}`:"dw-"+u.replace(/dw/gi,"").toLowerCase();c.component(s,r)}else console.error(r,o,!o)}},r),j=r=>Array.isArray(r);function L(r){const o=`vi-${r}`;return{n:s=>s?s.startsWith("-")?`${o}${s}`:`${o}_${s}`:o,classes:(...s)=>s.map(m=>{if(j(m)){const[d,w,e=null]=m;return d?w:e}return m})}}const _={height:{type:[String,Boolean],default:"300px"},width:{type:[String,Boolean],default:"auto"},thumbWidth:{type:String,default:"6px"},noResize:Boolean,dynamicCss:{type:Object,default:()=>({"thumb-bg-color":"#d9dfe3"})}};var I=(r=>(r.HORIZONTAL="horizontal",r.VERTICAL="vertical",r))(I||{});const D={type:{type:[String||I],default:"vertical"},height:{type:String,default:"100px"},width:{type:String,default:"6px"},ratioX:{type:String,default:"0px"},ratioY:{type:String,default:"0px"}},V=function(r,o){for(let[c,u]of Object.entries(o.value))r.style.setProperty("--"+c,u)},k={mounted(r,o){V(r,o)},updated(r,o){V(r,o)},install(r){r.directive("Css",this)}},E=Symbol("scroll-bar"),{n:Z}=L("scroll-bar__thumb"),F=t.defineComponent({name:"ScrollBar",emits:["update:height","update:width"],props:D,setup(r,o){const{thumbRatioY:c,thumbRatioX:u,thumbRatioYMaxRange:s,thumbRatioXMaxRange:m,wrapperInnerMaxiMoveProportionY:d,wrapperInnerMaxiMoveProportionX:w,scrollBarRef:e}=t.inject(E),f=t.ref(),B=t.reactive({mouseMoving:!1});let h=0,i=0,b=0,g=0,R=0,M=0;const y=t.computed({get(){return r.height},set(n){o.emit&&o.emit("update:height",n)}}),W=t.computed({get(){return r.width},set(n){o.emit&&o.emit("update:width",n)}}),C=function(n){if(n=="vertical"){let l=0;const v=R;l=b<0?v+Math.abs(b):v-Math.abs(b),l<0&&(l=0),l>s.value&&(l=s.value),e.value.scrollTop=Math.abs(d.value*l)}else if(n=="horizontal"){let l=0;const v=M;l=g<0?v+Math.abs(g):v-Math.abs(g),l<0&&(l=0),l>m.value&&(l=m.value),e.value.scrollLeft=Math.abs(w.value*l)}},N=function(n){B.mouseMoving=!0,R=Number(c.value.slice(11,-3)),M=Number(u.value.slice(11,-3)),h=Number(n.clientY),i=Number(n.clientX)},P=function(n){b=h-n.clientY,g=i-n.clientX,C(r.type)};document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",P),document.removeEventListener("mousedown",N),h=0,i=0,b=0,g=0,R=0,M=0,B.mouseMoving=!1});const S=n=>{document.addEventListener("mousedown",N),document.addEventListener("mousemove",P)};return()=>t.createVNode("div",{class:Z(),ref:f,style:{height:y.value,width:W.value,transform:r.type=="vertical"?r.ratioY:r.ratioX},onMousedown:S},null)}}),{n:Y}=L("scroll-bar"),T=z(t.defineComponent({name:"ScrollBar",emits:["update:width"],directives:{css:k},props:_,components:{"scroll-bar-thumb":F},setup(r,o){let c,u=null;const s=a=>{n()},m=t.ref(),d=t.ref(),w=t.ref(),e=t.reactive({wrapperInnerRealHeight:0,wrapperInnerRealWidth:0,wrapperInnerMaxiMoveRangeY:0,wrapperInnerMaxiMoveRangeX:0,wrapperInnerMaxiMoveProportionY:0,wrapperInnerMaxiMoveProportionX:0,thumbHeightProportion:0,thumbWidthProportion:0,thumbHeight:"",thumbWidth:"",thumbRatioX:"",thumbRatioY:"",thumbRatioYMaxRange:0,thumbRatioXMaxRange:0,thumbRatioYProportion:0,thumbRatioXProportion:0,cacheContainerWidth:""});let f=t.ref(!1);t.watch(()=>r.noResize,a=>{a?(c==null||c(),u==null||u.disconnect()):(u=new MutationObserver(s),t.nextTick(()=>{u.observe(d.value,{attributes:!0,childList:!0,subtree:!0})}))},{immediate:!0});const B=t.computed(()=>Object.assign(_.dynamicCss.default(),r.dynamicCss)),h=t.computed(()=>r.height),i=t.computed({get(){return e.cacheContainerWidth},set(a){e.cacheContainerWidth=a}}),b=t.computed({get(){return e.thumbHeight},set(a){e.thumbHeight=a}}),g=t.computed({get(){return e.thumbWidth},set(a){e.thumbWidth=a}}),R=t.computed({get(){return e.thumbRatioX},set(a){e.thumbRatioX=a}}),M=t.computed({get(){return e.thumbRatioY},set(a){e.thumbRatioY=a}}),y=t.computed(()=>e.thumbRatioYMaxRange),W=t.computed(()=>e.thumbRatioXMaxRange),C=t.computed(()=>e.wrapperInnerMaxiMoveProportionY),N=t.computed(()=>e.wrapperInnerMaxiMoveProportionX),P=a=>{e.thumbRatioY=`translateY(${String(e.thumbRatioYProportion*a)+"px"})`},S=a=>{e.thumbRatioX=`translateX(${String(e.thumbRatioXProportion*a)+"px"})`},n=a=>{var p,x;e.wrapperInnerRealHeight=Number((p=d.value)==null?void 0:p.scrollHeight),e.wrapperInnerRealWidth=Number((x=d.value)==null?void 0:x.scrollWidth),e.wrapperInnerMaxiMoveRangeY=e.wrapperInnerRealHeight-Number(h.value.replace("px","")),e.wrapperInnerMaxiMoveRangeX=e.wrapperInnerRealWidth-Number(i.value.replace("px","")),e.thumbHeightProportion=Number(h.value.replace("px",""))/e.wrapperInnerRealHeight,e.thumbWidthProportion=Number(i.value.replace("px",""))/e.wrapperInnerRealWidth,e.thumbHeight=String(e.thumbHeightProportion*Number(h.value.replace("px","")))+"px",e.thumbWidth=String(e.thumbWidthProportion*Number(i.value.replace("px","")))+"px",e.thumbRatioYMaxRange=Number(h.value.replace("px",""))-Number(e.thumbHeight.replace("px","")),e.thumbRatioXMaxRange=Number(i.value.replace("px",""))-Number(e.thumbWidth.replace("px","")),e.thumbRatioYProportion=e.thumbRatioYMaxRange/e.wrapperInnerMaxiMoveRangeY,e.thumbRatioXProportion=e.thumbRatioXMaxRange/e.wrapperInnerMaxiMoveRangeX,e.wrapperInnerMaxiMoveProportionY=e.wrapperInnerMaxiMoveRangeY/e.thumbRatioYMaxRange,e.wrapperInnerMaxiMoveProportionX=e.wrapperInnerMaxiMoveRangeX/e.thumbRatioXMaxRange};t.onMounted(()=>{e.cacheContainerWidth=r.width,n()});const l=a=>{const p=a.target.scrollTop,x=a.target.scrollLeft;P(p),S(x)},v=a=>{f.value=!0},J=a=>{f.value=!1};t.provide(E,{height:h,thumbRatioY:M,thumbRatioX:R,thumbRatioYMaxRange:y,thumbRatioXMaxRange:W,wrapperInnerMaxiMoveProportionY:C,wrapperInnerMaxiMoveProportionX:N,scrollBarRef:m});const A=(a=I.VERTICAL)=>{if(r.width===!1||r.height===!1)return"";const p=e.wrapperInnerRealHeight,x=Number(r.height.replace("px","")),K=e.wrapperInnerRealWidth;if(a=="vertical")return x<p?t.createVNode(t.resolveComponent("scroll-bar-thumb"),{ref:w,type:a,height:b.value,width:r.thumbWidth,ratioX:R.value,ratioY:M.value,class:f.value?"show":"hide"},null):"";if(a=="horizontal"){let H=Number(i.value.replace("px",""));if(i.value=="auto"){const O=()=>{i.value="auto",t.nextTick(()=>{var $;H=Number(($=d.value)==null?void 0:$.clientWidth),i.value=H+"px",n()})};O(),window.onresize=()=>O()}else if(i.value)return H<K?t.createVNode(t.resolveComponent("scroll-bar-thumb"),{ref:w,type:a,height:r.thumbWidth,width:g.value,ratioX:R.value,ratioY:M.value,class:f.value?"show":"hide"},null):""}};return()=>{var a,p;return t.withDirectives(t.createVNode("div",{class:Y(),style:{width:i.value},onMouseenter:v,onMouseleave:J},[t.createVNode("div",{class:Y("_wrapper"),ref:m,style:{height:h.value,width:i.value},onScroll:l},[t.createVNode("div",{class:Y("_view"),ref:d},[(p=(a=o.slots).default)==null?void 0:p.call(a)])]),t.createVNode("div",{class:[Y("_bar"),"horizontal"]},[A(I.HORIZONTAL)]),t.createVNode("div",{class:[Y("_bar"),"vertical"]},[A(I.VERTICAL)])]),[[t.resolveDirective("css"),B.value||{}]])}}}),"scroll-bar");return X.ScrollBar=T,X.default=T,Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),X}({},Vue);
