this.dw=this.dw||{};this.dw["uiscroll-bar"]=function(X,t){"use strict";const j=(r,a)=>(r.install=function(m){if(r){const s=r.name||r.__name;if(s||a){const u=a?`dw-${a}`:"dw-"+s.replace(/dw/gi,"").toLowerCase();m.component(u,r)}else console.error(r,a,!a)}},r),D=r=>Array.isArray(r);function _(r){const a=`vi-${r}`;return{n:u=>u?u.startsWith("-")?`${a}${u}`:`${a}_${u}`:a,classes:(...u)=>u.map(h=>{if(D(h)){const[p,f,e=null]=h;return p?f:e}return h})}}const T={height:{type:[String,Boolean],default:"300px"},width:{type:[String,Boolean],default:"auto"},thumbWidth:{type:String,default:"6px"},noResize:Boolean,dynamicCss:{type:Object,default:()=>({"thumb-bg-color":"#d9dfe3"})}};var I=(r=>(r.HORIZONTAL="horizontal",r.VERTICAL="vertical",r))(I||{});const k={type:{type:[String||I],default:"vertical"},height:{type:String,default:"100px"},width:{type:String,default:"6px"},ratioX:{type:String,default:"0px"},ratioY:{type:String,default:"0px"}},V=function(r,a){for(let[m,s]of Object.entries(a.value))r.style.setProperty("--"+m,s)},Z={mounted(r,a){V(r,a)},updated(r,a){V(r,a)},install(r){r.directive("Css",this)}},E=Symbol("scroll-bar"),{n:F}=_("scroll-bar__thumb"),J=t.defineComponent({name:"ScrollBar",emits:["update:height","update:width"],props:k,setup(r,a){const{thumbRatioY:m,thumbRatioX:s,thumbRatioYMaxRange:u,thumbRatioXMaxRange:h,wrapperInnerMaxiMoveProportionY:p,wrapperInnerMaxiMoveProportionX:f,scrollBarRef:e}=t.inject(E),x=t.ref(),B=t.reactive({mouseMoving:!1});let d=0,l=0,b=0,g=0,R=0,M=0;const y=t.computed({get(){return r.height},set(n){a.emit&&a.emit("update:height",n)}}),W=t.computed({get(){return r.width},set(n){a.emit&&a.emit("update:width",n)}}),S=function(n){if(n=="vertical"){let i=0;const v=R;i=b<0?v+Math.abs(b):v-Math.abs(b),i<0&&(i=0),i>u.value&&(i=u.value),e.value.scrollTop=Math.abs(p.value*i)}else if(n=="horizontal"){let i=0;const v=M;i=g<0?v+Math.abs(g):v-Math.abs(g),i<0&&(i=0),i>h.value&&(i=h.value),e.value.scrollLeft=Math.abs(f.value*i)}},N=function(n){B.mouseMoving=!0,R=Number(m.value.slice(11,-3)),M=Number(s.value.slice(11,-3)),d=Number(n.clientY),l=Number(n.clientX)},P=function(n){b=d-n.clientY,g=l-n.clientX,S(r.type)};document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",P),document.removeEventListener("mousedown",N),d=0,l=0,b=0,g=0,R=0,M=0,B.mouseMoving=!1});const C=n=>{document.addEventListener("mousedown",N),document.addEventListener("mousemove",P)};return()=>t.createVNode("div",{class:F(),ref:x,style:{height:y.value,width:W.value,transform:r.type=="vertical"?r.ratioY:r.ratioX},onMousedown:C},null)}}),{n:Y}=_("scroll-bar"),A=j(t.defineComponent({name:"ScrollBar",emits:["update:width","scroll"],directives:{css:Z},props:T,components:{"scroll-bar-thumb":J},setup(r,a){let m,s=null;const u=o=>{L()},h=t.ref(),p=t.ref(),f=t.ref(),e=t.reactive({wrapperInnerRealHeight:0,wrapperInnerRealWidth:0,wrapperInnerMaxiMoveRangeY:0,wrapperInnerMaxiMoveRangeX:0,wrapperInnerMaxiMoveProportionY:0,wrapperInnerMaxiMoveProportionX:0,thumbHeightProportion:0,thumbWidthProportion:0,thumbHeight:"",thumbWidth:"",thumbRatioX:"",thumbRatioY:"",thumbRatioYMaxRange:0,thumbRatioXMaxRange:0,thumbRatioYProportion:0,thumbRatioXProportion:0,cacheContainerWidth:""});let x=t.ref(!1);t.watch(()=>r.noResize,o=>{o?(m==null||m(),s==null||s.disconnect()):(s=new MutationObserver(u),t.nextTick(()=>{s.observe(p.value,{attributes:!0,childList:!0,subtree:!0})}))},{immediate:!0});const B=t.computed(()=>Object.assign(T.dynamicCss.default(),r.dynamicCss)),d=t.computed(()=>r.height),l=t.computed({get(){return e.cacheContainerWidth},set(o){e.cacheContainerWidth=o}}),b=t.computed({get(){return e.thumbHeight},set(o){e.thumbHeight=o}}),g=t.computed({get(){return e.thumbWidth},set(o){e.thumbWidth=o}}),R=t.computed({get(){return e.thumbRatioX},set(o){e.thumbRatioX=o}}),M=t.computed({get(){return e.thumbRatioY},set(o){e.thumbRatioY=o}}),y=t.computed(()=>e.thumbRatioYMaxRange),W=t.computed(()=>e.thumbRatioXMaxRange),S=t.computed(()=>e.wrapperInnerMaxiMoveProportionY),N=t.computed(()=>e.wrapperInnerMaxiMoveProportionX),P=o=>{e.thumbRatioY=`translateY(${String(e.thumbRatioYProportion*o)+"px"})`},C=o=>{e.thumbRatioX=`translateX(${String(e.thumbRatioXProportion*o)+"px"})`},n=o=>{h.value.scrollTop=o},i=o=>{h.value.scrollLeft=o},v=(o,c)=>{n(o),i(c)},L=o=>{var c,w;e.wrapperInnerRealHeight=Number((c=p.value)==null?void 0:c.scrollHeight),e.wrapperInnerRealWidth=Number((w=p.value)==null?void 0:w.scrollWidth),e.wrapperInnerMaxiMoveRangeY=e.wrapperInnerRealHeight-Number(d.value.replace("px","")),e.wrapperInnerMaxiMoveRangeX=e.wrapperInnerRealWidth-Number(l.value.replace("px","")),e.thumbHeightProportion=Number(d.value.replace("px",""))/e.wrapperInnerRealHeight,e.thumbWidthProportion=Number(l.value.replace("px",""))/e.wrapperInnerRealWidth,e.thumbHeight=String(e.thumbHeightProportion*Number(d.value.replace("px","")))+"px",e.thumbWidth=String(e.thumbWidthProportion*Number(l.value.replace("px","")))+"px",e.thumbRatioYMaxRange=Number(d.value.replace("px",""))-Number(e.thumbHeight.replace("px","")),e.thumbRatioXMaxRange=Number(l.value.replace("px",""))-Number(e.thumbWidth.replace("px","")),e.thumbRatioYProportion=e.thumbRatioYMaxRange/e.wrapperInnerMaxiMoveRangeY,e.thumbRatioXProportion=e.thumbRatioXMaxRange/e.wrapperInnerMaxiMoveRangeX,e.wrapperInnerMaxiMoveProportionY=e.wrapperInnerMaxiMoveRangeY/e.thumbRatioYMaxRange,e.wrapperInnerMaxiMoveProportionX=e.wrapperInnerMaxiMoveRangeX/e.thumbRatioXMaxRange};t.onMounted(()=>{e.cacheContainerWidth=r.width,L()});const K=o=>{const c=o.target.scrollTop,w=o.target.scrollLeft;P(c),C(w),a.emit&&a.emit("scroll",w,c)},q=o=>{x.value=!0},G=o=>{x.value=!1};t.provide(E,{height:d,thumbRatioY:M,thumbRatioX:R,thumbRatioYMaxRange:y,thumbRatioXMaxRange:W,wrapperInnerMaxiMoveProportionY:S,wrapperInnerMaxiMoveProportionX:N,scrollBarRef:h}),a.expose({setScrollTop:n,setScrollLeft:i,setScrollTo:v});const O=(o=I.VERTICAL)=>{if(r.width===!1||r.height===!1)return"";const c=e.wrapperInnerRealHeight,w=Number(r.height.replace("px","")),Q=e.wrapperInnerRealWidth;if(o=="vertical")return w<c?t.createVNode(t.resolveComponent("scroll-bar-thumb"),{ref:f,type:o,height:b.value,width:r.thumbWidth,ratioX:R.value,ratioY:M.value,class:x.value?"show":"hide"},null):"";if(o=="horizontal"){let H=Number(l.value.replace("px",""));if(l.value=="auto"){const $=()=>{l.value="auto",t.nextTick(()=>{var z;H=Number((z=p.value)==null?void 0:z.clientWidth),l.value=H+"px",L()})};$(),window.onresize=()=>$()}else if(l.value)return H<Q?t.createVNode(t.resolveComponent("scroll-bar-thumb"),{ref:f,type:o,height:r.thumbWidth,width:g.value,ratioX:R.value,ratioY:M.value,class:x.value?"show":"hide"},null):""}};return()=>{var o,c;return t.withDirectives(t.createVNode("div",{class:Y(),style:{width:l.value},onMouseenter:q,onMouseleave:G},[t.createVNode("div",{class:Y("_wrapper"),ref:h,style:{height:d.value,width:l.value},onScroll:K},[t.createVNode("div",{class:Y("_view"),ref:p},[(c=(o=a.slots).default)==null?void 0:c.call(o)])]),t.createVNode("div",{class:[Y("_bar"),"horizontal"]},[O(I.HORIZONTAL)]),t.createVNode("div",{class:[Y("_bar"),"vertical"]},[O(I.VERTICAL)])]),[[t.resolveDirective("css"),B.value||{}]])}}}),"scroll-bar");return X.ScrollBar=A,X.default=A,Object.defineProperties(X,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),X}({},Vue);
