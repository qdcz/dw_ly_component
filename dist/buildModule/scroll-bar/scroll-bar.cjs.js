"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const r=require("vue"),k=(t,a)=>(t.install=function(s){if(t){const m=t.name||t.__name;if(m||a){const n=a?`dw-${a}`:"dw-"+m.replace(/dw/gi,"").toLowerCase();s.component(n,t)}else console.error(t,a,!a)}},t),Z=t=>Array.isArray(t);function V(t){const a=`vi-${t}`;return{n:n=>n?n.startsWith("-")?`${a}${n}`:`${a}_${n}`:a,classes:(...n)=>n.map(c=>{if(Z(c)){const[w,e,p=null]=c;return w?e:p}return c})}}const T={height:{type:[String,Boolean],default:"300px"},width:{type:[String,Boolean],default:"auto"},thumbWidth:{type:String,default:"6px"},noResize:Boolean,dynamicCss:{type:Object,default:()=>({"thumb-bg-color":"#d9dfe3"})}};var Y=(t=>(t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t))(Y||{});const q={type:{type:[String||Y],default:"vertical"},height:{type:String,default:"100px"},width:{type:String,default:"6px"},ratioX:{type:String,default:"0px"},ratioY:{type:String,default:"0px"}},E=function(t,a){for(let[s,m]of Object.entries(a.value))t.style.setProperty("--"+s,m)},F={mounted(t,a){E(t,a)},updated(t,a){E(t,a)},install(t){t.directive("Css",this)}},O=Symbol("scroll-bar"),{n:J}=V("scroll-bar__thumb"),K=r.defineComponent({name:"ScrollBar",emits:["update:height","update:width"],props:q,setup(t,a){const{thumbRatioY:s,thumbRatioX:m,thumbRatioYMaxRange:n,thumbRatioXMaxRange:c,wrapperInnerMaxiMoveProportionY:w,wrapperInnerMaxiMoveProportionX:e,scrollBarRef:p}=r.inject(O),P=r.ref(),d=r.reactive({mouseMoving:!1});let u=0,f=0,g=0,v=0,R=0,x=0;const y=r.computed({get(){return t.height},set(i){a.emit&&a.emit("update:height",i)}}),W=r.computed({get(){return t.width},set(i){a.emit&&a.emit("update:width",i)}}),S=function(i){if(i=="vertical"){let l=0;const b=R;l=g<0?b+Math.abs(g):b-Math.abs(g),l<0&&(l=0),l>n.value&&(l=n.value),p.value.scrollTop=Math.abs(w.value*l)}else if(i=="horizontal"){let l=0;const b=x;l=v<0?b+Math.abs(v):b-Math.abs(v),l<0&&(l=0),l>c.value&&(l=c.value),p.value.scrollLeft=Math.abs(e.value*l)}},X=function(i){d.mouseMoving=!0,R=Number(s.value.slice(11,-3)),x=Number(m.value.slice(11,-3)),u=Number(i.clientY),f=Number(i.clientX)},N=function(i){g=u-i.clientY,v=f-i.clientX,S(t.type)};document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",N),document.removeEventListener("mousedown",X),u=0,f=0,g=0,v=0,R=0,x=0,d.mouseMoving=!1});const B=i=>{document.addEventListener("mousedown",X),document.addEventListener("mousemove",N)};return()=>r.createVNode("div",{class:J(),ref:P,style:{height:y.value,width:W.value,transform:t.type=="vertical"?t.ratioY:t.ratioX},onMousedown:B},null)}}),{n:I}=V("scroll-bar"),G=r.defineComponent({name:"ScrollBar",emits:["update:width","scroll"],directives:{css:F},props:T,components:{"scroll-bar-thumb":K},setup(t,a){let s=null;const m=o=>{b()},n=r.ref(),c=r.ref(),w=r.ref(),e=r.reactive({wrapperInnerRealHeight:0,wrapperInnerRealWidth:0,wrapperInnerMaxiMoveRangeY:0,wrapperInnerMaxiMoveRangeX:0,wrapperInnerMaxiMoveProportionY:0,wrapperInnerMaxiMoveProportionX:0,thumbHeightProportion:0,thumbWidthProportion:0,thumbHeight:"",thumbWidth:"",thumbRatioX:"",thumbRatioY:"",thumbRatioYMaxRange:0,thumbRatioXMaxRange:0,thumbRatioYProportion:0,thumbRatioXProportion:0,cacheContainerWidth:""});let p=r.ref(!1);r.watch(()=>t.noResize,o=>{o?s==null||s.disconnect():(s=new MutationObserver(m),r.nextTick(()=>{s.observe(c.value,{attributes:!0,childList:!0,subtree:!0})}))},{immediate:!0});const P=r.computed(()=>Object.assign(T.dynamicCss.default(),t.dynamicCss)),d=r.computed(()=>t.height),u=r.computed({get(){return e.cacheContainerWidth},set(o){e.cacheContainerWidth=o}}),f=r.computed({get(){return e.thumbHeight},set(o){e.thumbHeight=o}}),g=r.computed({get(){return e.thumbWidth},set(o){e.thumbWidth=o}}),v=r.computed({get(){return e.thumbRatioX},set(o){e.thumbRatioX=o}}),R=r.computed({get(){return e.thumbRatioY},set(o){e.thumbRatioY=o}}),x=r.computed(()=>e.thumbRatioYMaxRange),y=r.computed(()=>e.thumbRatioXMaxRange),W=r.computed(()=>e.wrapperInnerMaxiMoveProportionY),S=r.computed(()=>e.wrapperInnerMaxiMoveProportionX),X=o=>{e.thumbRatioY=`translateY(${String(e.thumbRatioYProportion*o)+"px"})`},N=o=>{e.thumbRatioX=`translateX(${String(e.thumbRatioXProportion*o)+"px"})`},B=o=>{n.value.scrollTop=o},i=o=>{n.value.scrollLeft=o},l=(o,h)=>{B(o),i(h)},b=o=>{var h,M;e.wrapperInnerRealHeight=Number((h=c.value)==null?void 0:h.scrollHeight),e.wrapperInnerRealWidth=Number((M=c.value)==null?void 0:M.scrollWidth),e.wrapperInnerMaxiMoveRangeY=e.wrapperInnerRealHeight-Number(d.value.replace("px","")),e.wrapperInnerMaxiMoveRangeX=e.wrapperInnerRealWidth-Number(u.value.replace("px","")),e.thumbHeightProportion=Number(d.value.replace("px",""))/e.wrapperInnerRealHeight,e.thumbWidthProportion=Number(u.value.replace("px",""))/e.wrapperInnerRealWidth,e.thumbHeight=String(e.thumbHeightProportion*Number(d.value.replace("px","")))+"px",e.thumbWidth=String(e.thumbWidthProportion*Number(u.value.replace("px","")))+"px",e.thumbRatioYMaxRange=Number(d.value.replace("px",""))-Number(e.thumbHeight.replace("px","")),e.thumbRatioXMaxRange=Number(u.value.replace("px",""))-Number(e.thumbWidth.replace("px","")),e.thumbRatioYProportion=e.thumbRatioYMaxRange/e.wrapperInnerMaxiMoveRangeY,e.thumbRatioXProportion=e.thumbRatioXMaxRange/e.wrapperInnerMaxiMoveRangeX,e.wrapperInnerMaxiMoveProportionY=e.wrapperInnerMaxiMoveRangeY/e.thumbRatioYMaxRange,e.wrapperInnerMaxiMoveProportionX=e.wrapperInnerMaxiMoveRangeX/e.thumbRatioXMaxRange};r.onMounted(()=>{e.cacheContainerWidth=t.width,b()});const $=o=>{const h=o.target.scrollTop,M=o.target.scrollLeft;X(h),N(M),a.emit&&a.emit("scroll",M,h)},z=()=>{p.value=!0},j=()=>{p.value=!1};r.provide(O,{height:d,thumbRatioY:R,thumbRatioX:v,thumbRatioYMaxRange:x,thumbRatioXMaxRange:y,wrapperInnerMaxiMoveProportionY:W,wrapperInnerMaxiMoveProportionX:S,scrollBarRef:n}),a.expose({setScrollTop:B,setScrollLeft:i,setScrollTo:l});const L=(o=Y.VERTICAL)=>{if(t.width===!1||t.height===!1)return"";const h=e.wrapperInnerRealHeight,M=Number(t.height.replace("px","")),D=e.wrapperInnerRealWidth;if(o=="vertical")return M<h?r.createVNode(r.resolveComponent("scroll-bar-thumb"),{ref:w,type:o,height:f.value,width:t.thumbWidth,ratioX:v.value,ratioY:R.value,class:p.value?"show":"hide"},null):"";if(o=="horizontal"){let C=Number(u.value.replace("px",""));if(u.value=="auto"){const H=()=>{u.value="auto",r.nextTick(()=>{var _;C=Number((_=c.value)==null?void 0:_.clientWidth),u.value=C+"px",b()})};H(),window.onresize=()=>H()}else if(u.value)return C<D?r.createVNode(r.resolveComponent("scroll-bar-thumb"),{ref:w,type:o,height:t.thumbWidth,width:g.value,ratioX:v.value,ratioY:R.value,class:p.value?"show":"hide"},null):""}};return()=>{var o,h;return r.withDirectives(r.createVNode("div",{class:I(),style:{width:u.value},onMouseenter:z,onMouseleave:j},[r.createVNode("div",{class:I("_wrapper"),ref:n,style:{height:d.value,width:u.value},onScroll:$},[r.createVNode("div",{class:I("_view"),ref:c},[(h=(o=a.slots).default)==null?void 0:h.call(o)])]),r.createVNode("div",{class:[I("_bar"),"horizontal"]},[L(Y.HORIZONTAL)]),r.createVNode("div",{class:[I("_bar"),"vertical"]},[L(Y.VERTICAL)])]),[[r.resolveDirective("css"),P.value||{}]])}}}),A=k(G,"scroll-bar");exports.ScrollBar=A;exports.default=A;
