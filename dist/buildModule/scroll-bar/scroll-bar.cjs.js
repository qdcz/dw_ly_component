"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const r=require("vue"),j=(t,o)=>(t.install=function(c){if(t){const l=t.name||t.__name;if(l||o){const s=o?`dw-${o}`:"dw-"+l.replace(/dw/gi,"").toLowerCase();c.component(s,t)}else console.error(t,o,!o)}},t),D=t=>Array.isArray(t);function V(t){const o=`vi-${t}`;return{n:s=>s?s.startsWith("-")?`${o}${s}`:`${o}_${s}`:o,classes:(...s)=>s.map(m=>{if(D(m)){const[d,w,e=null]=m;return d?w:e}return m})}}const E={height:{type:[String,Boolean],default:"300px"},width:{type:[String,Boolean],default:"auto"},thumbWidth:{type:String,default:"6px"},noResize:Boolean,dynamicCss:{type:Object,default:()=>({"thumb-bg-color":"#d9dfe3"})}};var Y=(t=>(t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t))(Y||{});const k={type:{type:[String||Y],default:"vertical"},height:{type:String,default:"100px"},width:{type:String,default:"6px"},ratioX:{type:String,default:"0px"},ratioY:{type:String,default:"0px"}},T=function(t,o){for(let[c,l]of Object.entries(o.value))t.style.setProperty("--"+c,l)},Z={mounted(t,o){T(t,o)},updated(t,o){T(t,o)},install(t){t.directive("Css",this)}},A=Symbol("scroll-bar"),{n:q}=V("scroll-bar__thumb"),F=r.defineComponent({name:"ScrollBar",emits:["update:height","update:width"],props:k,setup(t,o){const{thumbRatioY:c,thumbRatioX:l,thumbRatioYMaxRange:s,thumbRatioXMaxRange:m,wrapperInnerMaxiMoveProportionY:d,wrapperInnerMaxiMoveProportionX:w,scrollBarRef:e}=r.inject(A),f=r.ref(),X=r.reactive({mouseMoving:!1});let h=0,i=0,b=0,v=0,g=0,R=0;const P=r.computed({get(){return t.height},set(n){o.emit&&o.emit("update:height",n)}}),y=r.computed({get(){return t.width},set(n){o.emit&&o.emit("update:width",n)}}),W=function(n){if(n=="vertical"){let u=0;const M=g;u=b<0?M+Math.abs(b):M-Math.abs(b),u<0&&(u=0),u>s.value&&(u=s.value),e.value.scrollTop=Math.abs(d.value*u)}else if(n=="horizontal"){let u=0;const M=R;u=v<0?M+Math.abs(v):M-Math.abs(v),u<0&&(u=0),u>m.value&&(u=m.value),e.value.scrollLeft=Math.abs(w.value*u)}},N=function(n){X.mouseMoving=!0,g=Number(c.value.slice(11,-3)),R=Number(l.value.slice(11,-3)),h=Number(n.clientY),i=Number(n.clientX)},B=function(n){b=h-n.clientY,v=i-n.clientX,W(t.type)};document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mousedown",N),h=0,i=0,b=0,v=0,g=0,R=0,X.mouseMoving=!1});const C=n=>{document.addEventListener("mousedown",N),document.addEventListener("mousemove",B)};return()=>r.createVNode("div",{class:q(),ref:f,style:{height:P.value,width:y.value,transform:t.type=="vertical"?t.ratioY:t.ratioX},onMousedown:C},null)}}),{n:I}=V("scroll-bar"),J=r.defineComponent({name:"ScrollBar",emits:["update:width"],directives:{css:Z},props:E,components:{"scroll-bar-thumb":F},setup(t,o){let c,l=null;const s=a=>{n()},m=r.ref(),d=r.ref(),w=r.ref(),e=r.reactive({wrapperInnerRealHeight:0,wrapperInnerRealWidth:0,wrapperInnerMaxiMoveRangeY:0,wrapperInnerMaxiMoveRangeX:0,wrapperInnerMaxiMoveProportionY:0,wrapperInnerMaxiMoveProportionX:0,thumbHeightProportion:0,thumbWidthProportion:0,thumbHeight:"",thumbWidth:"",thumbRatioX:"",thumbRatioY:"",thumbRatioYMaxRange:0,thumbRatioXMaxRange:0,thumbRatioYProportion:0,thumbRatioXProportion:0,cacheContainerWidth:""});let f=r.ref(!1);r.watch(()=>t.noResize,a=>{a?(c==null||c(),l==null||l.disconnect()):(l=new MutationObserver(s),r.nextTick(()=>{l.observe(d.value,{attributes:!0,childList:!0,subtree:!0})}))},{immediate:!0});const X=r.computed(()=>Object.assign(E.dynamicCss.default(),t.dynamicCss)),h=r.computed(()=>t.height),i=r.computed({get(){return e.cacheContainerWidth},set(a){e.cacheContainerWidth=a}}),b=r.computed({get(){return e.thumbHeight},set(a){e.thumbHeight=a}}),v=r.computed({get(){return e.thumbWidth},set(a){e.thumbWidth=a}}),g=r.computed({get(){return e.thumbRatioX},set(a){e.thumbRatioX=a}}),R=r.computed({get(){return e.thumbRatioY},set(a){e.thumbRatioY=a}}),P=r.computed(()=>e.thumbRatioYMaxRange),y=r.computed(()=>e.thumbRatioXMaxRange),W=r.computed(()=>e.wrapperInnerMaxiMoveProportionY),N=r.computed(()=>e.wrapperInnerMaxiMoveProportionX),B=a=>{e.thumbRatioY=`translateY(${String(e.thumbRatioYProportion*a)+"px"})`},C=a=>{e.thumbRatioX=`translateX(${String(e.thumbRatioXProportion*a)+"px"})`},n=a=>{var p,x;e.wrapperInnerRealHeight=Number((p=d.value)==null?void 0:p.scrollHeight),e.wrapperInnerRealWidth=Number((x=d.value)==null?void 0:x.scrollWidth),e.wrapperInnerMaxiMoveRangeY=e.wrapperInnerRealHeight-Number(h.value.replace("px","")),e.wrapperInnerMaxiMoveRangeX=e.wrapperInnerRealWidth-Number(i.value.replace("px","")),e.thumbHeightProportion=Number(h.value.replace("px",""))/e.wrapperInnerRealHeight,e.thumbWidthProportion=Number(i.value.replace("px",""))/e.wrapperInnerRealWidth,e.thumbHeight=String(e.thumbHeightProportion*Number(h.value.replace("px","")))+"px",e.thumbWidth=String(e.thumbWidthProportion*Number(i.value.replace("px","")))+"px",e.thumbRatioYMaxRange=Number(h.value.replace("px",""))-Number(e.thumbHeight.replace("px","")),e.thumbRatioXMaxRange=Number(i.value.replace("px",""))-Number(e.thumbWidth.replace("px","")),e.thumbRatioYProportion=e.thumbRatioYMaxRange/e.wrapperInnerMaxiMoveRangeY,e.thumbRatioXProportion=e.thumbRatioXMaxRange/e.wrapperInnerMaxiMoveRangeX,e.wrapperInnerMaxiMoveProportionY=e.wrapperInnerMaxiMoveRangeY/e.thumbRatioYMaxRange,e.wrapperInnerMaxiMoveProportionX=e.wrapperInnerMaxiMoveRangeX/e.thumbRatioXMaxRange};r.onMounted(()=>{e.cacheContainerWidth=t.width,n()});const u=a=>{const p=a.target.scrollTop,x=a.target.scrollLeft;B(p),C(x)},M=a=>{f.value=!0},$=a=>{f.value=!1};r.provide(A,{height:h,thumbRatioY:R,thumbRatioX:g,thumbRatioYMaxRange:P,thumbRatioXMaxRange:y,wrapperInnerMaxiMoveProportionY:W,wrapperInnerMaxiMoveProportionX:N,scrollBarRef:m});const H=(a=Y.VERTICAL)=>{if(t.width===!1||t.height===!1)return"";const p=e.wrapperInnerRealHeight,x=Number(t.height.replace("px","")),z=e.wrapperInnerRealWidth;if(a=="vertical")return x<p?r.createVNode(r.resolveComponent("scroll-bar-thumb"),{ref:w,type:a,height:b.value,width:t.thumbWidth,ratioX:g.value,ratioY:R.value,class:f.value?"show":"hide"},null):"";if(a=="horizontal"){let S=Number(i.value.replace("px",""));if(i.value=="auto"){const L=()=>{i.value="auto",r.nextTick(()=>{var _;S=Number((_=d.value)==null?void 0:_.clientWidth),i.value=S+"px",n()})};L(),window.onresize=()=>L()}else if(i.value)return S<z?r.createVNode(r.resolveComponent("scroll-bar-thumb"),{ref:w,type:a,height:t.thumbWidth,width:v.value,ratioX:g.value,ratioY:R.value,class:f.value?"show":"hide"},null):""}};return()=>{var a,p;return r.withDirectives(r.createVNode("div",{class:I(),style:{width:i.value},onMouseenter:M,onMouseleave:$},[r.createVNode("div",{class:I("_wrapper"),ref:m,style:{height:h.value,width:i.value},onScroll:u},[r.createVNode("div",{class:I("_view"),ref:d},[(p=(a=o.slots).default)==null?void 0:p.call(a)])]),r.createVNode("div",{class:[I("_bar"),"horizontal"]},[H(Y.HORIZONTAL)]),r.createVNode("div",{class:[I("_bar"),"vertical"]},[H(Y.VERTICAL)])]),[[r.resolveDirective("css"),X.value||{}]])}}}),O=j(J,"scroll-bar");exports.ScrollBar=O;exports.default=O;
